var Wg=Object.defineProperty,Jg=Object.defineProperties;var Yg=Object.getOwnPropertyDescriptors;var Ac=Object.getOwnPropertySymbols;var jg=Object.prototype.hasOwnProperty,Kg=Object.prototype.propertyIsEnumerable;var bc=(t,e,n)=>e in t?Wg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ie=(t,e)=>{for(var n in e||={})jg.call(e,n)&&bc(t,n,e[n]);if(Ac)for(var n of Ac(e))Kg.call(e,n)&&bc(t,n,e[n]);return t},pe=(t,e)=>Jg(t,Yg(e));var de=null,Ko=!1,ks=1,Zg=null,Xe=Symbol("SIGNAL");function x(t){let e=de;return de=t,e}function Zo(){return de}var Xn={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Nc(t){if(Ko)throw new Error("");if(de===null)return;de.consumerOnSignalRead(t);let e=de.producersTail;if(e!==void 0&&e.producer===t)return;let n,o=de.recomputing;if(o&&(n=e!==void 0?e.nextProducer:de.producers,n!==void 0&&n.producer===t)){de.producersTail=n,n.lastReadVersion=t.version;return}let r=t.consumersTail;if(r!==void 0&&r.consumer===de&&(!o||Xg(r,de)))return;let i=mn(de),s={producer:t,consumer:de,nextProducer:n,prevConsumer:r,lastReadVersion:t.version,nextConsumer:void 0};de.producersTail=s,e!==void 0?e.nextProducer=s:de.producers=s,i&&Fc(t,s)}function xc(){ks++}function Rc(t){if(!(mn(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ks)){if(!t.producerMustRecompute(t)&&!Xo(t)){Ps(t);return}t.producerRecomputeValue(t),Ps(t)}}function Fs(t){if(t.consumers===void 0)return;let e=Ko;Ko=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let o=n.consumer;o.dirty||Qg(o)}}finally{Ko=e}}function Ls(){return de?.consumerAllowSignalWrites!==!1}function Qg(t){t.dirty=!0,Fs(t),t.consumerMarkedDirty?.(t)}function Ps(t){t.dirty=!1,t.lastCleanEpoch=ks}function Qo(t){return t&&Pc(t),x(t)}function Pc(t){t.producersTail=void 0,t.recomputing=!0}function Os(t,e){x(e),t&&kc(t)}function kc(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(mn(t))do n=Vs(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Xo(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,o=e.lastReadVersion;if(o!==n.version||(Rc(n),o!==n.version))return!0}return!1}function gn(t){if(mn(t)){let e=t.producers;for(;e!==void 0;)e=Vs(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function Fc(t,e){let n=t.consumersTail,o=mn(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!o)for(let r=t.producers;r!==void 0;r=r.nextProducer)Fc(r.producer,r)}function Vs(t){let e=t.producer,n=t.nextProducer,o=t.nextConsumer,r=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,o!==void 0?o.prevConsumer=r:e.consumersTail=r,r!==void 0)r.nextConsumer=o;else if(e.consumers=o,!mn(e)){let i=e.producers;for(;i!==void 0;)i=Vs(i)}return n}function mn(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Lc(t){Zg?.(t)}function Xg(t,e){let n=e.producersTail;if(n!==void 0){let o=e.producers;do{if(o===t)return!0;if(o===n)break;o=o.nextProducer}while(o!==void 0)}return!1}function Oc(t,e){return Object.is(t,e)}function em(){throw new Error}var Vc=em;function Uc(t){Vc(t)}function Us(t){Vc=t}var tm=null;function Bs(t,e){let n=Object.create($c);n.value=t,e!==void 0&&(n.equal=e);let o=()=>Bc(n);return o[Xe]=n,Lc(n),[o,s=>Hs(n,s),s=>Hc(n,s)]}function Bc(t){return Nc(t),t.value}function Hs(t,e){Ls()||Uc(t),t.equal(t.value,e)||(t.value=e,nm(t))}function Hc(t,e){Ls()||Uc(t),Hs(t,e(t.value))}var $c=pe(ie({},Xn),{equal:Oc,value:void 0,kind:"signal"});function nm(t){t.version++,xc(),Fs(t),tm?.(t)}var $s=pe(ie({},Xn),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function Gs(t){if(t.dirty=!1,t.version>0&&!Xo(t))return;t.version++;let e=Qo(t);try{t.cleanup(),t.fn()}finally{Os(t,e)}}function G(t){return typeof t=="function"}function er(t){let n=t(o=>{Error.call(o),o.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var tr=er(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((o,r)=>`${r+1}) ${o.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function eo(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var he=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:o}=this;if(G(o))try{o()}catch(i){e=i instanceof tr?i.errors:[i]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let i of r)try{Gc(i)}catch(s){e=e??[],s instanceof tr?e=[...e,...s.errors]:e.push(s)}}if(e)throw new tr(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Gc(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&eo(n,e)}remove(e){let{_finalizers:n}=this;n&&eo(n,e),e instanceof t&&e._removeParent(this)}};he.EMPTY=(()=>{let t=new he;return t.closed=!0,t})();var qs=he.EMPTY;function nr(t){return t instanceof he||t&&"closed"in t&&G(t.remove)&&G(t.add)&&G(t.unsubscribe)}function Gc(t){G(t)?t():t.unsubscribe()}var Ve={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var yn={setTimeout(t,e,...n){let{delegate:o}=yn;return o?.setTimeout?o.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=yn;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function or(t){yn.setTimeout(()=>{let{onUnhandledError:e}=Ve;if(e)e(t);else throw t})}function zs(){}var qc=Ws("C",void 0,void 0);function zc(t){return Ws("E",void 0,t)}function Wc(t){return Ws("N",t,void 0)}function Ws(t,e,n){return{kind:t,value:e,error:n}}var Ot=null;function vn(t){if(Ve.useDeprecatedSynchronousErrorHandling){let e=!Ot;if(e&&(Ot={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:o}=Ot;if(Ot=null,n)throw o}}else t()}function Jc(t){Ve.useDeprecatedSynchronousErrorHandling&&Ot&&(Ot.errorThrown=!0,Ot.error=t)}var Vt=class extends he{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,nr(e)&&e.add(this)):this.destination=im}static create(e,n,o){return new En(e,n,o)}next(e){this.isStopped?Ys(Wc(e),this):this._next(e)}error(e){this.isStopped?Ys(zc(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ys(qc,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},om=Function.prototype.bind;function Js(t,e){return om.call(t,e)}var js=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(o){rr(o)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(o){rr(o)}else rr(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){rr(n)}}},En=class extends Vt{constructor(e,n,o){super();let r;if(G(e)||!e)r={next:e??void 0,error:n??void 0,complete:o??void 0};else{let i;this&&Ve.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Js(e.next,i),error:e.error&&Js(e.error,i),complete:e.complete&&Js(e.complete,i)}):r=e}this.destination=new js(r)}};function rr(t){Ve.useDeprecatedSynchronousErrorHandling?Jc(t):or(t)}function rm(t){throw t}function Ys(t,e){let{onStoppedNotification:n}=Ve;n&&yn.setTimeout(()=>n(t,e))}var im={closed:!0,next:zs,error:rm,complete:zs};var In=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Yc(t){return t}function jc(t){return t.length===0?Yc:t.length===1?t[0]:function(n){return t.reduce((o,r)=>r(o),n)}}var X=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let o=new t;return o.source=this,o.operator=n,o}subscribe(n,o,r){let i=am(n)?n:new En(n,o,r);return vn(()=>{let{operator:s,source:l}=this;i.add(s?s.call(i,l):l?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(o){n.error(o)}}forEach(n,o){return o=Kc(o),new o((r,i)=>{let s=new En({next:l=>{try{n(l)}catch(c){i(c),s.unsubscribe()}},error:i,complete:r});this.subscribe(s)})}_subscribe(n){var o;return(o=this.source)===null||o===void 0?void 0:o.subscribe(n)}[In](){return this}pipe(...n){return jc(n)(this)}toPromise(n){return n=Kc(n),new n((o,r)=>{let i;this.subscribe(s=>i=s,s=>r(s),()=>o(i))})}}return t.create=e=>new t(e),t})();function Kc(t){var e;return(e=t??Ve.Promise)!==null&&e!==void 0?e:Promise}function sm(t){return t&&G(t.next)&&G(t.error)&&G(t.complete)}function am(t){return t&&t instanceof Vt||sm(t)&&nr(t)}function lm(t){return G(t?.lift)}function ve(t){return e=>{if(lm(e))return e.lift(function(n){try{return t(n,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}function Me(t,e,n,o,r){return new Ks(t,e,n,o,r)}var Ks=class extends Vt{constructor(e,n,o,r,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(l){try{n(l)}catch(c){e.error(c)}}:super._next,this._error=r?function(l){try{r(l)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Zc=er(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Tt=(()=>{class t extends X{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let o=new ir(this,this);return o.operator=n,o}_throwIfClosed(){if(this.closed)throw new Zc}next(n){vn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let o of this.currentObservers)o.next(n)}})}error(n){vn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:o}=this;for(;o.length;)o.shift().error(n)}})}complete(){vn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:o,isStopped:r,observers:i}=this;return o||r?qs:(this.currentObservers=null,i.push(n),new he(()=>{this.currentObservers=null,eo(i,n)}))}_checkFinalizedStatuses(n){let{hasError:o,thrownError:r,isStopped:i}=this;o?n.error(r):i&&n.complete()}asObservable(){let n=new X;return n.source=this,n}}return t.create=(e,n)=>new ir(e,n),t})(),ir=class extends Tt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,e)}error(e){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&o!==void 0?o:qs}};var to=class extends Tt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:o}=this;if(e)throw n;return this._throwIfClosed(),o}next(e){super.next(this._value=e)}};function Qc(t){return t&&G(t.schedule)}function um(t){return t[t.length-1]}function Xc(t){return Qc(um(t))?t.pop():void 0}function td(t,e,n,o){function r(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function l(f){try{d(o.next(f))}catch(p){s(p)}}function c(f){try{d(o.throw(f))}catch(p){s(p)}}function d(f){f.done?i(f.value):r(f.value).then(l,c)}d((o=o.apply(t,e||[])).next())})}function ed(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ut(t){return this instanceof Ut?(this.v=t,this):new Ut(t)}function nd(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(m){return Promise.resolve(m).then(g,p)}}function l(g,m){o[g]&&(r[g]=function(y){return new Promise(function(E,v){i.push([g,y,E,v])>1||c(g,y)})},m&&(r[g]=m(r[g])))}function c(g,m){try{d(o[g](m))}catch(y){h(i[0][3],y)}}function d(g){g.value instanceof Ut?Promise.resolve(g.value.v).then(f,p):h(i[0][2],g)}function f(g){c("next",g)}function p(g){c("throw",g)}function h(g,m){g(m),i.shift(),i.length&&c(i[0][0],i[0][1])}}function od(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ed=="function"?ed(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(i){n[i]=t[i]&&function(s){return new Promise(function(l,c){s=t[i](s),r(l,c,s.done,s.value)})}}function r(i,s,l,c){Promise.resolve(c).then(function(d){i({value:d,done:l})},s)}}var sr=t=>t&&typeof t.length=="number"&&typeof t!="function";function ar(t){return G(t?.then)}function lr(t){return G(t[In])}function ur(t){return Symbol.asyncIterator&&G(t?.[Symbol.asyncIterator])}function cr(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function cm(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var dr=cm();function fr(t){return G(t?.[dr])}function pr(t){return nd(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:o,done:r}=yield Ut(n.read());if(r)return yield Ut(void 0);yield yield Ut(o)}}finally{n.releaseLock()}})}function hr(t){return G(t?.getReader)}function Ae(t){if(t instanceof X)return t;if(t!=null){if(lr(t))return dm(t);if(sr(t))return fm(t);if(ar(t))return pm(t);if(ur(t))return rd(t);if(fr(t))return hm(t);if(hr(t))return gm(t)}throw cr(t)}function dm(t){return new X(e=>{let n=t[In]();if(G(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fm(t){return new X(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function pm(t){return new X(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,or)})}function hm(t){return new X(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function rd(t){return new X(e=>{mm(t,e).catch(n=>e.error(n))})}function gm(t){return rd(pr(t))}function mm(t,e){var n,o,r,i;return td(this,void 0,void 0,function*(){try{for(n=od(t);o=yield n.next(),!o.done;){let s=o.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{o&&!o.done&&(i=n.return)&&(yield i.call(n))}finally{if(r)throw r.error}}e.complete()})}function be(t,e,n,o=0,r=!1){let i=e.schedule(function(){n(),r?t.add(this.schedule(null,o)):this.unsubscribe()},o);if(t.add(i),!r)return i}function gr(t,e=0){return ve((n,o)=>{n.subscribe(Me(o,r=>be(o,t,()=>o.next(r),e),()=>be(o,t,()=>o.complete(),e),r=>be(o,t,()=>o.error(r),e)))})}function mr(t,e=0){return ve((n,o)=>{o.add(t.schedule(()=>n.subscribe(o),e))})}function id(t,e){return Ae(t).pipe(mr(e),gr(e))}function sd(t,e){return Ae(t).pipe(mr(e),gr(e))}function ad(t,e){return new X(n=>{let o=0;return e.schedule(function(){o===t.length?n.complete():(n.next(t[o++]),n.closed||this.schedule())})})}function ld(t,e){return new X(n=>{let o;return be(n,e,()=>{o=t[dr](),be(n,e,()=>{let r,i;try{({value:r,done:i}=o.next())}catch(s){n.error(s);return}i?n.complete():n.next(r)},0,!0)}),()=>G(o?.return)&&o.return()})}function yr(t,e){if(!t)throw new Error("Iterable cannot be null");return new X(n=>{be(n,e,()=>{let o=t[Symbol.asyncIterator]();be(n,e,()=>{o.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function ud(t,e){return yr(pr(t),e)}function cd(t,e){if(t!=null){if(lr(t))return id(t,e);if(sr(t))return ad(t,e);if(ar(t))return sd(t,e);if(ur(t))return yr(t,e);if(fr(t))return ld(t,e);if(hr(t))return ud(t,e)}throw cr(t)}function dd(t,e){return e?cd(t,e):Ae(t)}function vr(...t){let e=Xc(t);return dd(t,e)}function et(t,e){return ve((n,o)=>{let r=0;n.subscribe(Me(o,i=>{o.next(t.call(e,i,r++))}))})}function fd(t,e,n,o,r,i,s,l){let c=[],d=0,f=0,p=!1,h=()=>{p&&!c.length&&!d&&e.complete()},g=y=>d<o?m(y):c.push(y),m=y=>{i&&e.next(y),d++;let E=!1;Ae(n(y,f++)).subscribe(Me(e,v=>{r?.(v),i?g(v):e.next(v)},()=>{E=!0},void 0,()=>{if(E)try{for(d--;c.length&&d<o;){let v=c.shift();s?be(e,s,()=>m(v)):m(v)}h()}catch(v){e.error(v)}}))};return t.subscribe(Me(e,g,()=>{p=!0,h()})),()=>{l?.()}}function Er(t,e,n=1/0){return G(e)?Er((o,r)=>et((i,s)=>e(o,i,r,s))(Ae(t(o,r))),n):(typeof e=="number"&&(n=e),ve((o,r)=>fd(o,r,t,n)))}function Zs(t,e){return ve((n,o)=>{let r=0;n.subscribe(Me(o,i=>t.call(e,i,r++)&&o.next(i)))})}function Qs(t,e){return G(e)?Er(t,e,1):Er(t,1)}function Xs(t){return ve((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function ea(t,e){return ve((n,o)=>{let r=null,i=0,s=!1,l=()=>s&&!r&&o.complete();n.subscribe(Me(o,c=>{r?.unsubscribe();let d=0,f=i++;Ae(t(c,f)).subscribe(r=Me(o,p=>o.next(e?e(c,p,f,d++):p),()=>{r=null,l()}))},()=>{s=!0,l()}))})}var ta;function Ir(){return ta}function tt(t){let e=ta;return ta=t,e}var pd=Symbol("NotFound");function Cn(t){return t===pd||t?.name==="\u0275NotFound"}var Ar="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",O=class extends Error{code;constructor(e,n){super(ao(e,n)),this.code=e}};function Em(t){return`NG0${Math.abs(t)}`}function ao(t,e){return`${Em(t)}${e?": "+e:""}`}function J(t){for(let e in t)if(t[e]===J)return e;throw Error("")}function Dt(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Dt).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let o=n.indexOf(`
`);return o>=0?n.slice(0,o):n}function br(t,e){return t?e?`${t} ${e}`:t:e||""}var Im=J({__forward_ref__:J});function Nr(t){return t.__forward_ref__=Nr,t.toString=function(){return Dt(this())},t}function De(t){return vd(t)?t():t}function vd(t){return typeof t=="function"&&t.hasOwnProperty(Im)&&t.__forward_ref__===Nr}function H(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function _n(t){return{providers:t.providers||[],imports:t.imports||[]}}function xr(t){return Cm(t,Rr)}function Cm(t,e){return t.hasOwnProperty(e)&&t[e]||null}function Tm(t){let e=t?.[Rr]??null;return e||null}function oa(t){return t&&t.hasOwnProperty(Tr)?t[Tr]:null}var Rr=J({\u0275prov:J}),Tr=J({\u0275inj:J}),V=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=H({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ga(t){return t&&!!t.\u0275providers}var ma=J({\u0275cmp:J}),ya=J({\u0275dir:J}),va=J({\u0275pipe:J});var ra=J({\u0275fac:J}),Gt=J({__NG_ELEMENT_ID__:J}),hd=J({__NG_ENV_ID__:J});function qt(t){return Ia(t,"@Component"),t[ma]||null}function Ea(t){return Ia(t,"@Directive"),t[ya]||null}function Ed(t){return Ia(t,"@Pipe"),t[va]||null}function Ia(t,e){if(t==null)throw new O(-919,!1)}function zt(t){return typeof t=="string"?t:t==null?"":String(t)}function Id(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():zt(t)}var Cd=J({ngErrorCode:J}),Dm=J({ngErrorMessage:J}),_m=J({ngTokenPath:J});function Ca(t,e){return Td("",-200,e)}function Pr(t,e){throw new O(-201,!1)}function Td(t,e,n){let o=new O(e,t);return o[Cd]=e,o[Dm]=t,n&&(o[_m]=n),o}function Sm(t){return t[Cd]}var ia;function Dd(){return ia}function Te(t){let e=ia;return ia=t,e}function Ta(t,e,n){let o=xr(t);if(o&&o.providedIn=="root")return o.value===void 0?o.value=o.factory():o.value;if(n&8)return null;if(e!==void 0)return e;Pr(t,"")}var wm={},Bt=wm,Mm="__NG_DI_FLAG__",sa=class{injector;constructor(e){this.injector=e}retrieve(e,n){let o=Ht(n)||0;try{return this.injector.get(e,o&8?null:Bt,o)}catch(r){if(Cn(r))return r;throw r}}};function Am(t,e=0){let n=Ir();if(n===void 0)throw new O(-203,!1);if(n===null)return Ta(t,void 0,e);{let o=bm(e),r=n.retrieve(t,o);if(Cn(r)){if(o.optional)return null;throw r}return r}}function B(t,e=0){return(Dd()||Am)(De(t),e)}function b(t,e){return B(t,Ht(e))}function Ht(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function bm(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function aa(t){let e=[];for(let n=0;n<t.length;n++){let o=De(t[n]);if(Array.isArray(o)){if(o.length===0)throw new O(900,!1);let r,i=0;for(let s=0;s<o.length;s++){let l=o[s],c=Nm(l);typeof c=="number"?c===-1?r=l.token:i|=c:r=l}e.push(B(r,i))}else e.push(B(o))}return e}function Nm(t){return t[Mm]}function Dn(t,e){let n=t.hasOwnProperty(ra);return n?t[ra]:null}function kr(t,e){t.forEach(n=>Array.isArray(n)?kr(n,e):e(n))}function Da(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function lo(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function _d(t,e,n,o){let r=t.length;if(r==e)t.push(n,o);else if(r===1)t.push(o,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let i=r-2;t[r]=t[i],r--}t[e]=n,t[e+1]=o}}function Fr(t,e,n){let o=Sn(t,e);return o>=0?t[o|1]=n:(o=~o,_d(t,o,e,n)),o}function Lr(t,e){let n=Sn(t,e);if(n>=0)return t[n|1]}function Sn(t,e){return xm(t,e,1)}function xm(t,e,n){let o=0,r=t.length>>n;for(;r!==o;){let i=o+(r-o>>1),s=t[i<<n];if(e===s)return i<<n;s>e?r=i:o=i+1}return~(r<<n)}var Wt={},Ee=[],uo=new V(""),_a=new V("",-1),Sa=new V(""),oo=class{get(e,n=Bt){if(n===Bt){let r=Td("",-201);throw r.name="\u0275NotFound",r}return n}};function co(t){return{\u0275providers:t}}function Sd(...t){return{\u0275providers:wa(!0,t),\u0275fromNgModule:!0}}function wa(t,...e){let n=[],o=new Set,r,i=s=>{n.push(s)};return kr(e,s=>{let l=s;Dr(l,i,[],o)&&(r||=[],r.push(l))}),r!==void 0&&wd(r,i),n}function wd(t,e){for(let n=0;n<t.length;n++){let{ngModule:o,providers:r}=t[n];Ma(r,i=>{e(i,o)})}}function Dr(t,e,n,o){if(t=De(t),!t)return!1;let r=null,i=oa(t),s=!i&&qt(t);if(!i&&!s){let c=t.ngModule;if(i=oa(c),i)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=t}let l=o.has(r);if(s){if(l)return!1;if(o.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of c)Dr(d,e,n,o)}}else if(i){if(i.imports!=null&&!l){o.add(r);let d;try{kr(i.imports,f=>{Dr(f,e,n,o)&&(d||=[],d.push(f))})}finally{}d!==void 0&&wd(d,e)}if(!l){let d=Dn(r)||(()=>new r);e({provide:r,useFactory:d,deps:Ee},r),e({provide:Sa,useValue:r,multi:!0},r),e({provide:uo,useValue:()=>B(r),multi:!0},r)}let c=i.providers;if(c!=null&&!l){let d=t;Ma(c,f=>{e(f,d)})}}else return!1;return r!==t&&t.providers!==void 0}function Ma(t,e){for(let n of t)ga(n)&&(n=n.\u0275providers),Array.isArray(n)?Ma(n,e):e(n)}var Rm=J({provide:String,useValue:J});function Md(t){return t!==null&&typeof t=="object"&&Rm in t}function Pm(t){return!!(t&&t.useExisting)}function km(t){return!!(t&&t.useFactory)}function _r(t){return typeof t=="function"}var fo=new V(""),Cr={},gd={},na;function po(){return na===void 0&&(na=new oo),na}var ge=class{},$t=class extends ge{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,o,r){super(),this.parent=n,this.source=o,this.scopes=r,ua(e,s=>this.processProvider(s)),this.records.set(_a,Tn(void 0,this)),r.has("environment")&&this.records.set(ge,Tn(void 0,this));let i=this.records.get(fo);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Sa,Ee,{self:!0}))}retrieve(e,n){let o=Ht(n)||0;try{return this.get(e,Bt,o)}catch(r){if(Cn(r))return r;throw r}}destroy(){no(this),this._destroyed=!0;let e=x(null);try{for(let o of this._ngOnDestroyHooks)o.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let o of n)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),x(e)}}onDestroy(e){return no(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){no(this);let n=tt(this),o=Te(void 0),r;try{return e()}finally{tt(n),Te(o)}}get(e,n=Bt,o){if(no(this),e.hasOwnProperty(hd))return e[hd](this);let r=Ht(o),i,s=tt(this),l=Te(void 0);try{if(!(r&4)){let d=this.records.get(e);if(d===void 0){let f=Um(e)&&xr(e);f&&this.injectableDefInScope(f)?d=Tn(la(e),Cr):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,r)}let c=r&2?po():this.parent;return n=r&8&&n===Bt?null:n,c.get(e,n)}catch(c){let d=Sm(c);throw d===-200||d===-201?new O(d,null):c}finally{Te(l),tt(s)}}resolveInjectorInitializers(){let e=x(null),n=tt(this),o=Te(void 0),r;try{let i=this.get(uo,Ee,{self:!0});for(let s of i)s()}finally{tt(n),Te(o),x(e)}}toString(){let e=[],n=this.records;for(let o of n.keys())e.push(Dt(o));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=De(e);let n=_r(e)?e:De(e&&e.provide),o=Lm(e);if(!_r(e)&&e.multi===!0){let r=this.records.get(n);r||(r=Tn(void 0,Cr,!0),r.factory=()=>aa(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,o)}hydrate(e,n,o){let r=x(null);try{if(n.value===gd)throw Ca(Dt(e));return n.value===Cr&&(n.value=gd,n.value=n.factory(void 0,o)),typeof n.value=="object"&&n.value&&Vm(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{x(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=De(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function la(t){let e=xr(t),n=e!==null?e.factory:Dn(t);if(n!==null)return n;if(t instanceof V)throw new O(204,!1);if(t instanceof Function)return Fm(t);throw new O(204,!1)}function Fm(t){if(t.length>0)throw new O(204,!1);let n=Tm(t);return n!==null?()=>n.factory(t):()=>new t}function Lm(t){if(Md(t))return Tn(void 0,t.useValue);{let e=Ad(t);return Tn(e,Cr)}}function Ad(t,e,n){let o;if(_r(t)){let r=De(t);return Dn(r)||la(r)}else if(Md(t))o=()=>De(t.useValue);else if(km(t))o=()=>t.useFactory(...aa(t.deps||[]));else if(Pm(t))o=(r,i)=>B(De(t.useExisting),i!==void 0&&i&8?8:void 0);else{let r=De(t&&(t.useClass||t.provide));if(Om(t))o=()=>new r(...aa(t.deps));else return Dn(r)||la(r)}return o}function no(t){if(t.destroyed)throw new O(205,!1)}function Tn(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Om(t){return!!t.deps}function Vm(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Um(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function ua(t,e){for(let n of t)Array.isArray(n)?ua(n,e):n&&ga(n)?ua(n.\u0275providers,e):e(n)}function wn(t,e){let n;t instanceof $t?(no(t),n=t):n=new sa(t);let o,r=tt(n),i=Te(void 0);try{return e()}finally{tt(r),Te(i)}}function bd(){return Dd()!==void 0||Ir()!=null}var Ue=0,F=1,k=2,le=3,Ne=4,xe=5,Mn=6,An=7,ee=8,pt=9,nt=10,te=11,bn=12,Aa=13,Jt=14,Re=15,Yt=16,jt=17,Kt=18,ho=19,ba=20,dt=21,Or=22,_t=23,Se=24,Vr=25,Zt=26,ce=27,Nd=1,Na=6,At=7,go=8,mo=9,ne=10;function ht(t){return Array.isArray(t)&&typeof t[Nd]=="object"}function Be(t){return Array.isArray(t)&&t[Nd]===!0}function xa(t){return(t.flags&4)!==0}function Qt(t){return t.componentOffset>-1}function yo(t){return(t.flags&1)===1}function Xt(t){return!!t.template}function Nn(t){return(t[k]&512)!==0}function en(t){return(t[k]&256)===256}var Ra="svg",xd="math";function Pe(t){for(;Array.isArray(t);)t=t[Ue];return t}function Pa(t,e){return Pe(e[t])}function He(t,e){return Pe(e[t.index])}function vo(t,e){return t.data[e]}function ot(t,e){let n=e[t];return ht(n)?n:n[Ue]}function Ur(t){return(t[k]&128)===128}function Rd(t){return Be(t[le])}function rt(t,e){return e==null?null:t[e]}function ka(t){t[jt]=0}function Fa(t){t[k]&1024||(t[k]|=1024,Ur(t)&&xn(t))}function Pd(t,e){for(;t>0;)e=e[Jt],t--;return e}function Eo(t){return!!(t[k]&9216||t[Se]?.dirty)}function Br(t){t[nt].changeDetectionScheduler?.notify(8),t[k]&64&&(t[k]|=1024),Eo(t)&&xn(t)}function xn(t){t[nt].changeDetectionScheduler?.notify(0);let e=St(t);for(;e!==null&&!(e[k]&8192||(e[k]|=8192,!Ur(e)));)e=St(e)}function La(t,e){if(en(t))throw new O(911,!1);t[dt]===null&&(t[dt]=[]),t[dt].push(e)}function kd(t,e){if(t[dt]===null)return;let n=t[dt].indexOf(e);n!==-1&&t[dt].splice(n,1)}function St(t){let e=t[le];return Be(e)?e[le]:e}function Fd(t){return t[An]??=[]}function Ld(t){return t.cleanup??=[]}var U={lFrame:Qd(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ca=!1;function Od(){return U.lFrame.elementDepthCount}function Vd(){U.lFrame.elementDepthCount++}function Ud(){U.lFrame.elementDepthCount--}function Oa(){return U.bindingsEnabled}function Bd(){return U.skipHydrationRootTNode!==null}function Hd(t){return U.skipHydrationRootTNode===t}function $d(){U.skipHydrationRootTNode=null}function W(){return U.lFrame.lView}function we(){return U.lFrame.tView}function gt(t){return U.lFrame.contextLView=t,t[ee]}function mt(t){return U.lFrame.contextLView=null,t}function it(){let t=Va();for(;t!==null&&t.type===64;)t=t.parent;return t}function Va(){return U.lFrame.currentTNode}function Gd(){let t=U.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Rn(t,e){let n=U.lFrame;n.currentTNode=t,n.isParent=e}function Ua(){return U.lFrame.isParent}function qd(){U.lFrame.isParent=!1}function Ba(){return ca}function ro(t){let e=ca;return ca=t,e}function zd(){return U.lFrame.bindingIndex}function Wd(t){return U.lFrame.bindingIndex=t}function Pn(){return U.lFrame.bindingIndex++}function Hr(t){let e=U.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Jd(){return U.lFrame.inI18n}function Yd(t,e){let n=U.lFrame;n.bindingIndex=n.bindingRootIndex=t,$r(e)}function jd(){return U.lFrame.currentDirectiveIndex}function $r(t){U.lFrame.currentDirectiveIndex=t}function Kd(t){let e=U.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Ha(t){U.lFrame.currentQueryIndex=t}function Bm(t){let e=t[F];return e.type===2?e.declTNode:e.type===1?t[xe]:null}function $a(t,e,n){if(n&4){let r=e,i=t;for(;r=r.parent,r===null&&!(n&1);)if(r=Bm(i),r===null||(i=i[Jt],r.type&10))break;if(r===null)return!1;e=r,t=i}let o=U.lFrame=Zd();return o.currentTNode=e,o.lView=t,!0}function Gr(t){let e=Zd(),n=t[F];U.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Zd(){let t=U.lFrame,e=t===null?null:t.child;return e===null?Qd(t):e}function Qd(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Xd(){let t=U.lFrame;return U.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Ga=Xd;function qr(){let t=Xd();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ef(t){return(U.lFrame.contextLView=Pd(t,U.lFrame.contextLView))[ee]}function yt(){return U.lFrame.selectedIndex}function bt(t){U.lFrame.selectedIndex=t}function qa(){let t=U.lFrame;return vo(t.tView,t.selectedIndex)}function ke(){U.lFrame.currentNamespace=Ra}function $e(){Hm()}function Hm(){U.lFrame.currentNamespace=null}function tf(){return U.lFrame.currentNamespace}var nf=!0;function zr(){return nf}function Wr(t){nf=t}function da(t,e=null,n=null,o){let r=of(t,e,n,o);return r.resolveInjectorInitializers(),r}function of(t,e=null,n=null,o,r=new Set){let i=[n||Ee,Sd(t)];return o=o||(typeof t=="object"?void 0:Dt(t)),new $t(i,e||po(),o||null,r)}var wt=class t{static THROW_IF_NOT_FOUND=Bt;static NULL=new oo;static create(e,n){if(Array.isArray(e))return da({name:""},n,e,"");{let o=e.name??"";return da({name:o},e.parent,e.providers,o)}}static \u0275prov=H({token:t,providedIn:"any",factory:()=>B(_a)});static __NG_ELEMENT_ID__=-1},me=new V(""),kn=(()=>{class t{static __NG_ELEMENT_ID__=$m;static __NG_ENV_ID__=n=>n}return t})(),Sr=class extends kn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return en(this._lView)}onDestroy(e){let n=this._lView;return La(n,e),()=>kd(n,e)}};function $m(){return new Sr(W())}var rf=!1,tn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new to(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new X(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})(),fa=class extends Tt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,bd()&&(this.destroyRef=b(kn,{optional:!0})??void 0,this.pendingTasks=b(tn,{optional:!0})??void 0)}emit(e){let n=x(null);try{super.next(e)}finally{x(n)}}subscribe(e,n,o){let r=e,i=n||(()=>null),s=o;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let l=super.subscribe({next:r,error:i,complete:s});return e instanceof he&&e.add(l),l}wrapInTimeout(e){return n=>{let o=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{o!==void 0&&this.pendingTasks?.remove(o)}})}}},ct=fa;function wr(...t){}function za(t){let e,n;function o(){t=wr;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),o()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),o()})),()=>o()}function Wa(t){return queueMicrotask(()=>t()),()=>{t=wr}}var Ja="isAngularZone",io=Ja+"_ID",Gm=0,_e=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ct(!1);onMicrotaskEmpty=new ct(!1);onStable=new ct(!1);onError=new ct(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:i=rf}=e;if(typeof Zone>"u")throw new O(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&o,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=i,Wm(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ja)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new O(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new O(909,!1)}run(e,n,o){return this._inner.run(e,n,o)}runTask(e,n,o,r){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,qm,wr,wr);try{return i.runTask(s,n,o)}finally{i.cancelTask(s)}}runGuarded(e,n,o){return this._inner.runGuarded(e,n,o)}runOutsideAngular(e){return this._outer.run(e)}},qm={};function Ya(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function zm(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){za(()=>{t.callbackScheduled=!1,pa(t),t.isCheckStableRunning=!0,Ya(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),pa(t)}function Wm(t){let e=()=>{zm(t)},n=Gm++;t._inner=t._inner.fork({name:"angular",properties:{[Ja]:!0,[io]:n,[io+n]:!0},onInvokeTask:(o,r,i,s,l,c)=>{if(Jm(c))return o.invokeTask(i,s,l,c);try{return md(t),o.invokeTask(i,s,l,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),yd(t)}},onInvoke:(o,r,i,s,l,c,d)=>{try{return md(t),o.invoke(i,s,l,c,d)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Ym(c)&&e(),yd(t)}},onHasTask:(o,r,i,s)=>{o.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,pa(t),Ya(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(o,r,i,s)=>(o.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function pa(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function md(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function yd(t){t._nesting--,Ya(t)}var so=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ct;onMicrotaskEmpty=new ct;onStable=new ct;onError=new ct;run(e,n,o){return e.apply(n,o)}runGuarded(e,n,o){return e.apply(n,o)}runOutsideAngular(e){return e()}runTask(e,n,o,r){return e.apply(n,o)}};function Jm(t){return sf(t,"__ignore_ng_zone__")}function Ym(t){return sf(t,"__scheduler_tick__")}function sf(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var ft=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Nt=new V("",{factory:()=>{let t=b(_e),e=b(ge),n;return o=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw o}):(n??=e.get(ft),n.handleError(o))})}}}),af={provide:uo,useValue:()=>{let t=b(ft,{optional:!0})},multi:!0};function ue(t,e){let[n,o,r]=Bs(t,e?.equal),i=n,s=i[Xe];return i.set=o,i.update=r,i.asReadonly=lf.bind(i),i}function lf(){let t=this[Xe];if(t.readonlyFn===void 0){let e=()=>this();e[Xe]=t,t.readonlyFn=e}return t.readonlyFn}var Jr=(()=>{class t{view;node;constructor(n,o){this.view=n,this.node=o}static __NG_ELEMENT_ID__=jm}return t})();function jm(){return new Jr(W(),it())}var Mt=class{},Io=new V("",{factory:()=>!0});var ja=new V(""),Yr=(()=>{class t{internalPendingTasks=b(tn);scheduler=b(Mt);errorHandler=b(Nt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let o=this.add();n().catch(this.errorHandler).finally(o)}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})(),jr=(()=>{class t{static \u0275prov=H({token:t,providedIn:"root",factory:()=>new ha})}return t})(),ha=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,o=this.queues.get(n);o.has(e)&&(o.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let o=this.queues.get(n);o.has(e)||o.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,o]of this.queues)n===null?e||=this.flushQueue(o):e||=n.run(()=>this.flushQueue(o));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let o of e)o.dirty&&(this.dirtyEffectCount--,n=!0,o.run());return n}},Mr=class{[Xe];constructor(e){this[Xe]=e}destroy(){this[Xe].destroy()}};function Ka(t,e){let n=e?.injector??b(wt),o=e?.manualCleanup!==!0?n.get(kn):null,r,i=n.get(Jr,null,{optional:!0}),s=n.get(Mt);return i!==null?(r=Qm(i.view,s,t),o instanceof Sr&&o._lView===i.view&&(o=null)):r=Xm(t,n.get(jr),s),r.injector=n,o!==null&&(r.onDestroyFns=[o.onDestroy(()=>r.destroy())]),new Mr(r)}var uf=pe(ie({},$s),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let t=ro(!1);try{Gs(this)}finally{ro(t)}},cleanup(){if(!this.cleanupFns?.length)return;let t=x(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],x(t)}}}),Km=pe(ie({},uf),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(gn(this),this.onDestroyFns!==null)for(let t of this.onDestroyFns)t();this.cleanup(),this.scheduler.remove(this)}}),Zm=pe(ie({},uf),{consumerMarkedDirty(){this.view[k]|=8192,xn(this.view),this.notifier.notify(13)},destroy(){if(gn(this),this.onDestroyFns!==null)for(let t of this.onDestroyFns)t();this.cleanup(),this.view[_t]?.delete(this)}});function Qm(t,e,n){let o=Object.create(Zm);return o.view=t,o.zone=typeof Zone<"u"?Zone.current:null,o.notifier=e,o.fn=cf(o,n),t[_t]??=new Set,t[_t].add(o),o.consumerMarkedDirty(o),o}function Xm(t,e,n){let o=Object.create(Km);return o.fn=cf(o,t),o.scheduler=e,o.notifier=n,o.zone=typeof Zone<"u"?Zone.current:null,o.scheduler.add(o),o.notifier.notify(12),o}function cf(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}function ci(t){return{toString:t}.toString()}function ly(t){return typeof t=="function"}function Uf(t,e,n,o){e!==null?e.applyValueToInputSignal(e,o):t[n]=o}var ei=class{previousValue;currentValue;firstChange;constructor(e,n,o){this.previousValue=e,this.currentValue=n,this.firstChange=o}isFirstChange(){return this.firstChange}};function uy(t){return t.type.prototype.ngOnChanges&&(t.setInput=dy),cy}function cy(){let t=Hf(this),e=t?.current;if(e){let n=t.previous;if(n===Wt)t.previous=e;else for(let o in e)n[o]=e[o];t.current=null,this.ngOnChanges(e)}}function dy(t,e,n,o,r){let i=this.declaredInputs[o],s=Hf(t)||fy(t,{previous:Wt,current:null}),l=s.current||(s.current={}),c=s.previous,d=c[i];l[i]=new ei(d&&d.currentValue,n,c===Wt),Uf(t,e,r,n)}var Bf="__ngSimpleChanges__";function Hf(t){return t[Bf]||null}function fy(t,e){return t[Bf]=e}var df=[];var Y=function(t,e=null,n){for(let o=0;o<df.length;o++){let r=df[o];r(t,e,n)}},z=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(z||{});function py(t,e,n){let{ngOnChanges:o,ngOnInit:r,ngDoCheck:i}=e.type.prototype;if(o){let s=uy(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),i&&((n.preOrderHooks??=[]).push(t,i),(n.preOrderCheckHooks??=[]).push(t,i))}function $f(t,e){for(let n=e.directiveStart,o=e.directiveEnd;n<o;n++){let i=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:l,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:f}=i;s&&(t.contentHooks??=[]).push(-n,s),l&&((t.contentHooks??=[]).push(n,l),(t.contentCheckHooks??=[]).push(n,l)),c&&(t.viewHooks??=[]).push(-n,c),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function Zr(t,e,n){Gf(t,e,3,n)}function Qr(t,e,n,o){(t[k]&3)===n&&Gf(t,e,n,o)}function Za(t,e){let n=t[k];(n&3)===e&&(n&=16383,n+=1,t[k]=n)}function Gf(t,e,n,o){let r=o!==void 0?t[jt]&65535:0,i=o??-1,s=e.length-1,l=0;for(let c=r;c<s;c++)if(typeof e[c+1]=="number"){if(l=e[c],o!=null&&l>=o)break}else e[c]<0&&(t[jt]+=65536),(l<i||i==-1)&&(hy(t,n,e,c),t[jt]=(t[jt]&4294901760)+c+2),c++}function ff(t,e){Y(z.LifecycleHookStart,t,e);let n=x(null);try{e.call(t)}finally{x(n),Y(z.LifecycleHookEnd,t,e)}}function hy(t,e,n,o){let r=n[o]<0,i=n[o+1],s=r?-n[o]:n[o],l=t[s];r?t[k]>>14<t[jt]>>16&&(t[k]&3)===e&&(t[k]+=16384,ff(l,i)):ff(l,i)}var Ln=-1,Do=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,o,r){this.factory=e,this.name=r,this.canSeeViewProviders=n,this.injectImpl=o}};function gy(t){return(t.flags&8)!==0}function my(t){return(t.flags&16)!==0}function yy(t,e,n){let o=0;for(;o<n.length;){let r=n[o];if(typeof r=="number"){if(r!==0)break;o++;let i=n[o++],s=n[o++],l=n[o++];t.setAttribute(e,s,l,i)}else{let i=r,s=n[++o];Ey(i)?t.setProperty(e,i,s):t.setAttribute(e,i,s),o++}}return o}function vy(t){return t===3||t===4||t===6}function Ey(t){return t.charCodeAt(0)===64}function wl(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let o=0;o<e.length;o++){let r=e[o];typeof r=="number"?n=r:n===0||(n===-1||n===2?pf(t,n,r,null,e[++o]):pf(t,n,r,null,null))}}return t}function pf(t,e,n,o,r){let i=0,s=t.length;if(e===-1)s=-1;else for(;i<t.length;){let l=t[i++];if(typeof l=="number"){if(l===e){s=-1;break}else if(l>e){s=i-1;break}}}for(;i<t.length;){let l=t[i];if(typeof l=="number")break;if(l===n){r!==null&&(t[i+1]=r);return}i++,r!==null&&i++}s!==-1&&(t.splice(s,0,e),i=s+1),t.splice(i++,0,n),r!==null&&t.splice(i++,0,r)}function qf(t){return t!==Ln}function ti(t){return t&32767}function Iy(t){return t>>16}function ni(t,e){let n=Iy(t),o=e;for(;n>0;)o=o[Jt],n--;return o}var il=!0;function hf(t){let e=il;return il=t,e}var Cy=256,zf=Cy-1,Wf=5,Ty=0,st={};function Dy(t,e,n){let o;typeof n=="string"?o=n.charCodeAt(0)||0:n.hasOwnProperty(Gt)&&(o=n[Gt]),o==null&&(o=n[Gt]=Ty++);let r=o&zf,i=1<<r;e.data[t+(r>>Wf)]|=i}function Jf(t,e){let n=Yf(t,e);if(n!==-1)return n;let o=e[F];o.firstCreatePass&&(t.injectorIndex=e.length,Qa(o.data,t),Qa(e,null),Qa(o.blueprint,null));let r=Ml(t,e),i=t.injectorIndex;if(qf(r)){let s=ti(r),l=ni(r,e),c=l[F].data;for(let d=0;d<8;d++)e[i+d]=l[s+d]|c[s+d]}return e[i+8]=r,i}function Qa(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Yf(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Ml(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,o=null,r=e;for(;r!==null;){if(o=Xf(r),o===null)return Ln;if(n++,r=r[Jt],o.injectorIndex!==-1)return o.injectorIndex|n<<16}return Ln}function _y(t,e,n){Dy(t,e,n)}function jf(t,e,n){if(n&8||t!==void 0)return t;Pr(e,"NodeInjector")}function Kf(t,e,n,o){if(n&8&&o===void 0&&(o=null),(n&3)===0){let r=t[pt],i=Te(void 0);try{return r?r.get(e,o,n&8):Ta(e,o,n&8)}finally{Te(i)}}return jf(o,e,n)}function Zf(t,e,n,o=0,r){if(t!==null){if(e[k]&2048&&!(o&2)){let s=by(t,e,n,o,st);if(s!==st)return s}let i=Qf(t,e,n,o,st);if(i!==st)return i}return Kf(e,n,o,r)}function Qf(t,e,n,o,r){let i=My(n);if(typeof i=="function"){if(!$a(e,t,o))return o&1?jf(r,n,o):Kf(e,n,o,r);try{let s;if(s=i(o),s==null&&!(o&8))Pr(n);else return s}finally{Ga()}}else if(typeof i=="number"){let s=null,l=Yf(t,e),c=Ln,d=o&1?e[Re][xe]:null;for((l===-1||o&4)&&(c=l===-1?Ml(t,e):e[l+8],c===Ln||!mf(o,!1)?l=-1:(s=e[F],l=ti(c),e=ni(c,e)));l!==-1;){let f=e[F];if(gf(i,l,f.data)){let p=Sy(l,e,n,s,o,d);if(p!==st)return p}c=e[l+8],c!==Ln&&mf(o,e[F].data[l+8]===d)&&gf(i,l,e)?(s=f,l=ti(c),e=ni(c,e)):l=-1}}return r}function Sy(t,e,n,o,r,i){let s=e[F],l=s.data[t+8],c=o==null?Qt(l)&&il:o!=s&&(l.type&3)!==0,d=r&1&&i===l,f=wy(l,s,n,c,d);return f!==null?sl(e,s,f,l,r):st}function wy(t,e,n,o,r){let i=t.providerIndexes,s=e.data,l=i&1048575,c=t.directiveStart,d=t.directiveEnd,f=i>>20,p=o?l:l+f,h=r?l+f:d;for(let g=p;g<h;g++){let m=s[g];if(g<c&&n===m||g>=c&&m.type===n)return g}if(r){let g=s[c];if(g&&Xt(g)&&g.type===n)return c}return null}function sl(t,e,n,o,r){let i=t[n],s=e.data;if(i instanceof Do){let l=i;if(l.resolving){let g=Id(s[n]);throw Ca(g)}let c=hf(l.canSeeViewProviders);l.resolving=!0;let d=s[n].type||s[n],f,p=l.injectImpl?Te(l.injectImpl):null,h=$a(t,o,0);try{i=t[n]=l.factory(void 0,r,s,t,o),e.firstCreatePass&&n>=o.directiveStart&&py(n,s[n],e)}finally{p!==null&&Te(p),hf(c),l.resolving=!1,Ga()}}return i}function My(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Gt)?t[Gt]:void 0;return typeof e=="number"?e>=0?e&zf:Ay:e}function gf(t,e,n){let o=1<<t;return!!(n[e+(t>>Wf)]&o)}function mf(t,e){return!(t&2)&&!(t&1&&e)}var nn=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,o){return Zf(this._tNode,this._lView,e,Ht(o),n)}};function Ay(){return new nn(it(),W())}function by(t,e,n,o,r){let i=t,s=e;for(;i!==null&&s!==null&&s[k]&2048&&!Nn(s);){let l=Qf(i,s,n,o|2,st);if(l!==st)return l;let c=i.parent;if(!c){let d=s[ba];if(d){let f=d.get(n,st,o);if(f!==st)return f}c=Xf(s),s=s[Jt]}i=c}return r}function Xf(t){let e=t[F],n=e.type;return n===2?e.declTNode:n===1?t[xe]:null}function Ny(){return di(it(),W())}function di(t,e){return new Al(He(t,e))}var Al=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Ny}return t})();function ep(t){return(t.flags&128)===128}var bl=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(bl||{}),tp=new Map,xy=0;function Ry(){return xy++}function Py(t){tp.set(t[ho],t)}function al(t){tp.delete(t[ho])}var yf="__ngContext__";function On(t,e){ht(e)?(t[yf]=e[ho],Py(e)):t[yf]=e}function np(t){return rp(t[bn])}function op(t){return rp(t[Ne])}function rp(t){for(;t!==null&&!Be(t);)t=t[Ne];return t}var ky;function Nl(t){ky=t}var fi=new V("",{factory:()=>Fy}),Fy="ng";var pi=new V(""),xo=new V("",{providedIn:"platform",factory:()=>"unknown"});var hi=new V("",{factory:()=>b(me).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ip="r";var sp="di";var ap=!1,lp=new V("",{factory:()=>ap});var Ly=(t,e,n,o)=>{};function Oy(t,e,n,o){Ly(t,e,n,o)}function xl(t){return(t.flags&32)===32}var Vy=()=>null;function up(t,e,n=!1){return Vy(t,e,n)}function cp(t,e){let n=t.contentQueries;if(n!==null){let o=x(null);try{for(let r=0;r<n.length;r+=2){let i=n[r],s=n[r+1];if(s!==-1){let l=t.data[s];Ha(i),l.contentQueries(2,e[s],s)}}}finally{x(o)}}}function ll(t,e,n){Ha(0);let o=x(null);try{e(t,n)}finally{x(o)}}function dp(t,e,n){if(xa(e)){let o=x(null);try{let r=e.directiveStart,i=e.directiveEnd;for(let s=r;s<i;s++){let l=t.data[s];if(l.contentQueries){let c=n[s];l.contentQueries(1,c,s)}}}finally{x(o)}}}var ze=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(ze||{});var oi=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ar})`}};function gi(t){return t instanceof oi?t.changingThisBreaksApplicationSecurity:t}function fp(t,e){let n=pp(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Ar})`)}return n===e}function pp(t){return t instanceof oi&&t.getTypeName()||null}var Uy=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function hp(t){return t=String(t),t.match(Uy)?t:"unsafe:"+t}function By(t,e){return t.createText(e)}function Hy(t,e,n){t.setValue(e,n)}function gp(t,e,n){return t.createElement(e,n)}function ri(t,e,n,o,r){t.insertBefore(e,n,o,r)}function mp(t,e,n){t.appendChild(e,n)}function vf(t,e,n,o,r){o!==null?ri(t,e,n,o,r):mp(t,e,n)}function yp(t,e,n,o){t.removeChild(null,e,n,o)}function $y(t,e,n){t.setAttribute(e,"style",n)}function Gy(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function vp(t,e,n){let{mergedAttrs:o,classes:r,styles:i}=n;o!==null&&yy(t,e,o),r!==null&&Gy(t,e,r),i!==null&&$y(t,e,i)}var Rl=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Rl||{});function Pl(t){let e=qy();return e?e.sanitize(Rl.URL,t)||"":fp(t,"URL")?gi(t):hp(zt(t))}function qy(){let t=W();return t&&t[nt].sanitizer}function zy(t,e,n){let o=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let i=e.length;if(r+i===o||t.charCodeAt(r+i)<=32)return r}n=r+1}}var Ep="ng-template";function Wy(t,e,n,o){let r=0;if(o){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&zy(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(kl(t))return!1;if(r=e.indexOf(1,r),r>-1){let i;for(;++r<e.length&&typeof(i=e[r])=="string";)if(i.toLowerCase()===n)return!0}return!1}function kl(t){return t.type===4&&t.value!==Ep}function Jy(t,e,n){let o=t.type===4&&!n?Ep:t.value;return e===o}function Yy(t,e,n){let o=4,r=t.attrs,i=r!==null?Zy(r):0,s=!1;for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="number"){if(!s&&!Ge(o)&&!Ge(c))return!1;if(s&&Ge(c))continue;s=!1,o=c|o&1;continue}if(!s)if(o&4){if(o=2|o&1,c!==""&&!Jy(t,c,n)||c===""&&e.length===1){if(Ge(o))return!1;s=!0}}else if(o&8){if(r===null||!Wy(t,r,c,n)){if(Ge(o))return!1;s=!0}}else{let d=e[++l],f=jy(c,r,kl(t),n);if(f===-1){if(Ge(o))return!1;s=!0;continue}if(d!==""){let p;if(f>i?p="":p=r[f+1].toLowerCase(),o&2&&d!==p){if(Ge(o))return!1;s=!0}}}}return Ge(o)||s}function Ge(t){return(t&1)===0}function jy(t,e,n,o){if(e===null)return-1;let r=0;if(o||!n){let i=!1;for(;r<e.length;){let s=e[r];if(s===t)return r;if(s===3||s===6)i=!0;else if(s===1||s===2){let l=e[++r];for(;typeof l=="string";)l=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=i?1:2}return-1}else return Qy(e,t)}function Ky(t,e,n=!1){for(let o=0;o<e.length;o++)if(Yy(t,e[o],n))return!0;return!1}function Zy(t){for(let e=0;e<t.length;e++){let n=t[e];if(vy(n))return e}return t.length}function Qy(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let o=t[n];if(typeof o=="number")return-1;if(o===e)return n;n++}return-1}function Ef(t,e){return t?":not("+e.trim()+")":e}function Xy(t){let e=t[0],n=1,o=2,r="",i=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(o&2){let l=t[++n];r+="["+s+(l.length>0?'="'+l+'"':"")+"]"}else o&8?r+="."+s:o&4&&(r+=" "+s);else r!==""&&!Ge(s)&&(e+=Ef(i,r),r=""),o=s,i=i||!Ge(o);n++}return r!==""&&(e+=Ef(i,r)),e}function ev(t){return t.map(Xy).join(",")}function tv(t){let e=[],n=[],o=1,r=2;for(;o<t.length;){let i=t[o];if(typeof i=="string")r===2?i!==""&&e.push(i,t[++o]):r===8&&n.push(i);else{if(!Ge(r))break;r=i}o++}return n.length&&e.push(1,...n),e}var Fe={};function Fl(t,e,n,o,r,i,s,l,c,d,f){let p=ce+o,h=p+r,g=nv(p,h),m=typeof d=="function"?d():d;return g[F]={type:t,blueprint:g,template:n,queries:null,viewQuery:l,declTNode:e,data:g.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:f}}function nv(t,e){let n=[];for(let o=0;o<e;o++)n.push(o<t?null:Fe);return n}function ov(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Fl(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Ll(t,e,n,o,r,i,s,l,c,d,f){let p=e.blueprint.slice();return p[Ue]=r,p[k]=o|4|128|8|64|1024,(d!==null||t&&t[k]&2048)&&(p[k]|=2048),ka(p),p[le]=p[Jt]=t,p[ee]=n,p[nt]=s||t&&t[nt],p[te]=l||t&&t[te],p[pt]=c||t&&t[pt]||null,p[xe]=i,p[ho]=Ry(),p[Mn]=f,p[ba]=d,p[Re]=e.type==2?t[Re]:p,p}function rv(t,e,n){let o=He(e,t),r=ov(n),i=t[nt].rendererFactory,s=Ol(t,Ll(t,r,null,Ip(n),o,e,null,i.createRenderer(o,n),null,null,null));return t[e.index]=s}function Ip(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Cp(t,e,n,o){if(n===0)return-1;let r=e.length;for(let i=0;i<n;i++)e.push(o),t.blueprint.push(o),t.data.push(null);return r}function Ol(t,e){return t[bn]?t[Aa][Ne]=e:t[bn]=e,t[Aa]=e,e}function A(t=1){Tp(we(),W(),yt()+t,!1)}function Tp(t,e,n,o){if(!o)if((e[k]&3)===3){let i=t.preOrderCheckHooks;i!==null&&Zr(e,i,n)}else{let i=t.preOrderHooks;i!==null&&Qr(e,i,0,n)}bt(n)}var mi=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(mi||{});function ul(t,e,n,o){let r=x(null);try{let[i,s,l]=t.inputs[n],c=null;(s&mi.SignalBased)!==0&&(c=e[i][Xe]),c!==null&&c.transformFn!==void 0?o=c.transformFn(o):l!==null&&(o=l.call(e,o)),t.setInput!==null?t.setInput(e,c,o,n,i):Uf(e,c,i,o)}finally{x(r)}}var at=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(at||{}),iv;function Vl(t,e){return iv(t,e)}var on=new Set,Ul=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Ul||{}),an=new V(""),If=new Set;function ln(t){If.has(t)||(If.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Dp=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})();var _p=new V("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:b(ge)})});function Sp(t,e,n){let o=t.get(_p);if(Array.isArray(e))for(let r of e)o.queue.add(r),n?.detachedLeaveAnimationFns?.push(r);else o.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);o.scheduler&&o.scheduler(t)}function sv(t,e){let n=t.get(_p);if(e.detachedLeaveAnimationFns){for(let o of e.detachedLeaveAnimationFns)n.queue.delete(o);e.detachedLeaveAnimationFns=void 0}}function av(t,e){for(let[n,o]of e)Sp(t,o.animateFns)}function Cf(t,e,n,o){let r=t?.[Zt]?.enter;e!==null&&r&&r.has(n.index)&&av(o,r)}function Fn(t,e,n,o,r,i,s,l){if(r!=null){let c,d=!1;Be(r)?c=r:ht(r)&&(d=!0,r=r[Ue]);let f=Pe(r);t===0&&o!==null?(Cf(l,o,i,n),s==null?mp(e,o,f):ri(e,o,f,s||null,!0)):t===1&&o!==null?(Cf(l,o,i,n),ri(e,o,f,s||null,!0)):t===2?Tf(l,i,n,p=>{yp(e,f,d,p)}):t===3&&Tf(l,i,n,()=>{e.destroyNode(f)}),c!=null&&Iv(e,t,n,c,i,o,s)}}function lv(t,e){wp(t,e),e[Ue]=null,e[xe]=null}function uv(t,e,n,o,r,i){o[Ue]=r,o[xe]=e,vi(t,o,n,1,r,i)}function wp(t,e){e[nt].changeDetectionScheduler?.notify(9),vi(t,e,e[te],2,null,null)}function cv(t){let e=t[bn];if(!e)return Xa(t[F],t);for(;e;){let n=null;if(ht(e))n=e[bn];else{let o=e[ne];o&&(n=o)}if(!n){for(;e&&!e[Ne]&&e!==t;)ht(e)&&Xa(e[F],e),e=e[le];e===null&&(e=t),ht(e)&&Xa(e[F],e),n=e&&e[Ne]}e=n}}function Bl(t,e){let n=t[mo],o=n.indexOf(e);n.splice(o,1)}function yi(t,e){if(en(e))return;let n=e[te];n.destroyNode&&vi(t,e,n,3,null,null),cv(e)}function Xa(t,e){if(en(e))return;let n=x(null);try{e[k]&=-129,e[k]|=256,e[Se]&&gn(e[Se]),pv(t,e),fv(t,e),e[F].type===1&&e[te].destroy();let o=e[Yt];if(o!==null&&Be(e[le])){o!==e[le]&&Bl(o,e);let r=e[Kt];r!==null&&r.detachView(t)}al(e)}finally{x(n)}}function Tf(t,e,n,o){let r=t?.[Zt];if(r==null||r.leave==null||!r.leave.has(e.index))return o(!1);t&&on.add(t),Sp(n,()=>{if(r.leave&&r.leave.has(e.index)){let s=r.leave.get(e.index),l=[];if(s){for(let c=0;c<s.animateFns.length;c++){let d=s.animateFns[c],{promise:f}=d();l.push(f)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(l),dv(t,o)}else t&&on.delete(t),o(!1)},r)}function dv(t,e){let n=t[Zt]?.running;if(n){n.then(()=>{t[Zt].running=void 0,on.delete(t),e(!0)});return}e(!1)}function fv(t,e){let n=t.cleanup,o=e[An];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let l=n[s+3];l>=0?o[l]():o[-l].unsubscribe(),s+=2}else{let l=o[n[s+1]];n[s].call(l)}o!==null&&(e[An]=null);let r=e[dt];if(r!==null){e[dt]=null;for(let s=0;s<r.length;s++){let l=r[s];l()}}let i=e[_t];if(i!==null){e[_t]=null;for(let s of i)s.destroy()}}function pv(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let o=0;o<n.length;o+=2){let r=e[n[o]];if(!(r instanceof Do)){let i=n[o+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let l=r[i[s]],c=i[s+1];Y(z.LifecycleHookStart,l,c);try{c.call(l)}finally{Y(z.LifecycleHookEnd,l,c)}}else{Y(z.LifecycleHookStart,r,i);try{i.call(r)}finally{Y(z.LifecycleHookEnd,r,i)}}}}}function hv(t,e,n){return gv(t,e.parent,n)}function gv(t,e,n){let o=e;for(;o!==null&&o.type&168;)e=o,o=e.parent;if(o===null)return n[Ue];if(Qt(o)){let{encapsulation:r}=t.data[o.directiveStart+o.componentOffset];if(r===ze.None||r===ze.Emulated)return null}return He(o,n)}function mv(t,e,n){return vv(t,e,n)}function yv(t,e,n){return t.type&40?He(t,n):null}var vv=yv,Df;function Hl(t,e,n,o){let r=hv(t,o,e),i=e[te],s=o.parent||e[xe],l=mv(s,o,e);if(r!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)vf(i,r,n[c],l,!1);else vf(i,r,n,l,!1);Df!==void 0&&Df(i,o,e,n,r)}function Co(t,e){if(e!==null){let n=e.type;if(n&3)return He(e,t);if(n&4)return cl(-1,t[e.index]);if(n&8){let o=e.child;if(o!==null)return Co(t,o);{let r=t[e.index];return Be(r)?cl(-1,r):Pe(r)}}else{if(n&128)return Co(t,e.next);if(n&32)return Vl(e,t)()||Pe(t[e.index]);{let o=Mp(t,e);if(o!==null){if(Array.isArray(o))return o[0];let r=St(t[Re]);return Co(r,o)}else return Co(t,e.next)}}}return null}function Mp(t,e){if(e!==null){let o=t[Re][xe],r=e.projection;return o.projection[r]}return null}function cl(t,e){let n=ne+t+1;if(n<e.length){let o=e[n],r=o[F].firstChild;if(r!==null)return Co(o,r)}return e[At]}function $l(t,e,n,o,r,i,s){for(;n!=null;){let l=o[pt];if(n.type===128){n=n.next;continue}let c=o[n.index],d=n.type;if(s&&e===0&&(c&&On(Pe(c),o),n.flags|=2),!xl(n))if(d&8)$l(t,e,n.child,o,r,i,!1),Fn(e,t,l,r,c,n,i,o);else if(d&32){let f=Vl(n,o),p;for(;p=f();)Fn(e,t,l,r,p,n,i,o);Fn(e,t,l,r,c,n,i,o)}else d&16?Ev(t,e,o,n,r,i):Fn(e,t,l,r,c,n,i,o);n=s?n.projectionNext:n.next}}function vi(t,e,n,o,r,i){$l(n,o,t.firstChild,e,r,i,!1)}function Ev(t,e,n,o,r,i){let s=n[Re],c=s[xe].projection[o.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let f=c[d];Fn(e,t,n[pt],r,f,o,i,n)}else{let d=c,f=s[le];ep(o)&&(d.flags|=128),$l(t,e,d,f,r,i,!0)}}function Iv(t,e,n,o,r,i,s){let l=o[At],c=Pe(o);l!==c&&Fn(e,t,n,i,l,r,s);for(let d=ne;d<o.length;d++){let f=o[d];vi(f[F],f,t,e,i,l)}}function Cv(t,e,n,o,r){if(e)r?t.addClass(n,o):t.removeClass(n,o);else{let i=o.indexOf("-")===-1?void 0:at.DashCase;r==null?t.removeStyle(n,o,i):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),i|=at.Important),t.setStyle(n,o,r,i))}}function Ap(t,e,n,o,r){let i=yt(),s=o&2;try{bt(-1),s&&e.length>ce&&Tp(t,e,ce,!1);let l=s?z.TemplateUpdateStart:z.TemplateCreateStart;Y(l,r,n),n(o,r)}finally{bt(i);let l=s?z.TemplateUpdateEnd:z.TemplateCreateEnd;Y(l,r,n)}}function Gl(t,e,n){bv(t,e,n),(n.flags&64)===64&&Nv(t,e,n)}function ql(t,e,n=He){let o=e.localNames;if(o!==null){let r=e.index+1;for(let i=0;i<o.length;i+=2){let s=o[i+1],l=s===-1?n(e,t):t[s];t[r++]=l}}}function Tv(t,e,n,o){let i=o.get(lp,ap)||n===ze.ShadowDom||n===ze.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,i);return Dv(s),s}function Dv(t){_v(t)}var _v=()=>null;function Sv(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function wv(t,e,n,o,r,i){let s=e[F];if(zl(t,s,e,n,o)){Qt(t)&&Av(e,t.index);return}t.type&3&&(n=Sv(n)),Mv(t,e,n,o,r,i)}function Mv(t,e,n,o,r,i){if(t.type&3){let s=He(t,e);o=i!=null?i(o,t.value||"",n):o,r.setProperty(s,n,o)}else t.type&12}function Av(t,e){let n=ot(e,t);n[k]&16||(n[k]|=64)}function bv(t,e,n){let o=n.directiveStart,r=n.directiveEnd;Qt(n)&&rv(e,n,t.data[o+n.componentOffset]),t.firstCreatePass||Jf(n,e);let i=n.initialInputs;for(let s=o;s<r;s++){let l=t.data[s],c=sl(e,t,s,n);if(On(c,e),i!==null&&kv(e,s-o,c,l,n,i),Xt(l)){let d=ot(n.index,e);d[ee]=sl(e,t,s,n)}}}function Nv(t,e,n){let o=n.directiveStart,r=n.directiveEnd,i=n.index,s=jd();try{bt(i);for(let l=o;l<r;l++){let c=t.data[l],d=e[l];$r(l),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&xv(c,d)}}finally{bt(-1),$r(s)}}function xv(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function bp(t,e){let n=t.directiveRegistry,o=null;if(n)for(let r=0;r<n.length;r++){let i=n[r];Ky(e,i.selectors,!1)&&(o??=[],Xt(i)?o.unshift(i):o.push(i))}return o}function Rv(t,e,n,o,r,i){let s=He(t,e);Pv(e[te],s,i,t.value,n,o,r)}function Pv(t,e,n,o,r,i,s){if(i==null)t.removeAttribute(e,r,n);else{let l=s==null?zt(i):s(i,o||"",r);t.setAttribute(e,r,l,n)}}function kv(t,e,n,o,r,i){let s=i[e];if(s!==null)for(let l=0;l<s.length;l+=2){let c=s[l],d=s[l+1];ul(o,n,c,d)}}function Fv(t,e,n,o,r){let i=ce+n,s=e[F],l=r(s,e,t,o,n);e[i]=l,Rn(t,!0);let c=t.type===2;return c?(vp(e[te],l,t),(Od()===0||yo(t))&&On(l,e),Vd()):On(l,e),zr()&&(!c||!xl(t))&&Hl(s,e,l,t),t}function Lv(t){let e=t;return Ua()?qd():(e=e.parent,Rn(e,!1)),e}function Ov(t,e){let n=t[pt];if(!n)return;let o;try{o=n.get(Nt,null)}catch{o=null}o?.(e)}function zl(t,e,n,o,r){let i=t.inputs?.[o],s=t.hostDirectiveInputs?.[o],l=!1;if(s)for(let c=0;c<s.length;c+=2){let d=s[c],f=s[c+1],p=e.data[d];ul(p,n[d],f,r),l=!0}if(i)for(let c of i){let d=n[c],f=e.data[c];ul(f,d,o,r),l=!0}return l}function Vv(t,e){let n=ot(e,t),o=n[F];Uv(o,n);let r=n[Ue];r!==null&&n[Mn]===null&&(n[Mn]=up(r,n[pt])),Y(z.ComponentStart);try{Wl(o,n,n[ee])}finally{Y(z.ComponentEnd,n[ee])}}function Uv(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Wl(t,e,n){Gr(e);try{let o=t.viewQuery;o!==null&&ll(1,o,n);let r=t.template;r!==null&&Ap(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Kt]?.finishViewCreation(t),t.staticContentQueries&&cp(t,e),t.staticViewQueries&&ll(2,t.viewQuery,n);let i=t.components;i!==null&&Bv(e,i)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{e[k]&=-5,qr()}}function Bv(t,e){for(let n=0;n<e.length;n++)Vv(t,e[n])}function Ei(t,e,n,o){let r=x(null);try{let i=e.tView,l=t[k]&4096?4096:16,c=Ll(t,i,n,l,null,e,null,null,o?.injector??null,o?.embeddedViewInjector??null,o?.dehydratedView??null),d=t[e.index];c[Yt]=d;let f=t[Kt];return f!==null&&(c[Kt]=f.createEmbeddedView(i)),Wl(i,c,n),c}finally{x(r)}}function _o(t,e){return!e||e.firstChild===null||ep(t)}function So(t,e,n,o,r=!1){for(;n!==null;){if(n.type===128){n=r?n.projectionNext:n.next;continue}let i=e[n.index];i!==null&&o.push(Pe(i)),Be(i)&&Np(i,o);let s=n.type;if(s&8)So(t,e,n.child,o);else if(s&32){let l=Vl(n,e),c;for(;c=l();)o.push(c)}else if(s&16){let l=Mp(e,n);if(Array.isArray(l))o.push(...l);else{let c=St(e[Re]);So(c[F],c,l,o,!0)}}n=r?n.projectionNext:n.next}return o}function Np(t,e){for(let n=ne;n<t.length;n++){let o=t[n],r=o[F].firstChild;r!==null&&So(o[F],o,r,e)}t[At]!==t[Ue]&&e.push(t[At])}function xp(t){if(t[Vr]!==null){for(let e of t[Vr])e.impl.addSequence(e);t[Vr].length=0}}var Rp=[];function Hv(t){return t[Se]??$v(t)}function $v(t){let e=Rp.pop()??Object.create(qv);return e.lView=t,e}function Gv(t){t.lView[Se]!==t&&(t.lView=null,Rp.push(t))}var qv=pe(ie({},Xn),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{xn(t.lView)},consumerOnSignalRead(){this.lView[Se]=this}});function zv(t){let e=t[Se]??Object.create(Wv);return e.lView=t,e}var Wv=pe(ie({},Xn),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=St(t.lView);for(;e&&!Pp(e[F]);)e=St(e);e&&Fa(e)},consumerOnSignalRead(){this.lView[Se]=this}});function Pp(t){return t.type!==2}function kp(t){if(t[_t]===null)return;let e=!0;for(;e;){let n=!1;for(let o of t[_t])o.dirty&&(n=!0,o.zone===null||Zone.current===o.zone?o.run():o.zone.run(()=>o.run()));e=n&&!!(t[k]&8192)}}var Jv=100;function Fp(t,e=0){let o=t[nt].rendererFactory,r=!1;r||o.begin?.();try{Yv(t,e)}finally{r||o.end?.()}}function Yv(t,e){let n=Ba();try{ro(!0),dl(t,e);let o=0;for(;Eo(t);){if(o===Jv)throw new O(103,!1);o++,dl(t,1)}}finally{ro(n)}}function jv(t,e,n,o){if(en(e))return;let r=e[k],i=!1,s=!1;Gr(e);let l=!0,c=null,d=null;i||(Pp(t)?(d=Hv(e),c=Qo(d)):Zo()===null?(l=!1,d=zv(e),c=Qo(d)):e[Se]&&(gn(e[Se]),e[Se]=null));try{ka(e),Wd(t.bindingStartIndex),n!==null&&Ap(t,e,n,2,o);let f=(r&3)===3;if(!i)if(f){let g=t.preOrderCheckHooks;g!==null&&Zr(e,g,null)}else{let g=t.preOrderHooks;g!==null&&Qr(e,g,0,null),Za(e,0)}if(s||Kv(e),kp(e),Lp(e,0),t.contentQueries!==null&&cp(t,e),!i)if(f){let g=t.contentCheckHooks;g!==null&&Zr(e,g)}else{let g=t.contentHooks;g!==null&&Qr(e,g,1),Za(e,1)}Qv(t,e);let p=t.components;p!==null&&Vp(e,p,0);let h=t.viewQuery;if(h!==null&&ll(2,h,o),!i)if(f){let g=t.viewCheckHooks;g!==null&&Zr(e,g)}else{let g=t.viewHooks;g!==null&&Qr(e,g,2),Za(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Or]){for(let g of e[Or])g();e[Or]=null}i||(xp(e),e[k]&=-73)}catch(f){throw i||xn(e),f}finally{d!==null&&(Os(d,c),l&&Gv(d)),qr()}}function Lp(t,e){for(let n=np(t);n!==null;n=op(n))for(let o=ne;o<n.length;o++){let r=n[o];Op(r,e)}}function Kv(t){for(let e=np(t);e!==null;e=op(e)){if(!(e[k]&2))continue;let n=e[mo];for(let o=0;o<n.length;o++){let r=n[o];Fa(r)}}}function Zv(t,e,n){Y(z.ComponentStart);let o=ot(e,t);try{Op(o,n)}finally{Y(z.ComponentEnd,o[ee])}}function Op(t,e){Ur(t)&&dl(t,e)}function dl(t,e){let o=t[F],r=t[k],i=t[Se],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(i?.dirty&&Xo(i)),s||=!1,i&&(i.dirty=!1),t[k]&=-9217,s)jv(o,t,o.template,t[ee]);else if(r&8192){let l=x(null);try{kp(t),Lp(t,1);let c=o.components;c!==null&&Vp(t,c,1),xp(t)}finally{x(l)}}}function Vp(t,e,n){for(let o=0;o<e.length;o++)Zv(t,e[o],n)}function Qv(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let o=0;o<n.length;o++){let r=n[o];if(r<0)bt(~r);else{let i=r,s=n[++o],l=n[++o];Yd(s,i);let c=e[i];Y(z.HostBindingsUpdateStart,c);try{l(2,c)}finally{Y(z.HostBindingsUpdateEnd,c)}}}}finally{bt(-1)}}function Jl(t,e){let n=Ba()?64:1088;for(t[nt].changeDetectionScheduler?.notify(e);t;){t[k]|=n;let o=St(t);if(Nn(t)&&!o)return t;t=o}return null}function Up(t,e,n,o){return[t,!0,0,e,null,o,null,n,null,null]}function Bp(t,e){let n=ne+e;if(n<t.length)return t[n]}function Ii(t,e,n,o=!0){let r=e[F];if(Xv(r,e,t,n),o){let s=cl(n,t),l=e[te],c=l.parentNode(t[At]);c!==null&&uv(r,t[xe],l,e,c,s)}let i=e[Mn];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function Hp(t,e){let n=wo(t,e);return n!==void 0&&yi(n[F],n),n}function wo(t,e){if(t.length<=ne)return;let n=ne+e,o=t[n];if(o){let r=o[Yt];r!==null&&r!==t&&Bl(r,o),e>0&&(t[n-1][Ne]=o[Ne]);let i=lo(t,ne+e);lv(o[F],o);let s=i[Kt];s!==null&&s.detachView(i[F]),o[le]=null,o[Ne]=null,o[k]&=-129}return o}function Xv(t,e,n,o){let r=ne+o,i=n.length;o>0&&(n[r-1][Ne]=e),o<i-ne?(e[Ne]=n[r],Da(n,ne+o,e)):(n.push(e),e[Ne]=null),e[le]=n;let s=e[Yt];s!==null&&n!==s&&$p(s,e);let l=e[Kt];l!==null&&l.insertView(t),Br(e),e[k]|=128}function $p(t,e){let n=t[mo],o=e[le];if(ht(o))t[k]|=2;else{let r=o[le][Re];e[Re]!==r&&(t[k]|=2)}n===null?t[mo]=[e]:n.push(e)}var Vn=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[F];return So(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[ee]}set context(e){this._lView[ee]=e}get destroyed(){return en(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[le];if(Be(e)){let n=e[go],o=n?n.indexOf(this):-1;o>-1&&(wo(e,o),lo(n,o))}this._attachedToViewContainer=!1}yi(this._lView[F],this._lView)}onDestroy(e){La(this._lView,e)}markForCheck(){Jl(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[k]&=-129}reattach(){Br(this._lView),this._lView[k]|=128}detectChanges(){this._lView[k]|=1024,Fp(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new O(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Nn(this._lView),n=this._lView[Yt];n!==null&&!e&&Bl(n,this._lView),wp(this._lView[F],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new O(902,!1);this._appRef=e;let n=Nn(this._lView),o=this._lView[Yt];o!==null&&!n&&$p(o,this._lView),Br(this._lView)}};var Ci=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=eE;constructor(n,o,r){this._declarationLView=n,this._declarationTContainer=o,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,o){return this.createEmbeddedViewImpl(n,o)}createEmbeddedViewImpl(n,o,r){let i=Ei(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:o,dehydratedView:r});return new Vn(i)}}return t})();function eE(){return tE(it(),W())}function tE(t,e){return t.type&4?new Ci(e,t,di(t,e)):null}function Ti(t,e,n,o,r){let i=t.data[e];if(i===null)i=nE(t,e,n,o,r),Jd()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=o,i.attrs=r;let s=Gd();i.injectorIndex=s===null?-1:s.injectorIndex}return Rn(i,!0),i}function nE(t,e,n,o,r){let i=Va(),s=Ua(),l=s?i:i&&i.parent,c=t.data[e]=rE(t,l,n,e,o,r);return oE(t,c,i,s),c}function oE(t,e,n,o){t.firstChild===null&&(t.firstChild=e),n!==null&&(o?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function rE(t,e,n,o,r,i){let s=e?e.injectorIndex:-1,l=0;return Bd()&&(l|=128),{type:n,index:o,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:l,providerIndexes:0,value:r,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function iE(t){let e=t[Na]??[],o=t[le][te],r=[];for(let i of e)i.data[sp]!==void 0?r.push(i):sE(i,o);t[Na]=r}function sE(t,e){let n=0,o=t.firstChild;if(o){let r=t.data[ip];for(;n<r;){let i=o.nextSibling;yp(e,o,!1),o=i,n++}}}var aE=()=>null,lE=()=>null;function fl(t,e){return aE(t,e)}function Gp(t,e,n){return lE(t,e,n)}var qp=class{},Di=class{},pl=class{resolveComponentFactory(e){throw new O(917,!1)}},_i=class{static NULL=new pl},rn=class{};var zp=(()=>{class t{static \u0275prov=H({token:t,providedIn:"root",factory:()=>null})}return t})();var Xr={},hl=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,o){let r=this.injector.get(e,Xr,o);return r!==Xr||n===Xr?r:this.parentInjector.get(e,n,o)}};function _f(t,e,n){let o=n?t.styles:null,r=n?t.classes:null,i=0;if(e!==null)for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number")i=l;else if(i==1)r=br(r,l);else if(i==2){let c=l,d=e[++s];o=br(o,c+": "+d+";")}}n?t.styles=o:t.stylesWithoutHost=o,n?t.classes=r:t.classesWithoutHost=r}function Ro(t,e=0){let n=W();if(n===null)return B(t,e);let o=it();return Zf(o,n,De(t),e)}function Wp(t,e,n,o,r){let i=o===null?null:{"":-1},s=r(t,n);if(s!==null){let l=s,c=null,d=null;for(let f of s)if(f.resolveHostDirectives!==null){[l,c,d]=f.resolveHostDirectives(s);break}dE(t,e,n,l,i,c,d)}i!==null&&o!==null&&uE(n,o,i)}function uE(t,e,n){let o=t.localNames=[];for(let r=0;r<e.length;r+=2){let i=n[e[r+1]];if(i==null)throw new O(-301,!1);o.push(e[r],i)}}function cE(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function dE(t,e,n,o,r,i,s){let l=o.length,c=null;for(let h=0;h<l;h++){let g=o[h];c===null&&Xt(g)&&(c=g,cE(t,n,h)),_y(Jf(n,e),t,g.type)}yE(n,t.data.length,l),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let h=0;h<l;h++){let g=o[h];g.providersResolver&&g.providersResolver(g)}let d=!1,f=!1,p=Cp(t,e,l,null);l>0&&(n.directiveToIndex=new Map);for(let h=0;h<l;h++){let g=o[h];if(n.mergedAttrs=wl(n.mergedAttrs,g.hostAttrs),pE(t,n,e,p,g),mE(p,g,r),s!==null&&s.has(g)){let[y,E]=s.get(g);n.directiveToIndex.set(g.type,[p,y+n.directiveStart,E+n.directiveStart])}else(i===null||!i.has(g))&&n.directiveToIndex.set(g.type,p);g.contentQueries!==null&&(n.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(n.flags|=64);let m=g.type.prototype;!d&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),d=!0),!f&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),f=!0),p++}fE(t,n,i)}function fE(t,e,n){for(let o=e.directiveStart;o<e.directiveEnd;o++){let r=t.data[o];if(n===null||!n.has(r))Sf(0,e,r,o),Sf(1,e,r,o),Mf(e,o,!1);else{let i=n.get(r);wf(0,e,i,o),wf(1,e,i,o),Mf(e,o,!0)}}}function Sf(t,e,n,o){let r=t===0?n.inputs:n.outputs;for(let i in r)if(r.hasOwnProperty(i)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[i]??=[],s[i].push(o),Jp(e,i)}}function wf(t,e,n,o){let r=t===0?n.inputs:n.outputs;for(let i in r)if(r.hasOwnProperty(i)){let s=r[i],l;t===0?l=e.hostDirectiveInputs??={}:l=e.hostDirectiveOutputs??={},l[s]??=[],l[s].push(o,i),Jp(e,s)}}function Jp(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function Mf(t,e,n){let{attrs:o,inputs:r,hostDirectiveInputs:i}=t;if(o===null||!n&&r===null||n&&i===null||kl(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,l=0;for(;l<o.length;){let c=o[l];if(c===0){l+=4;continue}else if(c===5){l+=2;continue}else if(typeof c=="number")break;if(!n&&r.hasOwnProperty(c)){let d=r[c];for(let f of d)if(f===e){s??=[],s.push(c,o[l+1]);break}}else if(n&&i.hasOwnProperty(c)){let d=i[c];for(let f=0;f<d.length;f+=2)if(d[f]===e){s??=[],s.push(d[f+1],o[l+1]);break}}l+=2}t.initialInputs??=[],t.initialInputs.push(s)}function pE(t,e,n,o,r){t.data[o]=r;let i=r.factory||(r.factory=Dn(r.type,!0)),s=new Do(i,Xt(r),Ro,null);t.blueprint[o]=s,n[o]=s,hE(t,e,o,Cp(t,n,r.hostVars,Fe),r)}function hE(t,e,n,o,r){let i=r.hostBindings;if(i){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let l=~e.index;gE(s)!=l&&s.push(l),s.push(n,o,i)}}function gE(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function mE(t,e,n){if(n){if(e.exportAs)for(let o=0;o<e.exportAs.length;o++)n[e.exportAs[o]]=t;Xt(e)&&(n[""]=t)}}function yE(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Yp(t,e,n,o,r,i,s,l){let c=e[F],d=c.consts,f=rt(d,s),p=Ti(c,t,n,o,f);return i&&Wp(c,e,p,rt(d,l),r),p.mergedAttrs=wl(p.mergedAttrs,p.attrs),p.attrs!==null&&_f(p,p.attrs,!1),p.mergedAttrs!==null&&_f(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function jp(t,e){$f(t,e),xa(e)&&t.queries.elementEnd(e)}function vt(t,e,n){if(n===Fe)return!1;let o=t[e];return Object.is(o,n)?!1:(t[e]=n,!0)}function vE(t,e,n,o){let r=vt(t,e,n);return vt(t,e+1,o)||r}function el(t,e,n){return function o(r){let i=Qt(t)?ot(t.index,e):e;Jl(i,5);let s=e[ee],l=Af(e,s,n,r),c=o.__ngNextListenerFn__;for(;c;)l=Af(e,s,c,r)&&l,c=c.__ngNextListenerFn__;return l}}function Af(t,e,n,o){let r=x(null);try{return Y(z.OutputStart,e,n),n(o)!==!1}catch(i){return Ov(t,i),!1}finally{Y(z.OutputEnd,e,n),x(r)}}function EE(t,e,n,o,r,i,s,l){let c=yo(t),d=!1,f=null;if(!o&&c&&(f=CE(e,n,i,t.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,d=!0}else{let p=He(t,n),h=o?o(p):p;Oy(n,h,i,l);let g=r.listen(h,i,l);if(!IE(i)){let m=o?y=>o(Pe(y[t.index])):t.index;Kp(m,e,n,i,l,g,!1)}}return d}function IE(t){return t.startsWith("animation")||t.startsWith("transition")}function CE(t,e,n,o){let r=t.cleanup;if(r!=null)for(let i=0;i<r.length-1;i+=2){let s=r[i];if(s===n&&r[i+1]===o){let l=e[An],c=r[i+2];return l&&l.length>c?l[c]:null}typeof s=="string"&&(i+=2)}return null}function Kp(t,e,n,o,r,i,s){let l=e.firstCreatePass?Ld(e):null,c=Fd(n),d=c.length;c.push(r,i),l&&l.push(o,t,d,(d+1)*(s?-1:1))}function bf(t,e,n,o,r,i){let s=e[n],l=e[F],d=l.data[n].outputs[o],p=s[d].subscribe(i);Kp(t.index,l,e,r,i,p,!0)}var gl=Symbol("BINDING");var ml=class extends _i{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=qt(e);return new Mo(n,this.ngModule)}};function TE(t){return Object.keys(t).map(e=>{let[n,o,r]=t[e],i={propName:n,templateName:e,isSignal:(o&mi.SignalBased)!==0};return r&&(i.transform=r),i})}function DE(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function _E(t,e,n){let o=e instanceof ge?e:e?.injector;return o&&t.getStandaloneInjector!==null&&(o=t.getStandaloneInjector(o)||o),o?new hl(n,o):n}function SE(t){let e=t.get(rn,null);if(e===null)throw new O(407,!1);let n=t.get(zp,null),o=t.get(Mt,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:o,ngReflect:!1}}function wE(t,e){let n=Zp(t);return gp(e,n,n==="svg"?Ra:n==="math"?xd:null)}function Zp(t){return(t.selectors[0][0]||"div").toLowerCase()}var Mo=class extends Di{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=TE(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=DE(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=ev(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,o,r,i,s){Y(z.DynamicComponentStart);let l=x(null);try{let c=this.componentDef,d=ME(o,c,s,i),f=_E(c,r||this.ngModule,e),p=SE(f),h=p.rendererFactory.createRenderer(null,c),g=o?Tv(h,o,c.encapsulation,f):wE(c,h),m=s?.some(Nf)||i?.some(v=>typeof v!="function"&&v.bindings.some(Nf)),y=Ll(null,d,null,512|Ip(c),null,null,p,h,f,null,up(g,f,!0));y[ce]=g,Gr(y);let E=null;try{let v=Yp(ce,y,2,"#host",()=>d.directiveRegistry,!0,0);vp(h,g,v),On(g,y),Gl(d,y,v),dp(d,v,y),jp(d,v),n!==void 0&&bE(v,this.ngContentSelectors,n),E=ot(v.index,y),y[ee]=E[ee],Wl(d,y,null)}catch(v){throw E!==null&&al(E),al(y),v}finally{Y(z.DynamicComponentEnd),qr()}return new ii(this.componentType,y,!!m)}finally{x(l)}}};function ME(t,e,n,o){let r=t?["ng-version","21.0.6"]:tv(e.selectors[0]),i=null,s=null,l=0;if(n)for(let f of n)l+=f[gl].requiredVars,f.create&&(f.targetIdx=0,(i??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(o)for(let f=0;f<o.length;f++){let p=o[f];if(typeof p!="function")for(let h of p.bindings){l+=h[gl].requiredVars;let g=f+1;h.create&&(h.targetIdx=g,(i??=[]).push(h)),h.update&&(h.targetIdx=g,(s??=[]).push(h))}}let c=[e];if(o)for(let f of o){let p=typeof f=="function"?f:f.type,h=Ea(p);c.push(h)}return Fl(0,null,AE(i,s),1,l,c,null,null,null,[r],null)}function AE(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let o of t)o.create();if(n&2&&e)for(let o of e)o.update()}}function Nf(t){let e=t[gl].kind;return e==="input"||e==="twoWay"}var ii=class extends qp{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,o){super(),this._rootLView=n,this._hasInputBindings=o,this._tNode=vo(n[F],ce),this.location=di(this._tNode,n),this.instance=ot(this._tNode.index,n)[ee],this.hostView=this.changeDetectorRef=new Vn(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let o=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let r=this._rootLView,i=zl(o,r[F],r,e,n);this.previousInputValues.set(e,n);let s=ot(o.index,r);Jl(s,1)}get injector(){return new nn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function bE(t,e,n){let o=t.projection=[];for(let r=0;r<e.length;r++){let i=n[r];o.push(i!=null&&i.length?Array.from(i):null)}}var Si=(()=>{class t{static __NG_ELEMENT_ID__=NE}return t})();function NE(){let t=it();return RE(t,W())}var xE=Si,Qp=class extends xE{_lContainer;_hostTNode;_hostLView;constructor(e,n,o){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=o}get element(){return di(this._hostTNode,this._hostLView)}get injector(){return new nn(this._hostTNode,this._hostLView)}get parentInjector(){let e=Ml(this._hostTNode,this._hostLView);if(qf(e)){let n=ni(e,this._hostLView),o=ti(e),r=n[F].data[o+8];return new nn(r,n)}else return new nn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=xf(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ne}createEmbeddedView(e,n,o){let r,i;typeof o=="number"?r=o:o!=null&&(r=o.index,i=o.injector);let s=fl(this._lContainer,e.ssrId),l=e.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(l,r,_o(this._hostTNode,s)),l}createComponent(e,n,o,r,i,s,l){let c=e&&!ly(e),d;if(c)d=n;else{let E=n||{};d=E.index,o=E.injector,r=E.projectableNodes,i=E.environmentInjector||E.ngModuleRef,s=E.directives,l=E.bindings}let f=c?e:new Mo(qt(e)),p=o||this.parentInjector;if(!i&&f.ngModule==null){let v=(c?p:this.parentInjector).get(ge,null);v&&(i=v)}let h=qt(f.componentType??{}),g=fl(this._lContainer,h?.id??null),m=g?.firstChild??null,y=f.create(p,r,m,i,s,l);return this.insertImpl(y.hostView,d,_o(this._hostTNode,g)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,o){let r=e._lView;if(Rd(r)){let l=this.indexOf(e);if(l!==-1)this.detach(l);else{let c=r[le],d=new Qp(c,c[xe],c[le]);d.detach(d.indexOf(e))}}let i=this._adjustIndex(n),s=this._lContainer;return Ii(s,r,i,o),e.attachToViewContainerRef(),Da(tl(s),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=xf(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),o=wo(this._lContainer,n);o&&(lo(tl(this._lContainer),n),yi(o[F],o))}detach(e){let n=this._adjustIndex(e,-1),o=wo(this._lContainer,n);return o&&lo(tl(this._lContainer),n)!=null?new Vn(o):null}_adjustIndex(e,n=0){return e??this.length+n}};function xf(t){return t[go]}function tl(t){return t[go]||(t[go]=[])}function RE(t,e){let n,o=e[t.index];return Be(o)?n=o:(n=Up(o,e,null,t),e[t.index]=n,Ol(e,n)),kE(n,e,t,o),new Qp(n,t,e)}function PE(t,e){let n=t[te],o=n.createComment(""),r=He(e,t),i=n.parentNode(r);return ri(n,i,o,n.nextSibling(r),!1),o}var kE=OE,FE=()=>!1;function LE(t,e,n){return FE(t,e,n)}function OE(t,e,n,o){if(t[At])return;let r;n.type&8?r=Pe(o):r=PE(e,n),t[At]=r}var Ao=class{};var bo=class extends Ao{injector;componentFactoryResolver=new ml(this);instance=null;constructor(e){super();let n=new $t([...e.providers,{provide:Ao,useValue:this},{provide:_i,useValue:this.componentFactoryResolver}],e.parent||po(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Xp(t,e,n=null){return new bo({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var VE=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let o=wa(!1,n.type),r=o.length>0?Xp([o],this._injector,""):null;this.cachedInjectors.set(n,r)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:t,providedIn:"environment",factory:()=>new t(B(ge))})}return t})();function Yl(t){return ci(()=>{let e=eh(t),n=pe(ie({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===bl.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(VE).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ze.Emulated,styles:t.styles||Ee,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&ln("NgStandalone"),th(n);let o=t.dependencies;return n.directiveDefs=Rf(o,UE),n.pipeDefs=Rf(o,Ed),n.id=$E(n),n})}function UE(t){return qt(t)||Ea(t)}function Po(t){return ci(()=>({type:t.type,bootstrap:t.bootstrap||Ee,declarations:t.declarations||Ee,imports:t.imports||Ee,exports:t.exports||Ee,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function BE(t,e){if(t==null)return Wt;let n={};for(let o in t)if(t.hasOwnProperty(o)){let r=t[o],i,s,l,c;Array.isArray(r)?(l=r[0],i=r[1],s=r[2]??i,c=r[3]||null):(i=r,s=r,l=mi.None,c=null),n[i]=[o,l,c],e[i]=s}return n}function HE(t){if(t==null)return Wt;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function jl(t){return ci(()=>{let e=eh(t);return th(e),e})}function eh(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Wt,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Ee,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:BE(t.inputs,e),outputs:HE(t.outputs),debugInfo:null}}function th(t){t.features?.forEach(e=>e(t))}function Rf(t,e){return t?()=>{let n=typeof t=="function"?t():t,o=[];for(let r of n){let i=e(r);i!==null&&o.push(i)}return o}:null}function $E(t){let e=0,n=typeof t.consts=="function"?"":t.consts,o=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let i of o.join("|"))e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function nh(t,e,n,o,r,i,s,l){if(n.firstCreatePass){t.mergedAttrs=wl(t.mergedAttrs,t.attrs);let f=t.tView=Fl(2,t,r,i,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),f.queries=n.queries.embeddedTView(t))}l&&(t.flags|=l),Rn(t,!1);let c=qE(n,e,t,o);zr()&&Hl(n,e,c,t),On(c,e);let d=Up(c,e,c,t);e[o+ce]=d,Ol(e,d),LE(d,t,e)}function GE(t,e,n,o,r,i,s,l,c,d,f){let p=n+ce,h;return e.firstCreatePass?(h=Ti(e,p,4,s||null,l||null),Oa()&&Wp(e,t,h,rt(e.consts,d),bp),$f(e,h)):h=e.data[p],nh(h,t,e,n,o,r,i,c),yo(h)&&Gl(e,t,h),d!=null&&ql(t,h,f),h}function si(t,e,n,o,r,i,s,l,c,d,f){let p=n+ce,h;if(e.firstCreatePass){if(h=Ti(e,p,4,s||null,l||null),d!=null){let g=rt(e.consts,d);h.localNames=[];for(let m=0;m<g.length;m+=2)h.localNames.push(g[m],-1)}}else h=e.data[p];return nh(h,t,e,n,o,r,i,c),d!=null&&ql(t,h,f),h}function ko(t,e,n,o,r,i,s,l){let c=W(),d=we(),f=rt(d.consts,i);return GE(c,d,t,e,n,o,r,f,void 0,s,l),ko}var qE=zE;function zE(t,e,n,o){return Wr(!0),e[te].createComment("")}var Kl=new V("");function wi(t){return!!t&&typeof t.then=="function"}function Zl(t){return!!t&&typeof t.subscribe=="function"}var oh=new V("");var Ql=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,o)=>{this.resolve=n,this.reject=o});appInits=b(oh,{optional:!0})??[];injector=b(wt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let r of this.appInits){let i=wn(this.injector,r);if(wi(i))n.push(i);else if(Zl(i)){let s=new Promise((l,c)=>{i.subscribe({complete:l,error:c})});n.push(s)}}let o=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{o()}).catch(r=>{this.reject(r)}),n.length===0&&o(),this.initialized=!0}static \u0275fac=function(o){return new(o||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rh=new V("");function ih(){Us(()=>{let t="";throw new O(600,t)})}function sh(t){return t.isBoundToModule}var WE=10;var Mi=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=b(Nt);afterRenderManager=b(Dp);zonelessEnabled=b(Io);rootEffectScheduler=b(jr);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Tt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=b(tn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(et(n=>!n))}constructor(){b(an,{optional:!0})}whenStable(){let n;return new Promise(o=>{n=this.isStable.subscribe({next:r=>{r&&o()}})}).finally(()=>{n.unsubscribe()})}_injector=b(ge);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,o){return this.bootstrapImpl(n,o)}bootstrapImpl(n,o,r=wt.NULL){return this._injector.get(_e).run(()=>{Y(z.BootstrapComponentStart);let s=n instanceof Di;if(!this._injector.get(Ql).done){let m="";throw new O(405,m)}let c;s?c=n:c=this._injector.get(_i).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let d=sh(c)?void 0:this._injector.get(Ao),f=o||c.selector,p=c.create(r,[],f,d),h=p.location.nativeElement,g=p.injector.get(Kl,null);return g?.registerApplication(h),p.onDestroy(()=>{this.detachView(p.hostView),To(this.components,p),g?.unregisterApplication(h)}),this._loadComponent(p),Y(z.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Y(z.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ul.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Y(z.ChangeDetectionEnd),new O(101,!1);let n=x(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,x(n),this.afterTick.next(),Y(z.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(rn,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<WE;){Y(z.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Y(z.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let o=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!o&&!Eo(r))continue;let i=o&&!this.zonelessEnabled?0:1;Fp(r,i),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Eo(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let o=n;this._views.push(o),o.attachToAppRef(this)}detachView(n){let o=n;To(this._views,o),o.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(n),this._injector.get(rh,[]).forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>To(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new O(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(o){return new(o||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function To(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Ai(t,e,n,o){let r=W(),i=Pn();if(vt(r,i,e)){let s=we(),l=qa();Rv(l,r,t,e,n,o)}return Ai}var VR=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var yl=class{destroy(e){}updateValue(e,n){}swap(e,n){let o=Math.min(e,n),r=Math.max(e,n),i=this.detach(r);if(r-o>1){let s=this.detach(o);this.attach(o,i),this.attach(r,s)}else this.attach(o,i)}move(e,n){this.attach(n,this.detach(e))}};function nl(t,e,n,o,r){return t===n&&Object.is(e,o)?1:Object.is(r(t,e),r(n,o))?-1:0}function JE(t,e,n,o){let r,i,s=0,l=t.length-1,c=void 0;if(Array.isArray(e)){x(o);let d=e.length-1;for(x(null);s<=l&&s<=d;){let f=t.at(s),p=e[s],h=nl(s,f,s,p,n);if(h!==0){h<0&&t.updateValue(s,p),s++;continue}let g=t.at(l),m=e[d],y=nl(l,g,d,m,n);if(y!==0){y<0&&t.updateValue(l,m),l--,d--;continue}let E=n(s,f),v=n(l,g),T=n(s,p);if(Object.is(T,v)){let D=n(d,m);Object.is(D,E)?(t.swap(s,l),t.updateValue(l,m),d--,l--):t.move(l,s),t.updateValue(s,p),s++;continue}if(r??=new ai,i??=kf(t,s,l,n),vl(t,r,s,T))t.updateValue(s,p),s++,l++;else if(i.has(T))r.set(E,t.detach(s)),l--;else{let D=t.create(s,e[s]);t.attach(s,D),s++,l++}}for(;s<=d;)Pf(t,r,n,s,e[s]),s++}else if(e!=null){x(o);let d=e[Symbol.iterator]();x(null);let f=d.next();for(;!f.done&&s<=l;){let p=t.at(s),h=f.value,g=nl(s,p,s,h,n);if(g!==0)g<0&&t.updateValue(s,h),s++,f=d.next();else{r??=new ai,i??=kf(t,s,l,n);let m=n(s,h);if(vl(t,r,s,m))t.updateValue(s,h),s++,l++,f=d.next();else if(!i.has(m))t.attach(s,t.create(s,h)),s++,l++,f=d.next();else{let y=n(s,p);r.set(y,t.detach(s)),l--}}}for(;!f.done;)Pf(t,r,n,t.length,f.value),f=d.next()}for(;s<=l;)t.destroy(t.detach(l--));r?.forEach(d=>{t.destroy(d)})}function vl(t,e,n,o){return e!==void 0&&e.has(o)?(t.attach(n,e.get(o)),e.delete(o),!0):!1}function Pf(t,e,n,o,r){if(vl(t,e,o,n(o,r)))t.updateValue(o,r);else{let i=t.create(o,r);t.attach(o,i)}}function kf(t,e,n,o){let r=new Set;for(let i=e;i<=n;i++)r.add(o(i,t.at(i)));return r}var ai=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let o=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(o);)o=r.get(o);r.set(o,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,o]of this.kvMap)if(e(o,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(o);)o=r.get(o),e(o,n)}}};function We(t,e,n,o,r,i,s,l){ln("NgControlFlow");let c=W(),d=we(),f=rt(d.consts,i);return si(c,d,t,e,n,o,r,f,256,s,l),Xl}function Xl(t,e,n,o,r,i,s,l){ln("NgControlFlow");let c=W(),d=we(),f=rt(d.consts,i);return si(c,d,t,e,n,o,r,f,512,s,l),Xl}function Je(t,e){ln("NgControlFlow");let n=W(),o=Pn(),r=n[o]!==Fe?n[o]:-1,i=r!==-1?li(n,ce+r):void 0,s=0;if(vt(n,o,t)){let l=x(null);try{if(i!==void 0&&Hp(i,s),t!==-1){let c=ce+t,d=li(n,c),f=Tl(n[F],c),p=Gp(d,f,n),h=Ei(n,f,e,{dehydratedView:p});Ii(d,h,s,_o(f,p))}}finally{x(l)}}else if(i!==void 0){let l=Bp(i,s);l!==void 0&&(l[ee]=e)}}var El=class{lContainer;$implicit;$index;constructor(e,n,o){this.lContainer=e,this.$implicit=n,this.$index=o}get $count(){return this.lContainer.length-ne}};function eu(t){return t}function tu(t,e){return e}var Il=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,o){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=o}};function Bn(t,e,n,o,r,i,s,l,c,d,f,p,h){ln("NgControlFlow");let g=W(),m=we(),y=c!==void 0,E=W(),v=l?s.bind(E[Re][ee]):s,T=new Il(y,v);E[ce+t]=T,si(g,m,t+1,e,n,o,r,rt(m.consts,i),256),y&&si(g,m,t+2,c,d,f,p,rt(m.consts,h),512)}var Cl=class extends yl{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,o){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=o}get length(){return this.lContainer.length-ne}at(e){return this.getLView(e)[ee].$implicit}attach(e,n){let o=n[Mn];this.needsIndexUpdate||=e!==this.length,Ii(this.lContainer,n,e,_o(this.templateTNode,o)),YE(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,jE(this.lContainer,e),KE(this.lContainer,e)}create(e,n){let o=fl(this.lContainer,this.templateTNode.tView.ssrId);return Ei(this.hostLView,this.templateTNode,new El(this.lContainer,n,e),{dehydratedView:o})}destroy(e){yi(e[F],e)}updateValue(e,n){this.getLView(e)[ee].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ee].$index=e}getLView(e){return ZE(this.lContainer,e)}};function Hn(t){let e=x(null),n=yt();try{let o=W(),r=o[F],i=o[n],s=n+1,l=li(o,s);if(i.liveCollection===void 0){let d=Tl(r,s);i.liveCollection=new Cl(l,o,d)}else i.liveCollection.reset();let c=i.liveCollection;if(JE(c,t,i.trackByFn,e),c.updateIndexes(),i.hasEmptyBlock){let d=Pn(),f=c.length===0;if(vt(o,d,f)){let p=n+2,h=li(o,p);if(f){let g=Tl(r,p),m=Gp(h,g,o),y=Ei(o,g,void 0,{dehydratedView:m});Ii(h,y,0,_o(g,m))}else r.firstUpdatePass&&iE(h),Hp(h,0)}}}finally{x(e)}}function li(t,e){return t[e]}function YE(t,e){if(t.length<=ne)return;let n=ne+e,o=t[n],r=o?o[Zt]:void 0;if(o&&r&&r.detachedLeaveAnimationFns&&r.detachedLeaveAnimationFns.length>0){let i=o[pt];sv(i,r),on.delete(o),r.detachedLeaveAnimationFns=void 0}}function jE(t,e){if(t.length<=ne)return;let n=ne+e,o=t[n],r=o?o[Zt]:void 0;r&&r.leave&&r.leave.size>0&&(r.detachedLeaveAnimationFns=[])}function KE(t,e){return wo(t,e)}function ZE(t,e){return Bp(t,e)}function Tl(t,e){return vo(t,e)}function lt(t,e,n){let o=W(),r=Pn();if(vt(o,r,e)){let i=we(),s=qa();wv(s,o,t,e,o[te],n)}return lt}function Dl(t,e,n,o,r){zl(e,t,n,r?"class":"style",o)}function C(t,e,n,o){let r=W(),i=r[F],s=t+ce,l=i.firstCreatePass?Yp(s,r,2,e,bp,Oa(),n,o):i.data[s];if(Fv(l,r,t,e,QE),yo(l)){let c=r[F];Gl(c,r,l),dp(c,l,r)}return o!=null&&ql(r,l),C}function I(){let t=we(),e=it(),n=Lv(e);return t.firstCreatePass&&jp(t,n),Hd(n)&&$d(),Ud(),n.classesWithoutHost!=null&&gy(n)&&Dl(t,n,W(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&my(n)&&Dl(t,n,W(),n.stylesWithoutHost,!1),I}function se(t,e,n,o){return C(t,e,n,o),I(),se}var QE=(t,e,n,o,r)=>(Wr(!0),gp(e[te],o,tf()));function xt(){return W()}var Fo="en-US";var XE=Fo;function ah(t){typeof t=="string"&&(XE=t.toLowerCase().replace(/_/g,"-"))}function Le(t,e,n){let o=W(),r=we(),i=it();return eI(r,o,o[te],i,t,e,n),Le}function eI(t,e,n,o,r,i,s){let l=!0,c=null;if((o.type&3||s)&&(c??=el(o,e,i),EE(o,t,e,s,n,r,i,c)&&(l=!1)),l){let d=o.outputs?.[r],f=o.hostDirectiveOutputs?.[r];if(f&&f.length)for(let p=0;p<f.length;p+=2){let h=f[p],g=f[p+1];c??=el(o,e,i),bf(o,e,h,g,r,c)}if(d&&d.length)for(let p of d)c??=el(o,e,i),bf(o,e,p,r,r,c)}}function oe(t=1){return ef(t)}function Kr(t,e){return t<<17|e<<2}function sn(t){return t>>17&32767}function tI(t){return(t&2)==2}function nI(t,e){return t&131071|e<<17}function _l(t){return t|2}function Un(t){return(t&131068)>>2}function ol(t,e){return t&-131069|e<<2}function oI(t){return(t&1)===1}function Sl(t){return t|1}function rI(t,e,n,o,r,i){let s=i?e.classBindings:e.styleBindings,l=sn(s),c=Un(s);t[o]=n;let d=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||Sn(p,f)>0)&&(d=!0)}else f=n;if(r)if(c!==0){let h=sn(t[l+1]);t[o+1]=Kr(h,l),h!==0&&(t[h+1]=ol(t[h+1],o)),t[l+1]=nI(t[l+1],o)}else t[o+1]=Kr(l,0),l!==0&&(t[l+1]=ol(t[l+1],o)),l=o;else t[o+1]=Kr(c,0),l===0?l=o:t[c+1]=ol(t[c+1],o),c=o;d&&(t[o+1]=_l(t[o+1])),Ff(t,f,o,!0),Ff(t,f,o,!1),iI(e,f,t,o,i),s=Kr(l,c),i?e.classBindings=s:e.styleBindings=s}function iI(t,e,n,o,r){let i=r?t.residualClasses:t.residualStyles;i!=null&&typeof e=="string"&&Sn(i,e)>=0&&(n[o+1]=Sl(n[o+1]))}function Ff(t,e,n,o){let r=t[n+1],i=e===null,s=o?sn(r):Un(r),l=!1;for(;s!==0&&(l===!1||i);){let c=t[s],d=t[s+1];sI(c,e)&&(l=!0,t[s+1]=o?Sl(d):_l(d)),s=o?sn(d):Un(d)}l&&(t[n+1]=o?_l(r):Sl(r))}function sI(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Sn(t,e)>=0:!1}var qe={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function aI(t){return t.substring(qe.key,qe.keyEnd)}function lI(t){return uI(t),lh(t,uh(t,0,qe.textEnd))}function lh(t,e){let n=qe.textEnd;return n===e?-1:(e=qe.keyEnd=cI(t,qe.key=e,n),uh(t,e,n))}function uI(t){qe.key=0,qe.keyEnd=0,qe.value=0,qe.valueEnd=0,qe.textEnd=t.length}function uh(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function cI(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function bi(t,e,n){return ch(t,e,n,!1),bi}function un(t,e){return ch(t,e,null,!0),un}function $n(t){fI(vI,dI,t,!0)}function dI(t,e){for(let n=lI(e);n>=0;n=lh(e,n))Fr(t,aI(e),!0)}function ch(t,e,n,o){let r=W(),i=we(),s=Hr(2);if(i.firstUpdatePass&&fh(i,t,s,o),e!==Fe&&vt(r,s,e)){let l=i.data[yt()];ph(i,l,r,r[te],t,r[s+1]=II(e,n),o,s)}}function fI(t,e,n,o){let r=we(),i=Hr(2);r.firstUpdatePass&&fh(r,null,i,o);let s=W();if(n!==Fe&&vt(s,i,n)){let l=r.data[yt()];if(hh(l,o)&&!dh(r,i)){let c=o?l.classesWithoutHost:l.stylesWithoutHost;c!==null&&(n=br(c,n||"")),Dl(r,l,s,n,o)}else EI(r,l,s,s[te],s[i+1],s[i+1]=yI(t,e,n),o,i)}}function dh(t,e){return e>=t.expandoStartIndex}function fh(t,e,n,o){let r=t.data;if(r[n+1]===null){let i=r[yt()],s=dh(t,n);hh(i,o)&&e===null&&!s&&(e=!1),e=pI(r,i,e,o),rI(r,i,e,n,s,o)}}function pI(t,e,n,o){let r=Kd(t),i=o?e.residualClasses:e.residualStyles;if(r===null)(o?e.classBindings:e.styleBindings)===0&&(n=rl(null,t,e,n,o),n=No(n,e.attrs,o),i=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==r)if(n=rl(r,t,e,n,o),i===null){let c=hI(t,e,o);c!==void 0&&Array.isArray(c)&&(c=rl(null,t,e,c[1],o),c=No(c,e.attrs,o),gI(t,e,o,c))}else i=mI(t,e,o)}return i!==void 0&&(o?e.residualClasses=i:e.residualStyles=i),n}function hI(t,e,n){let o=n?e.classBindings:e.styleBindings;if(Un(o)!==0)return t[sn(o)]}function gI(t,e,n,o){let r=n?e.classBindings:e.styleBindings;t[sn(r)]=o}function mI(t,e,n){let o,r=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<r;i++){let s=t[i].hostAttrs;o=No(o,s,n)}return No(o,e.attrs,n)}function rl(t,e,n,o,r){let i=null,s=n.directiveEnd,l=n.directiveStylingLast;for(l===-1?l=n.directiveStart:l++;l<s&&(i=e[l],o=No(o,i.hostAttrs,r),i!==t);)l++;return t!==null&&(n.directiveStylingLast=l),o}function No(t,e,n){let o=n?1:2,r=-1;if(e!==null)for(let i=0;i<e.length;i++){let s=e[i];typeof s=="number"?r=s:r===o&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Fr(t,s,n?!0:e[++i]))}return t===void 0?null:t}function yI(t,e,n){if(n==null||n==="")return Ee;let o=[],r=gi(n);if(Array.isArray(r))for(let i=0;i<r.length;i++)t(o,r[i],!0);else if(typeof r=="object")for(let i in r)r.hasOwnProperty(i)&&t(o,i,r[i]);else typeof r=="string"&&e(o,r);return o}function vI(t,e,n){let o=String(e);o!==""&&!o.includes(" ")&&Fr(t,o,n)}function EI(t,e,n,o,r,i,s,l){r===Fe&&(r=Ee);let c=0,d=0,f=0<r.length?r[0]:null,p=0<i.length?i[0]:null;for(;f!==null||p!==null;){let h=c<r.length?r[c+1]:void 0,g=d<i.length?i[d+1]:void 0,m=null,y;f===p?(c+=2,d+=2,h!==g&&(m=p,y=g)):p===null||f!==null&&f<p?(c+=2,m=f):(d+=2,m=p,y=g),m!==null&&ph(t,e,n,o,m,y,s,l),f=c<r.length?r[c]:null,p=d<i.length?i[d]:null}}function ph(t,e,n,o,r,i,s,l){if(!(e.type&3))return;let c=t.data,d=c[l+1],f=oI(d)?Lf(c,e,n,r,Un(d),s):void 0;if(!ui(f)){ui(i)||tI(d)&&(i=Lf(c,null,n,r,l,s));let p=Pa(yt(),n);Cv(o,s,p,r,i)}}function Lf(t,e,n,o,r,i){let s=e===null,l;for(;r>0;){let c=t[r],d=Array.isArray(c),f=d?c[1]:c,p=f===null,h=n[r+1];h===Fe&&(h=p?Ee:void 0);let g=p?Lr(h,o):f===o?h:void 0;if(d&&!ui(g)&&(g=Lr(c,o)),ui(g)&&(l=g,s))return l;let m=t[r+1];r=s?sn(m):Un(m)}if(e!==null){let c=i?e.residualClasses:e.residualStyles;c!=null&&(l=Lr(c,o))}return l}function ui(t){return t!==void 0}function II(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Dt(gi(t)))),t}function hh(t,e){return(t.flags&(e?8:16))!==0}function w(t,e=""){let n=W(),o=we(),r=t+ce,i=o.firstCreatePass?Ti(o,r,1,e,null):o.data[r],s=CI(o,n,i,e,t);n[r]=s,zr()&&Hl(o,n,s,i),Rn(i,!1)}var CI=(t,e,n,o,r)=>(Wr(!0),By(e[te],o));function TI(t,e,n,o=""){return vt(t,Pn(),n)?e+zt(n)+o:Fe}function DI(t,e,n,o,r,i=""){let s=zd(),l=vE(t,s,n,r);return Hr(2),l?e+zt(n)+o+zt(r)+i:Fe}function K(t){return Rt("",t),K}function Rt(t,e,n){let o=W(),r=TI(o,t,e,n);return r!==Fe&&_I(o,yt(),r),Rt}function _I(t,e,n){let o=Pa(e,t);Hy(t[te],o,n)}function nu(t,e,n,o,r=""){return DI(W(),t,e,n,o,r)}var gh=(()=>{class t{applicationErrorHandler=b(Nt);appRef=b(Mi);taskService=b(tn);ngZone=b(_e);zonelessEnabled=b(Io);tracing=b(an,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new he;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(io):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(b(ja,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let o=this.useMicrotaskScheduler?Wa:za;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(io+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(o){this.taskService.remove(n),this.applicationErrorHandler(o)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Wa(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(o){return new(o||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ou(){return ln("NgZoneless"),co([...ru(),[]])}function ru(){return[{provide:Mt,useExisting:gh},{provide:_e,useClass:so},{provide:Io,useValue:!0}]}function SI(){return typeof $localize<"u"&&$localize.locale||Fo}var Ni=new V("",{factory:()=>b(Ni,{optional:!0,skipSelf:!0})||SI()});var iu=new V(""),HI=new V("");function Lo(t){return!t.moduleRef}function $I(t){let e=Lo(t)?t.r3Injector:t.moduleRef.injector,n=e.get(_e);return n.run(()=>{Lo(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let o=e.get(Nt),r;if(n.runOutsideAngular(()=>{r=n.onError.subscribe({next:o})}),Lo(t)){let i=()=>e.destroy(),s=t.platformInjector.get(iu);s.add(i),e.onDestroy(()=>{r.unsubscribe(),s.delete(i)})}else{let i=()=>t.moduleRef.destroy(),s=t.platformInjector.get(iu);s.add(i),t.moduleRef.onDestroy(()=>{To(t.allPlatformModules,t.moduleRef),r.unsubscribe(),s.delete(i)})}return qI(o,n,()=>{let i=e.get(tn),s=i.add(),l=e.get(Ql);return l.runInitializers(),l.donePromise.then(()=>{let c=e.get(Ni,Fo);if(ah(c||Fo),!e.get(HI,!0))return Lo(t)?e.get(Mi):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Lo(t)){let f=e.get(Mi);return t.rootComponent!==void 0&&f.bootstrap(t.rootComponent),f}else return GI?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void i.remove(s))})})}var GI;function qI(t,e,n){try{let o=n();return wi(o)?o.catch(r=>{throw e.runOutsideAngular(()=>t(r)),r}):o}catch(o){throw e.runOutsideAngular(()=>t(o)),o}}var xi=null;function zI(t=[],e){return wt.create({name:e,providers:[{provide:fo,useValue:"platform"},{provide:iu,useValue:new Set([()=>xi=null])},...t]})}function WI(t=[]){if(xi)return xi;let e=zI(t);return xi=e,ih(),JI(e),e}function JI(t){let e=t.get(pi,null);wn(t,()=>{e?.forEach(n=>n())})}function mh(t){let{rootComponent:e,appProviders:n,platformProviders:o,platformRef:r}=t;Y(z.BootstrapApplicationStart);try{let i=r?.injector??WI(o),s=[ru(),af,...n||[]],l=new bo({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return $I({r3Injector:l.injector,platformInjector:i,rootComponent:e})}catch(i){return Promise.reject(i)}finally{Y(z.BootstrapApplicationEnd)}}var yh=null;function Pt(){return yh}function su(t){yh??=t}var Oo=class{},Ri=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(o){return new(o||t)};static \u0275prov=H({token:t,factory:()=>b(vh),providedIn:"platform"})}return t})();var vh=(()=>{class t extends Ri{_location;_history;_doc=b(me);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pt().getBaseHref(this._doc)}onPopState(n){let o=Pt().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",n,!1),()=>o.removeEventListener("popstate",n)}onHashChange(n){let o=Pt().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",n,!1),()=>o.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,o,r){this._history.pushState(n,o,r)}replaceState(n,o,r){this._history.replaceState(n,o,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(o){return new(o||t)};static \u0275prov=H({token:t,factory:()=>new t,providedIn:"platform"})}return t})();var au=(()=>{class t{_viewContainer;_context=new Pi;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,o){this._viewContainer=n,this._thenTemplateRef=o}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Eh(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Eh(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,o){return!0}static \u0275fac=function(o){return new(o||t)(Ro(Si),Ro(Ci))};static \u0275dir=jl({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Pi=class{$implicit=null;ngIf=null};function Eh(t,e){if(t&&!t.createEmbeddedView)throw new O(2020,!1)}var ki=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275mod=Po({type:t});static \u0275inj=_n({})}return t})();function Vo(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let o=n.indexOf("="),[r,i]=o==-1?[n,""]:[n.slice(0,o),n.slice(o+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}var dn=class{};var Ih="browser";var Uo=class{_doc;constructor(e){this._doc=e}manager},Fi=(()=>{class t extends Uo{constructor(n){super(n)}supports(n){return!0}addEventListener(n,o,r,i){return n.addEventListener(o,r,i),()=>this.removeEventListener(n,o,r,i)}removeEventListener(n,o,r,i){return n.removeEventListener(o,r,i)}static \u0275fac=function(o){return new(o||t)(B(me))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),Vi=new V(""),du=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,o){this._zone=o,n.forEach(s=>{s.manager=this});let r=n.filter(s=>!(s instanceof Fi));this._plugins=r.slice().reverse();let i=n.find(s=>s instanceof Fi);i&&this._plugins.push(i)}addEventListener(n,o,r,i){return this._findPluginFor(o).addEventListener(n,o,r,i)}getZone(){return this._zone}_findPluginFor(n){let o=this._eventNameToPlugin.get(n);if(o)return o;if(o=this._plugins.find(i=>i.supports(n)),!o)throw new O(5101,!1);return this._eventNameToPlugin.set(n,o),o}static \u0275fac=function(o){return new(o||t)(B(Vi),B(_e))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),lu="ng-app-id";function Ch(t){for(let e of t)e.remove()}function Th(t,e){let n=e.createElement("style");return n.textContent=t,n}function KI(t,e,n,o){let r=t.head?.querySelectorAll(`style[${lu}="${e}"],link[${lu}="${e}"]`);if(r)for(let i of r)i.removeAttribute(lu),i instanceof HTMLLinkElement?o.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&n.set(i.textContent,{usage:0,elements:[i]})}function cu(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var fu=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,o,r,i={}){this.doc=n,this.appId=o,this.nonce=r,KI(n,o,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,o){for(let r of n)this.addUsage(r,this.inline,Th);o?.forEach(r=>this.addUsage(r,this.external,cu))}removeStyles(n,o){for(let r of n)this.removeUsage(r,this.inline);o?.forEach(r=>this.removeUsage(r,this.external))}addUsage(n,o,r){let i=o.get(n);i?i.usage++:o.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(n,this.doc)))})}removeUsage(n,o){let r=o.get(n);r&&(r.usage--,r.usage<=0&&(Ch(r.elements),o.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Ch(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[o,{elements:r}]of this.inline)r.push(this.addElement(n,Th(o,this.doc)));for(let[o,{elements:r}]of this.external)r.push(this.addElement(n,cu(o,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,o){return this.nonce&&o.setAttribute("nonce",this.nonce),n.appendChild(o)}static \u0275fac=function(o){return new(o||t)(B(me),B(fi),B(hi,8),B(xo))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),uu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},pu=/%COMP%/g;var _h="%COMP%",ZI=`_nghost-${_h}`,QI=`_ngcontent-${_h}`,XI=!0,eC=new V("",{factory:()=>XI});function tC(t){return QI.replace(pu,t)}function nC(t){return ZI.replace(pu,t)}function Sh(t,e){return e.map(n=>n.replace(pu,t))}var hu=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,o,r,i,s,l,c=null,d=null){this.eventManager=n,this.sharedStylesHost=o,this.appId=r,this.removeStylesOnCompDestroy=i,this.doc=s,this.ngZone=l,this.nonce=c,this.tracingService=d,this.defaultRenderer=new Bo(n,s,l,this.tracingService)}createRenderer(n,o){if(!n||!o)return this.defaultRenderer;let r=this.getOrCreateRenderer(n,o);return r instanceof Oi?r.applyToHost(n):r instanceof Ho&&r.applyStyles(),r}getOrCreateRenderer(n,o){let r=this.rendererByCompId,i=r.get(o.id);if(!i){let s=this.doc,l=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.tracingService;switch(o.encapsulation){case ze.Emulated:i=new Oi(c,d,o,this.appId,f,s,l,p);break;case ze.ShadowDom:return new Li(c,n,o,s,l,this.nonce,p,d);case ze.ExperimentalIsolatedShadowDom:return new Li(c,n,o,s,l,this.nonce,p);default:i=new Ho(c,d,o,f,s,l,p);break}r.set(o.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(o){return new(o||t)(B(du),B(fu),B(fi),B(eC),B(me),B(_e),B(hi),B(an,8))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),Bo=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,o,r){this.eventManager=e,this.doc=n,this.ngZone=o,this.tracingService=r}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(uu[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Dh(e)?e.content:e).appendChild(n)}insertBefore(e,n,o){e&&(Dh(e)?e.content:e).insertBefore(n,o)}removeChild(e,n){n.remove()}selectRootElement(e,n){let o=typeof e=="string"?this.doc.querySelector(e):e;if(!o)throw new O(-5104,!1);return n||(o.textContent=""),o}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,o,r){if(r){n=r+":"+n;let i=uu[r];i?e.setAttributeNS(i,n,o):e.setAttribute(n,o)}else e.setAttribute(n,o)}removeAttribute(e,n,o){if(o){let r=uu[o];r?e.removeAttributeNS(r,n):e.removeAttribute(`${o}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,o,r){r&(at.DashCase|at.Important)?e.style.setProperty(n,o,r&at.Important?"important":""):e.style[n]=o}removeStyle(e,n,o){o&at.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,o){e!=null&&(e[n]=o)}setValue(e,n){e.nodeValue=n}listen(e,n,o,r){if(typeof e=="string"&&(e=Pt().getGlobalEventTarget(this.doc,e),!e))throw new O(5102,!1);let i=this.decoratePreventDefault(o);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(e,n,i)),this.eventManager.addEventListener(e,n,i,r)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function Dh(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Li=class extends Bo{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,o,r,i,s,l,c){super(e,r,i,l),this.hostEl=n,this.sharedStylesHost=c,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let d=o.styles;d=Sh(o.id,d);for(let p of d){let h=document.createElement("style");s&&h.setAttribute("nonce",s),h.textContent=p,this.shadowRoot.appendChild(h)}let f=o.getExternalStyles?.();if(f)for(let p of f){let h=cu(p,r);s&&h.setAttribute("nonce",s),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,o){return super.insertBefore(this.nodeOrShadowRoot(e),n,o)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Ho=class extends Bo{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,o,r,i,s,l,c){super(e,i,s,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r;let d=o.styles;this.styles=c?Sh(c,d):d,this.styleUrls=o.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&on.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Oi=class extends Ho{contentAttr;hostAttr;constructor(e,n,o,r,i,s,l,c){let d=r+"-"+o.id;super(e,n,o,i,s,l,c,d),this.contentAttr=tC(d),this.hostAttr=nC(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let o=super.createElement(e,n);return super.setAttribute(o,this.contentAttr,""),o}};var Ui=class t extends Oo{supportsDOMEvents=!0;static makeCurrent(){su(new t)}onAndCancel(e,n,o,r){return e.addEventListener(n,o,r),()=>{e.removeEventListener(n,o,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=oC();return n==null?null:rC(n)}resetBaseElement(){$o=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Vo(document.cookie,e)}},$o=null;function oC(){return $o=$o||document.head.querySelector("base"),$o?$o.getAttribute("href"):null}function rC(t){return new URL(t,document.baseURI).pathname}var iC=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(o){return new(o||t)};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),wh=["alt","control","meta","shift"],sC={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},aC={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Mh=(()=>{class t extends Uo{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,o,r,i){let s=t.parseEventName(o),l=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pt().onAndCancel(n,s.domEventName,l,i))}static parseEventName(n){let o=n.toLowerCase().split("."),r=o.shift();if(o.length===0||!(r==="keydown"||r==="keyup"))return null;let i=t._normalizeKey(o.pop()),s="",l=o.indexOf("code");if(l>-1&&(o.splice(l,1),s="code."),wh.forEach(d=>{let f=o.indexOf(d);f>-1&&(o.splice(f,1),s+=d+".")}),s+=i,o.length!=0||i.length===0)return null;let c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(n,o){let r=sC[n.key]||n.key,i="";return o.indexOf("code.")>-1&&(r=n.code,i="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),wh.forEach(s=>{if(s!==r){let l=aC[s];l(n)&&(i+=s+".")}}),i+=r,i===o)}static eventCallback(n,o,r){return i=>{t.matchEventFullKeyCode(i,n)&&r.runGuarded(()=>o(i))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(o){return new(o||t)(B(me))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})();function gu(t,e,n){let o=ie({rootComponent:t,platformRef:n?.platformRef},lC(e));return mh(o)}function lC(t){return{appProviders:[...pC,...t?.providers??[]],platformProviders:fC}}function uC(){Ui.makeCurrent()}function cC(){return new ft}function dC(){return Nl(document),document}var fC=[{provide:xo,useValue:Ih},{provide:pi,useValue:uC,multi:!0},{provide:me,useFactory:dC}];var pC=[{provide:fo,useValue:"root"},{provide:ft,useFactory:cC},{provide:Vi,useClass:Fi,multi:!0},{provide:Vi,useClass:Mh,multi:!0},hu,fu,du,{provide:rn,useExisting:hu},{provide:dn,useClass:iC},[]];var fn=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let o=n.indexOf(":");if(o>0){let r=n.slice(0,o),i=n.slice(o+1).trim();this.addHeaderEntry(r,i)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,o)=>{this.addHeaderEntry(o,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,o])=>{this.setHeaderEntries(n,o)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let o=e.value;if(typeof o=="string"&&(o=[o]),o.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...o),this.headers.set(n,r);break;case"d":let i=e.value;if(!i)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(l=>i.indexOf(l)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let o=e.toLowerCase();this.maybeSetNormalizedName(e,o),this.headers.has(o)?this.headers.get(o).push(n):this.headers.set(o,[n])}setHeaderEntries(e,n){let o=(Array.isArray(n)?n:[n]).map(i=>i.toString()),r=e.toLowerCase();this.headers.set(r,o),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Hi=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}},$i=class{encodeKey(e){return Ah(e)}encodeValue(e){return Ah(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function hC(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let i=r.indexOf("="),[s,l]=i==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,i)),e.decodeValue(r.slice(i+1))],c=n.get(s)||[];c.push(l),n.set(s,c)}),n}var gC=/%(\d[a-f0-9])/gi,mC={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ah(t){return encodeURIComponent(t).replace(gC,(e,n)=>mC[n]??e)}function Bi(t){return`${t}`}var kt=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new $i,e.fromString){if(e.fromObject)throw new O(2805,!1);this.map=hC(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let o=e.fromObject[n],r=Array.isArray(o)?o.map(Bi):[Bi(o)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(o=>{let r=e[o];Array.isArray(r)?r.forEach(i=>{n.push({param:o,value:i,op:"a"})}):n.push({param:o,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(o=>n+"="+this.encoder.encodeValue(o)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Bi(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let o=this.map.get(e.param)||[],r=o.indexOf(Bi(e.value));r!==-1&&o.splice(r,1),o.length>0?this.map.set(e.param,o):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};function yC(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function bh(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Nh(t){return typeof Blob<"u"&&t instanceof Blob}function xh(t){return typeof FormData<"u"&&t instanceof FormData}function vC(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Rh="Content-Type",Ph="Accept",kh="text/plain",Fh="application/json",EC=`${Fh}, ${kh}, */*`,Go=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,n,o,r){this.url=n,this.method=e.toUpperCase();let i;if(yC(this.method)||r?(this.body=o!==void 0?o:null,i=r):i=o,i){if(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,this.keepalive=!!i.keepalive,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),i.priority&&(this.priority=i.priority),i.cache&&(this.cache=i.cache),i.credentials&&(this.credentials=i.credentials),typeof i.timeout=="number"){if(i.timeout<1||!Number.isInteger(i.timeout))throw new O(2822,"");this.timeout=i.timeout}i.mode&&(this.mode=i.mode),i.redirect&&(this.redirect=i.redirect),i.integrity&&(this.integrity=i.integrity),i.referrer&&(this.referrer=i.referrer),i.referrerPolicy&&(this.referrerPolicy=i.referrerPolicy),this.transferCache=i.transferCache}if(this.headers??=new fn,this.context??=new Hi,!this.params)this.params=new kt,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let l=n.indexOf("?"),c=l===-1?"?":l<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||bh(this.body)||Nh(this.body)||xh(this.body)||vC(this.body)?this.body:this.body instanceof kt?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||xh(this.body)?null:Nh(this.body)?this.body.type||null:bh(this.body)?null:typeof this.body=="string"?kh:this.body instanceof kt?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Fh:null}clone(e={}){let n=e.method||this.method,o=e.url||this.url,r=e.responseType||this.responseType,i=e.keepalive??this.keepalive,s=e.priority||this.priority,l=e.cache||this.cache,c=e.mode||this.mode,d=e.redirect||this.redirect,f=e.credentials||this.credentials,p=e.referrer||this.referrer,h=e.integrity||this.integrity,g=e.referrerPolicy||this.referrerPolicy,m=e.transferCache??this.transferCache,y=e.timeout??this.timeout,E=e.body!==void 0?e.body:this.body,v=e.withCredentials??this.withCredentials,T=e.reportProgress??this.reportProgress,D=e.headers||this.headers,S=e.params||this.params,M=e.context??this.context;return e.setHeaders!==void 0&&(D=Object.keys(e.setHeaders).reduce((L,N)=>L.set(N,e.setHeaders[N]),D)),e.setParams&&(S=Object.keys(e.setParams).reduce((L,N)=>L.set(N,e.setParams[N]),S)),new t(n,o,E,{params:S,headers:D,context:M,reportProgress:T,responseType:r,withCredentials:v,transferCache:m,keepalive:i,cache:l,priority:s,timeout:y,mode:c,redirect:d,credentials:f,referrer:p,integrity:h,referrerPolicy:g})}},Gn=(function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t})(Gn||{}),qn=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,n=200,o="OK"){this.headers=e.headers||new fn,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||o,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}},Gi=class t extends qn{constructor(e={}){super(e)}type=Gn.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},qi=class t extends qn{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Gn.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}},qo=class extends qn{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},IC=200,CC=204;var TC=new V("");var DC=/^\)\]\}',?\n/;var yu=(()=>{class t{xhrFactory;tracingService=b(an,{optional:!0});constructor(n){this.xhrFactory=n}maybePropagateTrace(n){return this.tracingService?.propagate?this.tracingService.propagate(n):n}handle(n){if(n.method==="JSONP")throw new O(-2800,!1);let o=this.xhrFactory;return vr(null).pipe(ea(()=>new X(i=>{let s=o.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((E,v)=>s.setRequestHeader(E,v.join(","))),n.headers.has(Ph)||s.setRequestHeader(Ph,EC),!n.headers.has(Rh)){let E=n.detectContentTypeHeader();E!==null&&s.setRequestHeader(Rh,E)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let E=n.responseType.toLowerCase();s.responseType=E!=="json"?E:"text"}let l=n.serializeBody(),c=null,d=()=>{if(c!==null)return c;let E=s.statusText||"OK",v=new fn(s.getAllResponseHeaders()),T=s.responseURL||n.url;return c=new Gi({headers:v,status:s.status,statusText:E,url:T}),c},f=this.maybePropagateTrace(()=>{let{headers:E,status:v,statusText:T,url:D}=d(),S=null;v!==CC&&(S=typeof s.response>"u"?s.responseText:s.response),v===0&&(v=S?IC:0);let M=v>=200&&v<300;if(n.responseType==="json"&&typeof S=="string"){let L=S;S=S.replace(DC,"");try{S=S!==""?JSON.parse(S):null}catch(N){S=L,M&&(M=!1,S={error:N,text:S})}}M?(i.next(new qi({body:S,headers:E,status:v,statusText:T,url:D||void 0})),i.complete()):i.error(new qo({error:S,headers:E,status:v,statusText:T,url:D||void 0}))}),p=this.maybePropagateTrace(E=>{let{url:v}=d(),T=new qo({error:E,status:s.status||0,statusText:s.statusText||"Unknown Error",url:v||void 0});i.error(T)}),h=p;n.timeout&&(h=this.maybePropagateTrace(E=>{let{url:v}=d(),T=new qo({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:v||void 0});i.error(T)}));let g=!1,m=this.maybePropagateTrace(E=>{g||(i.next(d()),g=!0);let v={type:Gn.DownloadProgress,loaded:E.loaded};E.lengthComputable&&(v.total=E.total),n.responseType==="text"&&s.responseText&&(v.partialText=s.responseText),i.next(v)}),y=this.maybePropagateTrace(E=>{let v={type:Gn.UploadProgress,loaded:E.loaded};E.lengthComputable&&(v.total=E.total),i.next(v)});return s.addEventListener("load",f),s.addEventListener("error",p),s.addEventListener("timeout",h),s.addEventListener("abort",p),n.reportProgress&&(s.addEventListener("progress",m),l!==null&&s.upload&&s.upload.addEventListener("progress",y)),s.send(l),i.next({type:Gn.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",f),s.removeEventListener("timeout",h),n.reportProgress&&(s.removeEventListener("progress",m),l!==null&&s.upload&&s.upload.removeEventListener("progress",y)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(o){return new(o||t)(B(dn))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _C(t,e){return e(t)}function SC(t,e,n){return(o,r)=>wn(n,()=>e(o,i=>t(i,r)))}var Lh=new V("",{factory:()=>[]}),wC=new V(""),Oh=new V("",{factory:()=>!0});var vu=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275prov=H({token:t,factory:function(o){let r=null;return o?r=new(o||t):r=B(yu),r},providedIn:"root"})}return t})();var zi=(()=>{class t{backend;injector;chain=null;pendingTasks=b(Yr);contributeToStability=b(Oh);constructor(n,o){this.backend=n,this.injector=o}handle(n){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(Lh),...this.injector.get(wC,[])]));this.chain=o.reduceRight((r,i)=>SC(r,i,this.injector),_C)}if(this.contributeToStability){let o=this.pendingTasks.add();return this.chain(n,r=>this.backend.handle(r)).pipe(Xs(o))}else return this.chain(n,o=>this.backend.handle(o))}static \u0275fac=function(o){return new(o||t)(B(vu),B(ge))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Eu=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275prov=H({token:t,factory:function(o){let r=null;return o?r=new(o||t):r=B(zi),r},providedIn:"root"})}return t})();function mu(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,credentials:t.credentials,transferCache:t.transferCache,timeout:t.timeout,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect,integrity:t.integrity,referrer:t.referrer,referrerPolicy:t.referrerPolicy}}var MC=(()=>{class t{handler;constructor(n){this.handler=n}request(n,o,r={}){let i;if(n instanceof Go)i=n;else{let c;r.headers instanceof fn?c=r.headers:c=new fn(r.headers);let d;r.params&&(r.params instanceof kt?d=r.params:d=new kt({fromObject:r.params})),i=new Go(n,o,r.body!==void 0?r.body:null,{headers:c,context:r.context,params:d,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials,referrer:r.referrer,referrerPolicy:r.referrerPolicy,integrity:r.integrity,timeout:r.timeout})}let s=vr(i).pipe(Qs(c=>this.handler.handle(c)));if(n instanceof Go||r.observe==="events")return s;let l=s.pipe(Zs(c=>c instanceof qi));switch(r.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return l.pipe(et(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new O(2806,!1);return c.body}));case"blob":return l.pipe(et(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new O(2807,!1);return c.body}));case"text":return l.pipe(et(c=>{if(c.body!==null&&typeof c.body!="string")throw new O(2808,!1);return c.body}));case"json":default:return l.pipe(et(c=>c.body))}case"response":return l;default:throw new O(2809,!1)}}delete(n,o={}){return this.request("DELETE",n,o)}get(n,o={}){return this.request("GET",n,o)}head(n,o={}){return this.request("HEAD",n,o)}jsonp(n,o){return this.request("JSONP",n,{params:new kt().append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,o={}){return this.request("OPTIONS",n,o)}patch(n,o,r={}){return this.request("PATCH",n,mu(r,o))}post(n,o,r={}){return this.request("POST",n,mu(r,o))}put(n,o,r={}){return this.request("PUT",n,mu(r,o))}static \u0275fac=function(o){return new(o||t)(B(Eu))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var AC=new V("",{factory:()=>!0}),bC="XSRF-TOKEN",NC=new V("",{factory:()=>bC}),xC="X-XSRF-TOKEN",RC=new V("",{providedIn:"root",factory:()=>xC}),PC=(()=>{class t{cookieName=b(NC);doc=b(me);lastCookieString="";lastToken=null;parseCount=0;getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Vo(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(o){return new(o||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Vh=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275prov=H({token:t,factory:function(o){let r=null;return o?r=new(o||t):r=B(PC),r},providedIn:"root"})}return t})();function kC(t,e){if(!b(AC)||t.method==="GET"||t.method==="HEAD")return e(t);try{let r=b(Ri).href,{origin:i}=new URL(r),{origin:s}=new URL(t.url,i);if(i!==s)return e(t)}catch{return e(t)}let n=b(Vh).getToken(),o=b(RC);return n!=null&&!t.headers.has(o)&&(t=t.clone({headers:t.headers.set(o,n)})),e(t)}function Iu(...t){let e=[MC,zi,{provide:Eu,useExisting:zi},{provide:vu,useFactory:()=>b(TC,{optional:!0})??b(yu)},{provide:Lh,useValue:kC,multi:!0}];for(let n of t)e.push(...n.\u0275providers);return co(e)}var FC,LC;function OC(){return{geminiUrl:FC,vertexUrl:LC}}function VC(t,e,n,o){var r,i;if(!t?.baseUrl){let s=OC();return e?(r=s.vertexUrl)!==null&&r!==void 0?r:n:(i=s.geminiUrl)!==null&&i!==void 0?i:o}return t.baseUrl}var Ke=class{};function _(t,e){let n=/\{([^}]+)\}/g;return t.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){let i=e[r];return i!=null?String(i):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function u(t,e,n){for(let i=0;i<e.length-1;i++){let s=e[i];if(s.endsWith("[]")){let l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){let c=t[l];if(Array.isArray(n))for(let d=0;d<c.length;d++){let f=c[d];u(f,e.slice(i+1),n[d])}else for(let d of c)u(d,e.slice(i+1),n)}return}else if(s.endsWith("[0]")){let l=s.slice(0,-3);l in t||(t[l]=[{}]);let c=t[l];u(c[0],e.slice(i+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}let o=e[e.length-1],r=t[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function a(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;let r=e[o];if(r.endsWith("[]")){let i=r.slice(0,-2);if(i in t){let s=t[i];return Array.isArray(s)?s.map(l=>a(l,e.slice(o+1),n)):n}else return n}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function UC(t,e){for(let[n,o]of Object.entries(e)){let r=n.split("."),i=o.split("."),s=new Set,l=-1;for(let c=0;c<r.length;c++)if(r[c]==="*"){l=c;break}if(l!==-1&&i.length>l)for(let c=l;c<i.length;c++){let d=i[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&s.add(d)}Du(t,r,i,0,s)}}function Du(t,e,n,o,r){if(o>=e.length||typeof t!="object"||t===null)return;let i=e[o];if(i.endsWith("[]")){let s=i.slice(0,-2),l=t;if(s in l&&Array.isArray(l[s]))for(let c of l[s])Du(c,e,n,o+1,r)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let s=t,l=Object.keys(s).filter(d=>!d.startsWith("_")&&!r.has(d)),c={};for(let d of l)c[d]=s[d];for(let[d,f]of Object.entries(c)){let p=[];for(let h of n.slice(o))h==="*"?p.push(d):p.push(h);u(s,p,f)}for(let d of l)delete s[d]}}else{let s=t;i in s&&Du(s[i],e,n,o+1,r)}}function Cc(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function BC(t){let e={},n=a(t,["operationName"]);n!=null&&u(e,["operationName"],n);let o=a(t,["resourceName"]);return o!=null&&u(e,["_url","resourceName"],o),e}function HC(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["metadata"]);o!=null&&u(e,["metadata"],o);let r=a(t,["done"]);r!=null&&u(e,["done"],r);let i=a(t,["error"]);i!=null&&u(e,["error"],i);let s=a(t,["response","generateVideoResponse"]);return s!=null&&u(e,["response"],GC(s)),e}function $C(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["metadata"]);o!=null&&u(e,["metadata"],o);let r=a(t,["done"]);r!=null&&u(e,["done"],r);let i=a(t,["error"]);i!=null&&u(e,["error"],i);let s=a(t,["response"]);return s!=null&&u(e,["response"],qC(s)),e}function GC(t){let e={},n=a(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>zC(s))),u(e,["generatedVideos"],i)}let o=a(t,["raiMediaFilteredCount"]);o!=null&&u(e,["raiMediaFilteredCount"],o);let r=a(t,["raiMediaFilteredReasons"]);return r!=null&&u(e,["raiMediaFilteredReasons"],r),e}function qC(t){let e={},n=a(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>WC(s))),u(e,["generatedVideos"],i)}let o=a(t,["raiMediaFilteredCount"]);o!=null&&u(e,["raiMediaFilteredCount"],o);let r=a(t,["raiMediaFilteredReasons"]);return r!=null&&u(e,["raiMediaFilteredReasons"],r),e}function zC(t){let e={},n=a(t,["video"]);return n!=null&&u(e,["video"],QC(n)),e}function WC(t){let e={},n=a(t,["_self"]);return n!=null&&u(e,["video"],XC(n)),e}function JC(t){let e={},n=a(t,["operationName"]);return n!=null&&u(e,["_url","operationName"],n),e}function YC(t){let e={},n=a(t,["operationName"]);return n!=null&&u(e,["_url","operationName"],n),e}function jC(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["metadata"]);o!=null&&u(e,["metadata"],o);let r=a(t,["done"]);r!=null&&u(e,["done"],r);let i=a(t,["error"]);i!=null&&u(e,["error"],i);let s=a(t,["response"]);return s!=null&&u(e,["response"],KC(s)),e}function KC(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["parent"]);o!=null&&u(e,["parent"],o);let r=a(t,["documentName"]);return r!=null&&u(e,["documentName"],r),e}function cg(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["metadata"]);o!=null&&u(e,["metadata"],o);let r=a(t,["done"]);r!=null&&u(e,["done"],r);let i=a(t,["error"]);i!=null&&u(e,["error"],i);let s=a(t,["response"]);return s!=null&&u(e,["response"],ZC(s)),e}function ZC(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["parent"]);o!=null&&u(e,["parent"],o);let r=a(t,["documentName"]);return r!=null&&u(e,["documentName"],r),e}function QC(t){let e={},n=a(t,["uri"]);n!=null&&u(e,["uri"],n);let o=a(t,["encodedVideo"]);o!=null&&u(e,["videoBytes"],Cc(o));let r=a(t,["encoding"]);return r!=null&&u(e,["mimeType"],r),e}function XC(t){let e={},n=a(t,["gcsUri"]);n!=null&&u(e,["uri"],n);let o=a(t,["bytesBase64Encoded"]);o!=null&&u(e,["videoBytes"],Cc(o));let r=a(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}var j=(function(t){return t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL",t})(j||{});var _u=(function(t){return t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO",t})(_u||{});var dg=(function(t){return t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",t})(dg||{});var Wo=(function(t){return t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT",t})(Wo||{});var Yo=class{constructor(e){let n={};for(let o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}};var hn=class{get text(){var e,n,o,r,i,s,l,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1,p=[];for(let h of(c=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(let[g,m]of Object.entries(h))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(m!==null||m!==void 0)&&p.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,d+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,o,r,i,s,l,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="",f=[];for(let p of(c=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(let[h,g]of Object.entries(p))h!=="inlineData"&&(g!==null||g!==void 0)&&f.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,o,r,i,s,l,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let d=(c=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if(d?.length!==0)return d}get executableCode(){var e,n,o,r,i,s,l,c,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let f=(c=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,o,r,i,s,l,c,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let f=(c=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.output}},Xi=class{},es=class{},Su=class{},wu=class{},Mu=class{},Au=class{},ts=class{},ns=class{},os=class{},bu=class{};var rs=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let o=new t,r,i=e;return n?r=$C(i):r=HC(i),Object.assign(o,r),o}},is=class{},ss=class{},as=class{},ls=class{},Nu=class{},xu=class{},Ru=class{};var Pu=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let o=new t,i=jC(e);return Object.assign(o,i),o}},ku=class{},Fu=class{},Lu=class{};var us=class{};var Ou=class{get text(){var e,n,o;let r="",i=!1,s=[];for(let l of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(let[c,d]of Object.entries(l))c!=="text"&&c!=="thought"&&d!==null&&s.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;i=!0,r+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?r:void 0}get data(){var e,n,o;let r="",i=[];for(let s of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(let[l,c]of Object.entries(s))l!=="inlineData"&&c!==null&&i.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(r+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}};var Vu=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var Uu=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let o=new t,i=cg(e);return Object.assign(o,i),o}};function q(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function fg(t,e){let n=q(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function pg(t){return Array.isArray(t)?t.map(e=>cs(e)):[cs(t)]}function cs(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function hg(t){let e=cs(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function gg(t){let e=cs(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Uh(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function mg(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Uh(e)):[Uh(t)]}function Bu(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Bh(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Hh(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function fe(t){if(t==null)throw new Error("ContentUnion is required");return Bu(t)?t:{role:"user",parts:mg(t)}}function Tc(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{let o=fe(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){let n=fe(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>fe(n)):[fe(e)]}function Oe(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Bh(t)||Hh(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[fe(t)]}let e=[],n=[],o=Bu(t[0]);for(let r of t){let i=Bu(r);if(i!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(r);else{if(Bh(r)||Hh(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||e.push({role:"user",parts:mg(n)}),e}function eT(t,e){t.includes("null")&&(e.nullable=!0);let n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(j).includes(n[0].toUpperCase())?n[0].toUpperCase():j.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let o of n)e.anyOf.push({type:Object.values(j).includes(o.toUpperCase())?o.toUpperCase():j.TYPE_UNSPECIFIED})}}function Wn(t){let e={},n=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");let i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&eT(t.type,e);for(let[s,l]of Object.entries(t))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(j).includes(l.toUpperCase())?l.toUpperCase():j.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Wn(l);else if(o.includes(s)){let c=[];for(let d of l){if(d.type=="null"){e.nullable=!0;continue}c.push(Wn(d))}e[s]=c}else if(r.includes(s)){let c={};for(let[d,f]of Object.entries(l))c[d]=Wn(f);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=l}return e}function Dc(t){return Wn(t)}function _c(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Sc(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Kn(t){if(t.functionDeclarations)for(let e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Wn(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Wn(e.response));return t}function Zn(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");let e=[];for(let n of t)e.push(n);return e}function tT(t,e,n,o=1){let r=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function It(t,e){if(typeof e!="string")throw new Error("name must be a string");return tT(t,e,"cachedContents")}function yg(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ft(t){return Cc(t)}function nT(t){return t!=null&&typeof t=="object"&&"name"in t}function oT(t){return t!=null&&typeof t=="object"&&"video"in t}function rT(t){return t!=null&&typeof t=="object"&&"uri"in t}function vg(t){var e;let n;if(nT(t)&&(n=t.name),!(rT(t)&&(n=t.uri,n===void 0))&&!(oT(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Eg(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Ig(t){for(let e of["models","tunedModels","publisherModels"])if(iT(t,e))return t[e];return[]}function iT(t,e){return t!==null&&typeof t=="object"&&e in t}function sT(t,e={}){let n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function aT(t,e={}){let n=[],o=new Set;for(let r of t){let i=r.name;if(o.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);o.add(i);let s=sT(r,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function Cg(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;let o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function lT(t){if(typeof t!="string")return t;let e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Tg(t){if(typeof t!="object"||t===null)return{};let e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;let r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let i=!1;for(let s of r){if(typeof s!="object"||s===null)continue;let c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Qn(t,e){let n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Dg(t){let e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function uT(t){let e={},n=a(t,["responsesFile"]);n!=null&&u(e,["fileName"],n);let o=a(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>GT(s))),u(e,["inlinedResponses"],i)}let r=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["inlinedEmbedContentResponses"],i)}return e}function cT(t){let e={},n=a(t,["predictionsFormat"]);n!=null&&u(e,["format"],n);let o=a(t,["gcsDestination","outputUriPrefix"]);o!=null&&u(e,["gcsUri"],o);let r=a(t,["bigqueryDestination","outputUri"]);return r!=null&&u(e,["bigqueryUri"],r),e}function dT(t){let e={},n=a(t,["format"]);n!=null&&u(e,["predictionsFormat"],n);let o=a(t,["gcsUri"]);o!=null&&u(e,["gcsDestination","outputUriPrefix"],o);let r=a(t,["bigqueryUri"]);if(r!=null&&u(e,["bigqueryDestination","outputUri"],r),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Zi(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["metadata","displayName"]);o!=null&&u(e,["displayName"],o);let r=a(t,["metadata","state"]);r!=null&&u(e,["state"],Dg(r));let i=a(t,["metadata","createTime"]);i!=null&&u(e,["createTime"],i);let s=a(t,["metadata","endTime"]);s!=null&&u(e,["endTime"],s);let l=a(t,["metadata","updateTime"]);l!=null&&u(e,["updateTime"],l);let c=a(t,["metadata","model"]);c!=null&&u(e,["model"],c);let d=a(t,["metadata","output"]);return d!=null&&u(e,["dest"],uT(Tg(d))),e}function Hu(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["displayName"]);o!=null&&u(e,["displayName"],o);let r=a(t,["state"]);r!=null&&u(e,["state"],Dg(r));let i=a(t,["error"]);i!=null&&u(e,["error"],i);let s=a(t,["createTime"]);s!=null&&u(e,["createTime"],s);let l=a(t,["startTime"]);l!=null&&u(e,["startTime"],l);let c=a(t,["endTime"]);c!=null&&u(e,["endTime"],c);let d=a(t,["updateTime"]);d!=null&&u(e,["updateTime"],d);let f=a(t,["model"]);f!=null&&u(e,["model"],f);let p=a(t,["inputConfig"]);p!=null&&u(e,["src"],fT(p));let h=a(t,["outputConfig"]);h!=null&&u(e,["dest"],cT(Tg(h)));let g=a(t,["completionStats"]);return g!=null&&u(e,["completionStats"],g),e}function fT(t){let e={},n=a(t,["instancesFormat"]);n!=null&&u(e,["format"],n);let o=a(t,["gcsSource","uris"]);o!=null&&u(e,["gcsUri"],o);let r=a(t,["bigquerySource","inputUri"]);return r!=null&&u(e,["bigqueryUri"],r),e}function pT(t,e){let n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let o=a(e,["fileName"]);o!=null&&u(n,["fileName"],o);let r=a(e,["inlinedRequests"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>$T(t,s))),u(n,["requests","requests"],i)}return n}function hT(t){let e={},n=a(t,["format"]);n!=null&&u(e,["instancesFormat"],n);let o=a(t,["gcsUri"]);o!=null&&u(e,["gcsSource","uris"],o);let r=a(t,["bigqueryUri"]);if(r!=null&&u(e,["bigquerySource","inputUri"],r),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function gT(t){let e={},n=a(t,["data"]);if(n!=null&&u(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function mT(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],Qn(t,o)),n}function yT(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],Qn(t,o)),n}function vT(t){let e={},n=a(t,["content"]);n!=null&&u(e,["content"],n);let o=a(t,["citationMetadata"]);o!=null&&u(e,["citationMetadata"],ET(o));let r=a(t,["tokenCount"]);r!=null&&u(e,["tokenCount"],r);let i=a(t,["finishReason"]);i!=null&&u(e,["finishReason"],i);let s=a(t,["avgLogprobs"]);s!=null&&u(e,["avgLogprobs"],s);let l=a(t,["groundingMetadata"]);l!=null&&u(e,["groundingMetadata"],l);let c=a(t,["index"]);c!=null&&u(e,["index"],c);let d=a(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);let f=a(t,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>g)),u(e,["safetyRatings"],h)}let p=a(t,["urlContextMetadata"]);return p!=null&&u(e,["urlContextMetadata"],p),e}function ET(t){let e={},n=a(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),u(e,["citations"],o)}return e}function _g(t){let e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>KT(i))),u(e,["parts"],r)}let o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function IT(t,e){let n={},o=a(t,["displayName"]);if(e!==void 0&&o!=null&&u(e,["batch","displayName"],o),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function CT(t,e){let n={},o=a(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);let r=a(t,["dest"]);return e!==void 0&&r!=null&&u(e,["outputConfig"],dT(lT(r))),n}function $h(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],q(t,o));let r=a(e,["src"]);r!=null&&u(n,["batch","inputConfig"],pT(t,Cg(t,r)));let i=a(e,["config"]);return i!=null&&IT(i,n),n}function TT(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["model"],q(t,o));let r=a(e,["src"]);r!=null&&u(n,["inputConfig"],hT(Cg(t,r)));let i=a(e,["config"]);return i!=null&&CT(i,n),n}function DT(t,e){let n={},o=a(t,["displayName"]);return e!==void 0&&o!=null&&u(e,["batch","displayName"],o),n}function _T(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],q(t,o));let r=a(e,["src"]);r!=null&&u(n,["batch","inputConfig"],xT(t,r));let i=a(e,["config"]);return i!=null&&DT(i,n),n}function ST(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],Qn(t,o)),n}function wT(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],Qn(t,o)),n}function MT(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["name"]);o!=null&&u(e,["name"],o);let r=a(t,["done"]);r!=null&&u(e,["done"],r);let i=a(t,["error"]);return i!=null&&u(e,["error"],i),e}function AT(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["name"]);o!=null&&u(e,["name"],o);let r=a(t,["done"]);r!=null&&u(e,["done"],r);let i=a(t,["error"]);return i!=null&&u(e,["error"],i),e}function bT(t,e){let n={},o=a(e,["contents"]);if(o!=null){let i=Tc(t,o);Array.isArray(i)&&(i=i.map(s=>s)),u(n,["requests[]","request","content"],i)}let r=a(e,["config"]);return r!=null&&(u(n,["_self"],NT(r,n)),UC(n,{"requests[].*":"requests[].request.*"})),n}function NT(t,e){let n={},o=a(t,["taskType"]);e!==void 0&&o!=null&&u(e,["requests[]","taskType"],o);let r=a(t,["title"]);e!==void 0&&r!=null&&u(e,["requests[]","title"],r);let i=a(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&u(e,["requests[]","outputDimensionality"],i),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function xT(t,e){let n={},o=a(e,["fileName"]);o!=null&&u(n,["file_name"],o);let r=a(e,["inlinedRequests"]);return r!=null&&u(n,["requests"],bT(t,r)),n}function RT(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function PT(t){let e={},n=a(t,["id"]);n!=null&&u(e,["id"],n);let o=a(t,["args"]);o!=null&&u(e,["args"],o);let r=a(t,["name"]);if(r!=null&&u(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kT(t){let e={},n=a(t,["mode"]);n!=null&&u(e,["mode"],n);let o=a(t,["allowedFunctionNames"]);if(o!=null&&u(e,["allowedFunctionNames"],o),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function FT(t,e,n){let o={},r=a(e,["systemInstruction"]);n!==void 0&&r!=null&&u(n,["systemInstruction"],_g(fe(r)));let i=a(e,["temperature"]);i!=null&&u(o,["temperature"],i);let s=a(e,["topP"]);s!=null&&u(o,["topP"],s);let l=a(e,["topK"]);l!=null&&u(o,["topK"],l);let c=a(e,["candidateCount"]);c!=null&&u(o,["candidateCount"],c);let d=a(e,["maxOutputTokens"]);d!=null&&u(o,["maxOutputTokens"],d);let f=a(e,["stopSequences"]);f!=null&&u(o,["stopSequences"],f);let p=a(e,["responseLogprobs"]);p!=null&&u(o,["responseLogprobs"],p);let h=a(e,["logprobs"]);h!=null&&u(o,["logprobs"],h);let g=a(e,["presencePenalty"]);g!=null&&u(o,["presencePenalty"],g);let m=a(e,["frequencyPenalty"]);m!=null&&u(o,["frequencyPenalty"],m);let y=a(e,["seed"]);y!=null&&u(o,["seed"],y);let E=a(e,["responseMimeType"]);E!=null&&u(o,["responseMimeType"],E);let v=a(e,["responseSchema"]);v!=null&&u(o,["responseSchema"],Dc(v));let T=a(e,["responseJsonSchema"]);if(T!=null&&u(o,["responseJsonSchema"],T),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let D=a(e,["safetySettings"]);if(n!==void 0&&D!=null){let Q=D;Array.isArray(Q)&&(Q=Q.map(Qe=>ZT(Qe))),u(n,["safetySettings"],Q)}let S=a(e,["tools"]);if(n!==void 0&&S!=null){let Q=Zn(S);Array.isArray(Q)&&(Q=Q.map(Qe=>XT(Kn(Qe)))),u(n,["tools"],Q)}let M=a(e,["toolConfig"]);if(n!==void 0&&M!=null&&u(n,["toolConfig"],QT(M)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let L=a(e,["cachedContent"]);n!==void 0&&L!=null&&u(n,["cachedContent"],It(t,L));let N=a(e,["responseModalities"]);N!=null&&u(o,["responseModalities"],N);let Z=a(e,["mediaResolution"]);Z!=null&&u(o,["mediaResolution"],Z);let P=a(e,["speechConfig"]);if(P!=null&&u(o,["speechConfig"],_c(P)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let $=a(e,["thinkingConfig"]);$!=null&&u(o,["thinkingConfig"],$);let ae=a(e,["imageConfig"]);ae!=null&&u(o,["imageConfig"],HT(ae));let Ct=a(e,["enableEnhancedCivicAnswers"]);return Ct!=null&&u(o,["enableEnhancedCivicAnswers"],Ct),o}function LT(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>vT(d))),u(e,["candidates"],c)}let r=a(t,["modelVersion"]);r!=null&&u(e,["modelVersion"],r);let i=a(t,["promptFeedback"]);i!=null&&u(e,["promptFeedback"],i);let s=a(t,["responseId"]);s!=null&&u(e,["responseId"],s);let l=a(t,["usageMetadata"]);return l!=null&&u(e,["usageMetadata"],l),e}function OT(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],Qn(t,o)),n}function VT(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],Qn(t,o)),n}function UT(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function BT(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function HT(t){let e={},n=a(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);let o=a(t,["imageSize"]);if(o!=null&&u(e,["imageSize"],o),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function $T(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["request","model"],q(t,o));let r=a(e,["contents"]);if(r!=null){let l=Oe(r);Array.isArray(l)&&(l=l.map(c=>_g(c))),u(n,["request","contents"],l)}let i=a(e,["metadata"]);i!=null&&u(n,["metadata"],i);let s=a(e,["config"]);return s!=null&&u(n,["request","generationConfig"],FT(t,s,a(n,["request"],{}))),n}function GT(t){let e={},n=a(t,["response"]);n!=null&&u(e,["response"],LT(n));let o=a(t,["error"]);return o!=null&&u(e,["error"],o),e}function qT(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);let r=a(t,["pageToken"]);if(e!==void 0&&r!=null&&u(e,["_query","pageToken"],r),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function zT(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);let r=a(t,["pageToken"]);e!==void 0&&r!=null&&u(e,["_query","pageToken"],r);let i=a(t,["filter"]);return e!==void 0&&i!=null&&u(e,["_query","filter"],i),n}function WT(t){let e={},n=a(t,["config"]);return n!=null&&qT(n,e),e}function JT(t){let e={},n=a(t,["config"]);return n!=null&&zT(n,e),e}function YT(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);let r=a(t,["operations"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Zi(s))),u(e,["batchJobs"],i)}return e}function jT(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);let r=a(t,["batchPredictionJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Hu(s))),u(e,["batchJobs"],i)}return e}function KT(t){let e={},n=a(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);let o=a(t,["codeExecutionResult"]);o!=null&&u(e,["codeExecutionResult"],o);let r=a(t,["executableCode"]);r!=null&&u(e,["executableCode"],r);let i=a(t,["fileData"]);i!=null&&u(e,["fileData"],RT(i));let s=a(t,["functionCall"]);s!=null&&u(e,["functionCall"],PT(s));let l=a(t,["functionResponse"]);l!=null&&u(e,["functionResponse"],l);let c=a(t,["inlineData"]);c!=null&&u(e,["inlineData"],gT(c));let d=a(t,["text"]);d!=null&&u(e,["text"],d);let f=a(t,["thought"]);f!=null&&u(e,["thought"],f);let p=a(t,["thoughtSignature"]);p!=null&&u(e,["thoughtSignature"],p);let h=a(t,["videoMetadata"]);return h!=null&&u(e,["videoMetadata"],h),e}function ZT(t){let e={},n=a(t,["category"]);if(n!=null&&u(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let o=a(t,["threshold"]);return o!=null&&u(e,["threshold"],o),e}function QT(t){let e={},n=a(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],kT(n));let o=a(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],o),e}function XT(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let o=a(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);let r=a(t,["computerUse"]);r!=null&&u(e,["computerUse"],r);let i=a(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);let s=a(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let l=a(t,["googleMaps"]);l!=null&&u(e,["googleMaps"],UT(l));let c=a(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],BT(c));let d=a(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}var Lt=(function(t){return t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents",t})(Lt||{}),Et=class{constructor(e,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,r)}init(e,n,o){var r,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!o||Object.keys(o).length===0?s={config:{}}:typeof o=="object"?s=Object.assign({},o):s=o,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(r=s.config)===null||r===void 0?void 0:r.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var $u=class extends Ke{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Et(Lt.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){let n=$h(this.apiClient,e),o=n._url,r=_("{model}:batchGenerateContent",o),l=n.batch.inputConfig.requests,c=l.requests,d=[];for(let f of c){let p=Object.assign({},f);if(p.systemInstruction){let h=p.systemInstruction;delete p.systemInstruction;let g=p.request;g.systemInstruction=h,p.request=g}d.push(p)}return l.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){let o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){let i=this.getGcsUri(e),s=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?o.dest=`${i.slice(0,-6)}/dest`:o.dest=`${i}_dest_${r}`;else if(s)o.dest=`${s}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=TT(this.apiClient,e);return l=_("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Hu(f))}else{let d=$h(this.apiClient,e);return l=_("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Zi(f))}}async createEmbeddingsInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=_T(this.apiClient,e);return i=_("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>Zi(c))}}async get(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=VT(this.apiClient,e);return l=_("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Hu(f))}else{let d=OT(this.apiClient,e);return l=_("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Zi(f))}}async cancel(e){var n,o,r,i;let s="",l={};if(this.apiClient.isVertexAI()){let c=yT(this.apiClient,e);s=_("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{let c=mT(this.apiClient,e);s=_("batches/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=JT(e);return l=_("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=jT(f),h=new us;return Object.assign(h,p),h})}else{let d=WT(e);return l=_("batches",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=YT(f),h=new us;return Object.assign(h,p),h})}}async delete(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=wT(this.apiClient,e);return l=_("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>AT(f))}else{let d=ST(this.apiClient,e);return l=_("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>MT(f))}}};function eD(t){let e={},n=a(t,["data"]);if(n!=null&&u(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function Gh(t){let e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>DD(i))),u(e,["parts"],r)}let o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function tD(t,e){let n={},o=a(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);let r=a(t,["expireTime"]);e!==void 0&&r!=null&&u(e,["expireTime"],r);let i=a(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);let s=a(t,["contents"]);if(e!==void 0&&s!=null){let f=Oe(s);Array.isArray(f)&&(f=f.map(p=>Gh(p))),u(e,["contents"],f)}let l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&u(e,["systemInstruction"],Gh(fe(l)));let c=a(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>SD(p))),u(e,["tools"],f)}let d=a(t,["toolConfig"]);if(e!==void 0&&d!=null&&u(e,["toolConfig"],_D(d)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function nD(t,e){let n={},o=a(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);let r=a(t,["expireTime"]);e!==void 0&&r!=null&&u(e,["expireTime"],r);let i=a(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);let s=a(t,["contents"]);if(e!==void 0&&s!=null){let p=Oe(s);Array.isArray(p)&&(p=p.map(h=>h)),u(e,["contents"],p)}let l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&u(e,["systemInstruction"],fe(l));let c=a(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(h=>wD(h))),u(e,["tools"],p)}let d=a(t,["toolConfig"]);e!==void 0&&d!=null&&u(e,["toolConfig"],d);let f=a(t,["kmsKeyName"]);return e!==void 0&&f!=null&&u(e,["encryption_spec","kmsKeyName"],f),n}function oD(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["model"],fg(t,o));let r=a(e,["config"]);return r!=null&&tD(r,n),n}function rD(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["model"],fg(t,o));let r=a(e,["config"]);return r!=null&&nD(r,n),n}function iD(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],It(t,o)),n}function sD(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],It(t,o)),n}function aD(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function lD(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function uD(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function cD(t){let e={},n=a(t,["id"]);n!=null&&u(e,["id"],n);let o=a(t,["args"]);o!=null&&u(e,["args"],o);let r=a(t,["name"]);if(r!=null&&u(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function dD(t){let e={},n=a(t,["mode"]);n!=null&&u(e,["mode"],n);let o=a(t,["allowedFunctionNames"]);if(o!=null&&u(e,["allowedFunctionNames"],o),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function fD(t){let e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=a(t,["description"]);n!=null&&u(e,["description"],n);let o=a(t,["name"]);o!=null&&u(e,["name"],o);let r=a(t,["parameters"]);r!=null&&u(e,["parameters"],r);let i=a(t,["parametersJsonSchema"]);i!=null&&u(e,["parametersJsonSchema"],i);let s=a(t,["response"]);s!=null&&u(e,["response"],s);let l=a(t,["responseJsonSchema"]);return l!=null&&u(e,["responseJsonSchema"],l),e}function pD(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],It(t,o)),n}function hD(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],It(t,o)),n}function gD(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function mD(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function yD(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);let r=a(t,["pageToken"]);return e!==void 0&&r!=null&&u(e,["_query","pageToken"],r),n}function vD(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);let r=a(t,["pageToken"]);return e!==void 0&&r!=null&&u(e,["_query","pageToken"],r),n}function ED(t){let e={},n=a(t,["config"]);return n!=null&&yD(n,e),e}function ID(t){let e={},n=a(t,["config"]);return n!=null&&vD(n,e),e}function CD(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);let r=a(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["cachedContents"],i)}return e}function TD(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);let r=a(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["cachedContents"],i)}return e}function DD(t){let e={},n=a(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);let o=a(t,["codeExecutionResult"]);o!=null&&u(e,["codeExecutionResult"],o);let r=a(t,["executableCode"]);r!=null&&u(e,["executableCode"],r);let i=a(t,["fileData"]);i!=null&&u(e,["fileData"],uD(i));let s=a(t,["functionCall"]);s!=null&&u(e,["functionCall"],cD(s));let l=a(t,["functionResponse"]);l!=null&&u(e,["functionResponse"],l);let c=a(t,["inlineData"]);c!=null&&u(e,["inlineData"],eD(c));let d=a(t,["text"]);d!=null&&u(e,["text"],d);let f=a(t,["thought"]);f!=null&&u(e,["thought"],f);let p=a(t,["thoughtSignature"]);p!=null&&u(e,["thoughtSignature"],p);let h=a(t,["videoMetadata"]);return h!=null&&u(e,["videoMetadata"],h),e}function _D(t){let e={},n=a(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],dD(n));let o=a(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],o),e}function SD(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let o=a(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);let r=a(t,["computerUse"]);r!=null&&u(e,["computerUse"],r);let i=a(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);let s=a(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let l=a(t,["googleMaps"]);l!=null&&u(e,["googleMaps"],gD(l));let c=a(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],mD(c));let d=a(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function wD(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>fD(h))),u(e,["functionDeclarations"],p)}let o=a(t,["retrieval"]);o!=null&&u(e,["retrieval"],o);let r=a(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);let i=a(t,["computerUse"]);if(i!=null&&u(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let s=a(t,["codeExecution"]);s!=null&&u(e,["codeExecution"],s);let l=a(t,["enterpriseWebSearch"]);l!=null&&u(e,["enterpriseWebSearch"],l);let c=a(t,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);let d=a(t,["googleSearch"]);d!=null&&u(e,["googleSearch"],d);let f=a(t,["urlContext"]);return f!=null&&u(e,["urlContext"],f),e}function MD(t,e){let n={},o=a(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);let r=a(t,["expireTime"]);return e!==void 0&&r!=null&&u(e,["expireTime"],r),n}function AD(t,e){let n={},o=a(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);let r=a(t,["expireTime"]);return e!==void 0&&r!=null&&u(e,["expireTime"],r),n}function bD(t,e){let n={},o=a(e,["name"]);o!=null&&u(n,["_url","name"],It(t,o));let r=a(e,["config"]);return r!=null&&MD(r,n),n}function ND(t,e){let n={},o=a(e,["name"]);o!=null&&u(n,["_url","name"],It(t,o));let r=a(e,["config"]);return r!=null&&AD(r,n),n}var Gu=class extends Ke{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Et(Lt.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=rD(this.apiClient,e);return l=_("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let d=oD(this.apiClient,e);return l=_("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=hD(this.apiClient,e);return l=_("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let d=pD(this.apiClient,e);return l=_("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=sD(this.apiClient,e);return l=_("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=lD(f),h=new as;return Object.assign(h,p),h})}else{let d=iD(this.apiClient,e);return l=_("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=aD(f),h=new as;return Object.assign(h,p),h})}}async update(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=ND(this.apiClient,e);return l=_("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let d=bD(this.apiClient,e);return l=_("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=ID(e);return l=_("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=TD(f),h=new ls;return Object.assign(h,p),h})}else{let d=ED(e);return l=_("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=CD(f),h=new ls;return Object.assign(h,p),h})}}};function ds(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}function qh(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(t){return this instanceof R?(this.v=t,this):new R(t)}function Ye(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(m){return Promise.resolve(m).then(g,p)}}function l(g,m){o[g]&&(r[g]=function(y){return new Promise(function(E,v){i.push([g,y,E,v])>1||c(g,y)})},m&&(r[g]=m(r[g])))}function c(g,m){try{d(o[g](m))}catch(y){h(i[0][3],y)}}function d(g){g.value instanceof R?Promise.resolve(g.value.v).then(f,p):h(i[0][2],g)}function f(g){c("next",g)}function p(g){c("throw",g)}function h(g,m){g(m),i.shift(),i.length&&c(i[0][0],i[0][1])}}function je(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof qh=="function"?qh(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(i){n[i]=t[i]&&function(s){return new Promise(function(l,c){s=t[i](s),r(l,c,s.done,s.value)})}}function r(i,s,l,c){Promise.resolve(c).then(function(d){i({value:d,done:l})},s)}}function xD(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;let n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Sg(n)}function Sg(t){if(t.parts===void 0||t.parts.length===0)return!1;for(let e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function RD(t){if(t.length!==0){for(let e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function zh(t){if(t===void 0||t.length===0)return[];let e=[],n=t.length,o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{let r=[],i=!0;for(;o<n&&t[o].role==="model";)r.push(t[o]),i&&!Sg(t[o])&&(i=!1),o++;i?e.push(...r):e.pop()}return e}var qu=class{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new zu(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},zu=class{constructor(e,n,o,r={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),RD(i)}async sendMessage(e){var n;await this.sendPromise;let o=fe(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,s,l;let c=await r,d=(s=(i=c.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,f=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length,h=[];f!=null&&(h=(l=f.slice(p))!==null&&l!==void 0?l:[]);let g=d?[d]:[];this.recordHistory(o,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;let o=fe(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});let i=await r;return this.processStreamResponse(i,o)}getHistory(e=!1){let n=e?zh(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Ye(this,arguments,function*(){var r,i,s,l,c,d;let f=[];try{for(var p=!0,h=je(e),g;g=yield R(h.next()),r=g.done,!r;p=!0){l=g.value,p=!1;let m=l;if(xD(m)){let y=(d=(c=m.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;y!==void 0&&f.push(y)}yield yield R(m)}}catch(m){i={error:m}}finally{try{!p&&!r&&(s=h.return)&&(yield R(s.call(h)))}finally{if(i)throw i.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let r=[];n.length>0&&n.every(i=>i.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...zh(o)):this.history.push(e),this.history.push(...r)}};var fs=class t extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,t.prototype)}};function PD(t){let e={},n=a(t,["file"]);return n!=null&&u(e,["file"],n),e}function kD(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function FD(t){let e={},n=a(t,["name"]);return n!=null&&u(e,["_url","file"],vg(n)),e}function LD(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function OD(t){let e={},n=a(t,["name"]);return n!=null&&u(e,["_url","file"],vg(n)),e}function VD(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);let r=a(t,["pageToken"]);return e!==void 0&&r!=null&&u(e,["_query","pageToken"],r),n}function UD(t){let e={},n=a(t,["config"]);return n!=null&&VD(n,e),e}function BD(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);let r=a(t,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["files"],i)}return e}var Wu=class extends Ke{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Et(Lt.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=UD(e);return i=_("files",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{let d=BD(c),f=new ku;return Object.assign(f,d),f})}}async createInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=PD(e);return i=_("upload/v1beta/files",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{let d=kD(c),f=new Fu;return Object.assign(f,d),f})}}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=OD(e);return i=_("files/{file}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=FD(e);return i=_("files/{file}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{let d=LD(c),f=new Lu;return Object.assign(f,d),f})}}};function Qi(t){let e={},n=a(t,["data"]);if(n!=null&&u(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function HD(t){let e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>o_(i))),u(e,["parts"],r)}let o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function $D(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function GD(t){let e={},n=a(t,["id"]);n!=null&&u(e,["id"],n);let o=a(t,["args"]);o!=null&&u(e,["args"],o);let r=a(t,["name"]);if(r!=null&&u(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qD(t){let e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=a(t,["description"]);n!=null&&u(e,["description"],n);let o=a(t,["name"]);o!=null&&u(e,["name"],o);let r=a(t,["parameters"]);r!=null&&u(e,["parameters"],r);let i=a(t,["parametersJsonSchema"]);i!=null&&u(e,["parametersJsonSchema"],i);let s=a(t,["response"]);s!=null&&u(e,["response"],s);let l=a(t,["responseJsonSchema"]);return l!=null&&u(e,["responseJsonSchema"],l),e}function zD(t){let e={},n=a(t,["modelSelectionConfig"]);n!=null&&u(e,["modelConfig"],n);let o=a(t,["responseJsonSchema"]);o!=null&&u(e,["responseJsonSchema"],o);let r=a(t,["audioTimestamp"]);r!=null&&u(e,["audioTimestamp"],r);let i=a(t,["candidateCount"]);i!=null&&u(e,["candidateCount"],i);let s=a(t,["enableAffectiveDialog"]);s!=null&&u(e,["enableAffectiveDialog"],s);let l=a(t,["frequencyPenalty"]);l!=null&&u(e,["frequencyPenalty"],l);let c=a(t,["logprobs"]);c!=null&&u(e,["logprobs"],c);let d=a(t,["maxOutputTokens"]);d!=null&&u(e,["maxOutputTokens"],d);let f=a(t,["mediaResolution"]);f!=null&&u(e,["mediaResolution"],f);let p=a(t,["presencePenalty"]);p!=null&&u(e,["presencePenalty"],p);let h=a(t,["responseLogprobs"]);h!=null&&u(e,["responseLogprobs"],h);let g=a(t,["responseMimeType"]);g!=null&&u(e,["responseMimeType"],g);let m=a(t,["responseModalities"]);m!=null&&u(e,["responseModalities"],m);let y=a(t,["responseSchema"]);y!=null&&u(e,["responseSchema"],y);let E=a(t,["routingConfig"]);E!=null&&u(e,["routingConfig"],E);let v=a(t,["seed"]);v!=null&&u(e,["seed"],v);let T=a(t,["speechConfig"]);T!=null&&u(e,["speechConfig"],T);let D=a(t,["stopSequences"]);D!=null&&u(e,["stopSequences"],D);let S=a(t,["temperature"]);S!=null&&u(e,["temperature"],S);let M=a(t,["thinkingConfig"]);M!=null&&u(e,["thinkingConfig"],M);let L=a(t,["topK"]);L!=null&&u(e,["topK"],L);let N=a(t,["topP"]);if(N!=null&&u(e,["topP"],N),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function WD(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function JD(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function YD(t,e){let n={},o=a(t,["generationConfig"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig"],o);let r=a(t,["responseModalities"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig","responseModalities"],r);let i=a(t,["temperature"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","temperature"],i);let s=a(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);let l=a(t,["topK"]);e!==void 0&&l!=null&&u(e,["setup","generationConfig","topK"],l);let c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);let d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);let f=a(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);let p=a(t,["speechConfig"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","speechConfig"],Sc(p));let h=a(t,["thinkingConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","thinkingConfig"],h);let g=a(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],g);let m=a(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["setup","systemInstruction"],HD(fe(m)));let y=a(t,["tools"]);if(e!==void 0&&y!=null){let L=Zn(y);Array.isArray(L)&&(L=L.map(N=>i_(Kn(N)))),u(e,["setup","tools"],L)}let E=a(t,["sessionResumption"]);e!==void 0&&E!=null&&u(e,["setup","sessionResumption"],r_(E));let v=a(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&u(e,["setup","inputAudioTranscription"],v);let T=a(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&u(e,["setup","outputAudioTranscription"],T);let D=a(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&u(e,["setup","realtimeInputConfig"],D);let S=a(t,["contextWindowCompression"]);e!==void 0&&S!=null&&u(e,["setup","contextWindowCompression"],S);let M=a(t,["proactivity"]);if(e!==void 0&&M!=null&&u(e,["setup","proactivity"],M),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function jD(t,e){let n={},o=a(t,["generationConfig"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig"],zD(o));let r=a(t,["responseModalities"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig","responseModalities"],r);let i=a(t,["temperature"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","temperature"],i);let s=a(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);let l=a(t,["topK"]);e!==void 0&&l!=null&&u(e,["setup","generationConfig","topK"],l);let c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);let d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);let f=a(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);let p=a(t,["speechConfig"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","speechConfig"],Sc(p));let h=a(t,["thinkingConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","thinkingConfig"],h);let g=a(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],g);let m=a(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["setup","systemInstruction"],fe(m));let y=a(t,["tools"]);if(e!==void 0&&y!=null){let N=Zn(y);Array.isArray(N)&&(N=N.map(Z=>s_(Kn(Z)))),u(e,["setup","tools"],N)}let E=a(t,["sessionResumption"]);e!==void 0&&E!=null&&u(e,["setup","sessionResumption"],E);let v=a(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&u(e,["setup","inputAudioTranscription"],v);let T=a(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&u(e,["setup","outputAudioTranscription"],T);let D=a(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&u(e,["setup","realtimeInputConfig"],D);let S=a(t,["contextWindowCompression"]);e!==void 0&&S!=null&&u(e,["setup","contextWindowCompression"],S);let M=a(t,["proactivity"]);e!==void 0&&M!=null&&u(e,["setup","proactivity"],M);let L=a(t,["explicitVadSignal"]);return e!==void 0&&L!=null&&u(e,["setup","explicitVadSignal"],L),n}function KD(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["setup","model"],q(t,o));let r=a(e,["config"]);return r!=null&&u(n,["config"],YD(r,n)),n}function ZD(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["setup","model"],q(t,o));let r=a(e,["config"]);return r!=null&&u(n,["config"],jD(r,n)),n}function QD(t){let e={},n=a(t,["musicGenerationConfig"]);return n!=null&&u(e,["musicGenerationConfig"],n),e}function XD(t){let e={},n=a(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),u(e,["weightedPrompts"],o)}return e}function e_(t){let e={},n=a(t,["media"]);if(n!=null){let d=pg(n);Array.isArray(d)&&(d=d.map(f=>Qi(f))),u(e,["mediaChunks"],d)}let o=a(t,["audio"]);o!=null&&u(e,["audio"],Qi(gg(o)));let r=a(t,["audioStreamEnd"]);r!=null&&u(e,["audioStreamEnd"],r);let i=a(t,["video"]);i!=null&&u(e,["video"],Qi(hg(i)));let s=a(t,["text"]);s!=null&&u(e,["text"],s);let l=a(t,["activityStart"]);l!=null&&u(e,["activityStart"],l);let c=a(t,["activityEnd"]);return c!=null&&u(e,["activityEnd"],c),e}function t_(t){let e={},n=a(t,["media"]);if(n!=null){let d=pg(n);Array.isArray(d)&&(d=d.map(f=>f)),u(e,["mediaChunks"],d)}let o=a(t,["audio"]);o!=null&&u(e,["audio"],gg(o));let r=a(t,["audioStreamEnd"]);r!=null&&u(e,["audioStreamEnd"],r);let i=a(t,["video"]);i!=null&&u(e,["video"],hg(i));let s=a(t,["text"]);s!=null&&u(e,["text"],s);let l=a(t,["activityStart"]);l!=null&&u(e,["activityStart"],l);let c=a(t,["activityEnd"]);return c!=null&&u(e,["activityEnd"],c),e}function n_(t){let e={},n=a(t,["setupComplete"]);n!=null&&u(e,["setupComplete"],n);let o=a(t,["serverContent"]);o!=null&&u(e,["serverContent"],o);let r=a(t,["toolCall"]);r!=null&&u(e,["toolCall"],r);let i=a(t,["toolCallCancellation"]);i!=null&&u(e,["toolCallCancellation"],i);let s=a(t,["usageMetadata"]);s!=null&&u(e,["usageMetadata"],a_(s));let l=a(t,["goAway"]);l!=null&&u(e,["goAway"],l);let c=a(t,["sessionResumptionUpdate"]);c!=null&&u(e,["sessionResumptionUpdate"],c);let d=a(t,["voiceActivityDetectionSignal"]);return d!=null&&u(e,["voiceActivityDetectionSignal"],d),e}function o_(t){let e={},n=a(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);let o=a(t,["codeExecutionResult"]);o!=null&&u(e,["codeExecutionResult"],o);let r=a(t,["executableCode"]);r!=null&&u(e,["executableCode"],r);let i=a(t,["fileData"]);i!=null&&u(e,["fileData"],$D(i));let s=a(t,["functionCall"]);s!=null&&u(e,["functionCall"],GD(s));let l=a(t,["functionResponse"]);l!=null&&u(e,["functionResponse"],l);let c=a(t,["inlineData"]);c!=null&&u(e,["inlineData"],Qi(c));let d=a(t,["text"]);d!=null&&u(e,["text"],d);let f=a(t,["thought"]);f!=null&&u(e,["thought"],f);let p=a(t,["thoughtSignature"]);p!=null&&u(e,["thoughtSignature"],p);let h=a(t,["videoMetadata"]);return h!=null&&u(e,["videoMetadata"],h),e}function r_(t){let e={},n=a(t,["handle"]);if(n!=null&&u(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function i_(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let o=a(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);let r=a(t,["computerUse"]);r!=null&&u(e,["computerUse"],r);let i=a(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);let s=a(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let l=a(t,["googleMaps"]);l!=null&&u(e,["googleMaps"],WD(l));let c=a(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],JD(c));let d=a(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function s_(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>qD(h))),u(e,["functionDeclarations"],p)}let o=a(t,["retrieval"]);o!=null&&u(e,["retrieval"],o);let r=a(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);let i=a(t,["computerUse"]);if(i!=null&&u(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let s=a(t,["codeExecution"]);s!=null&&u(e,["codeExecution"],s);let l=a(t,["enterpriseWebSearch"]);l!=null&&u(e,["enterpriseWebSearch"],l);let c=a(t,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);let d=a(t,["googleSearch"]);d!=null&&u(e,["googleSearch"],d);let f=a(t,["urlContext"]);return f!=null&&u(e,["urlContext"],f),e}function a_(t){let e={},n=a(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);let o=a(t,["cachedContentTokenCount"]);o!=null&&u(e,["cachedContentTokenCount"],o);let r=a(t,["candidatesTokenCount"]);r!=null&&u(e,["responseTokenCount"],r);let i=a(t,["toolUsePromptTokenCount"]);i!=null&&u(e,["toolUsePromptTokenCount"],i);let s=a(t,["thoughtsTokenCount"]);s!=null&&u(e,["thoughtsTokenCount"],s);let l=a(t,["totalTokenCount"]);l!=null&&u(e,["totalTokenCount"],l);let c=a(t,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(m=>m)),u(e,["promptTokensDetails"],g)}let d=a(t,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(m=>m)),u(e,["cacheTokensDetails"],g)}let f=a(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(m=>m)),u(e,["responseTokensDetails"],g)}let p=a(t,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(m=>m)),u(e,["toolUsePromptTokensDetails"],g)}let h=a(t,["trafficType"]);return h!=null&&u(e,["trafficType"],h),e}function l_(t){let e={},n=a(t,["data"]);if(n!=null&&u(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function u_(t){let e={},n=a(t,["content"]);n!=null&&u(e,["content"],n);let o=a(t,["citationMetadata"]);o!=null&&u(e,["citationMetadata"],c_(o));let r=a(t,["tokenCount"]);r!=null&&u(e,["tokenCount"],r);let i=a(t,["finishReason"]);i!=null&&u(e,["finishReason"],i);let s=a(t,["avgLogprobs"]);s!=null&&u(e,["avgLogprobs"],s);let l=a(t,["groundingMetadata"]);l!=null&&u(e,["groundingMetadata"],l);let c=a(t,["index"]);c!=null&&u(e,["index"],c);let d=a(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);let f=a(t,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>g)),u(e,["safetyRatings"],h)}let p=a(t,["urlContextMetadata"]);return p!=null&&u(e,["urlContextMetadata"],p),e}function c_(t){let e={},n=a(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),u(e,["citations"],o)}return e}function d_(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],q(t,o));let r=a(e,["contents"]);if(r!=null){let i=Oe(r);Array.isArray(i)&&(i=i.map(s=>s)),u(n,["contents"],i)}return n}function f_(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),u(e,["tokensInfo"],r)}return e}function p_(t){let e={},n=a(t,["values"]);n!=null&&u(e,["values"],n);let o=a(t,["statistics"]);return o!=null&&u(e,["statistics"],h_(o)),e}function h_(t){let e={},n=a(t,["truncated"]);n!=null&&u(e,["truncated"],n);let o=a(t,["token_count"]);return o!=null&&u(e,["tokenCount"],o),e}function Ms(t){let e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>DS(i))),u(e,["parts"],r)}let o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function g_(t){let e={},n=a(t,["controlType"]);n!=null&&u(e,["controlType"],n);let o=a(t,["enableControlImageComputation"]);return o!=null&&u(e,["computeControl"],o),e}function m_(t){let e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function y_(t,e){let n={},o=a(t,["systemInstruction"]);e!==void 0&&o!=null&&u(e,["systemInstruction"],fe(o));let r=a(t,["tools"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>bg(l))),u(e,["tools"],s)}let i=a(t,["generationConfig"]);return e!==void 0&&i!=null&&u(e,["generationConfig"],lS(i)),n}function v_(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],q(t,o));let r=a(e,["contents"]);if(r!=null){let s=Oe(r);Array.isArray(s)&&(s=s.map(l=>Ms(l))),u(n,["contents"],s)}let i=a(e,["config"]);return i!=null&&m_(i),n}function E_(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],q(t,o));let r=a(e,["contents"]);if(r!=null){let s=Oe(r);Array.isArray(s)&&(s=s.map(l=>l)),u(n,["contents"],s)}let i=a(e,["config"]);return i!=null&&y_(i,n),n}function I_(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["totalTokens"]);o!=null&&u(e,["totalTokens"],o);let r=a(t,["cachedContentTokenCount"]);return r!=null&&u(e,["cachedContentTokenCount"],r),e}function C_(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["totalTokens"]);return o!=null&&u(e,["totalTokens"],o),e}function T_(t,e){let n={},o=a(e,["model"]);return o!=null&&u(n,["_url","name"],q(t,o)),n}function D_(t,e){let n={},o=a(e,["model"]);return o!=null&&u(n,["_url","name"],q(t,o)),n}function __(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function S_(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function w_(t,e){let n={},o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);let r=a(t,["negativePrompt"]);e!==void 0&&r!=null&&u(e,["parameters","negativePrompt"],r);let i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);let s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);let l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&u(e,["parameters","guidanceScale"],l);let c=a(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);let d=a(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&u(e,["parameters","safetySetting"],d);let f=a(t,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);let p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&u(e,["parameters","includeSafetyAttributes"],p);let h=a(t,["includeRaiReason"]);e!==void 0&&h!=null&&u(e,["parameters","includeRaiReason"],h);let g=a(t,["language"]);e!==void 0&&g!=null&&u(e,["parameters","language"],g);let m=a(t,["outputMimeType"]);e!==void 0&&m!=null&&u(e,["parameters","outputOptions","mimeType"],m);let y=a(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&u(e,["parameters","outputOptions","compressionQuality"],y);let E=a(t,["addWatermark"]);e!==void 0&&E!=null&&u(e,["parameters","addWatermark"],E);let v=a(t,["labels"]);e!==void 0&&v!=null&&u(e,["labels"],v);let T=a(t,["editMode"]);e!==void 0&&T!=null&&u(e,["parameters","editMode"],T);let D=a(t,["baseSteps"]);return e!==void 0&&D!=null&&u(e,["parameters","editConfig","baseSteps"],D),n}function M_(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],q(t,o));let r=a(e,["prompt"]);r!=null&&u(n,["instances[0]","prompt"],r);let i=a(e,["referenceImages"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>bS(c))),u(n,["instances[0]","referenceImages"],l)}let s=a(e,["config"]);return s!=null&&w_(s,n),n}function A_(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>As(i))),u(e,["generatedImages"],r)}return e}function b_(t,e){let n={},o=a(t,["taskType"]);e!==void 0&&o!=null&&u(e,["requests[]","taskType"],o);let r=a(t,["title"]);e!==void 0&&r!=null&&u(e,["requests[]","title"],r);let i=a(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&u(e,["requests[]","outputDimensionality"],i),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function N_(t,e){let n={},o=a(t,["taskType"]);e!==void 0&&o!=null&&u(e,["instances[]","task_type"],o);let r=a(t,["title"]);e!==void 0&&r!=null&&u(e,["instances[]","title"],r);let i=a(t,["outputDimensionality"]);e!==void 0&&i!=null&&u(e,["parameters","outputDimensionality"],i);let s=a(t,["mimeType"]);e!==void 0&&s!=null&&u(e,["instances[]","mimeType"],s);let l=a(t,["autoTruncate"]);return e!==void 0&&l!=null&&u(e,["parameters","autoTruncate"],l),n}function x_(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],q(t,o));let r=a(e,["contents"]);if(r!=null){let l=Tc(t,r);Array.isArray(l)&&(l=l.map(c=>c)),u(n,["requests[]","content"],l)}let i=a(e,["config"]);i!=null&&b_(i,n);let s=a(e,["model"]);return s!==void 0&&u(n,["requests[]","model"],q(t,s)),n}function R_(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],q(t,o));let r=a(e,["contents"]);if(r!=null){let s=Tc(t,r);Array.isArray(s)&&(s=s.map(l=>l)),u(n,["instances[]","content"],s)}let i=a(e,["config"]);return i!=null&&N_(i,n),n}function P_(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["embeddings"],i)}let r=a(t,["metadata"]);return r!=null&&u(e,["metadata"],r),e}function k_(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["predictions[]","embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>p_(s))),u(e,["embeddings"],i)}let r=a(t,["metadata"]);return r!=null&&u(e,["metadata"],r),e}function F_(t){let e={},n=a(t,["endpoint"]);n!=null&&u(e,["name"],n);let o=a(t,["deployedModelId"]);return o!=null&&u(e,["deployedModelId"],o),e}function L_(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function O_(t){let e={},n=a(t,["id"]);n!=null&&u(e,["id"],n);let o=a(t,["args"]);o!=null&&u(e,["args"],o);let r=a(t,["name"]);if(r!=null&&u(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function V_(t){let e={},n=a(t,["mode"]);n!=null&&u(e,["mode"],n);let o=a(t,["allowedFunctionNames"]);if(o!=null&&u(e,["allowedFunctionNames"],o),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function U_(t){let e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=a(t,["description"]);n!=null&&u(e,["description"],n);let o=a(t,["name"]);o!=null&&u(e,["name"],o);let r=a(t,["parameters"]);r!=null&&u(e,["parameters"],r);let i=a(t,["parametersJsonSchema"]);i!=null&&u(e,["parametersJsonSchema"],i);let s=a(t,["response"]);s!=null&&u(e,["response"],s);let l=a(t,["responseJsonSchema"]);return l!=null&&u(e,["responseJsonSchema"],l),e}function B_(t,e,n){let o={},r=a(e,["systemInstruction"]);n!==void 0&&r!=null&&u(n,["systemInstruction"],Ms(fe(r)));let i=a(e,["temperature"]);i!=null&&u(o,["temperature"],i);let s=a(e,["topP"]);s!=null&&u(o,["topP"],s);let l=a(e,["topK"]);l!=null&&u(o,["topK"],l);let c=a(e,["candidateCount"]);c!=null&&u(o,["candidateCount"],c);let d=a(e,["maxOutputTokens"]);d!=null&&u(o,["maxOutputTokens"],d);let f=a(e,["stopSequences"]);f!=null&&u(o,["stopSequences"],f);let p=a(e,["responseLogprobs"]);p!=null&&u(o,["responseLogprobs"],p);let h=a(e,["logprobs"]);h!=null&&u(o,["logprobs"],h);let g=a(e,["presencePenalty"]);g!=null&&u(o,["presencePenalty"],g);let m=a(e,["frequencyPenalty"]);m!=null&&u(o,["frequencyPenalty"],m);let y=a(e,["seed"]);y!=null&&u(o,["seed"],y);let E=a(e,["responseMimeType"]);E!=null&&u(o,["responseMimeType"],E);let v=a(e,["responseSchema"]);v!=null&&u(o,["responseSchema"],Dc(v));let T=a(e,["responseJsonSchema"]);if(T!=null&&u(o,["responseJsonSchema"],T),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let D=a(e,["safetySettings"]);if(n!==void 0&&D!=null){let Q=D;Array.isArray(Q)&&(Q=Q.map(Qe=>NS(Qe))),u(n,["safetySettings"],Q)}let S=a(e,["tools"]);if(n!==void 0&&S!=null){let Q=Zn(S);Array.isArray(Q)&&(Q=Q.map(Qe=>OS(Kn(Qe)))),u(n,["tools"],Q)}let M=a(e,["toolConfig"]);if(n!==void 0&&M!=null&&u(n,["toolConfig"],LS(M)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let L=a(e,["cachedContent"]);n!==void 0&&L!=null&&u(n,["cachedContent"],It(t,L));let N=a(e,["responseModalities"]);N!=null&&u(o,["responseModalities"],N);let Z=a(e,["mediaResolution"]);Z!=null&&u(o,["mediaResolution"],Z);let P=a(e,["speechConfig"]);if(P!=null&&u(o,["speechConfig"],_c(P)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let $=a(e,["thinkingConfig"]);$!=null&&u(o,["thinkingConfig"],$);let ae=a(e,["imageConfig"]);ae!=null&&u(o,["imageConfig"],pS(ae));let Ct=a(e,["enableEnhancedCivicAnswers"]);return Ct!=null&&u(o,["enableEnhancedCivicAnswers"],Ct),o}function H_(t,e,n){let o={},r=a(e,["systemInstruction"]);n!==void 0&&r!=null&&u(n,["systemInstruction"],fe(r));let i=a(e,["temperature"]);i!=null&&u(o,["temperature"],i);let s=a(e,["topP"]);s!=null&&u(o,["topP"],s);let l=a(e,["topK"]);l!=null&&u(o,["topK"],l);let c=a(e,["candidateCount"]);c!=null&&u(o,["candidateCount"],c);let d=a(e,["maxOutputTokens"]);d!=null&&u(o,["maxOutputTokens"],d);let f=a(e,["stopSequences"]);f!=null&&u(o,["stopSequences"],f);let p=a(e,["responseLogprobs"]);p!=null&&u(o,["responseLogprobs"],p);let h=a(e,["logprobs"]);h!=null&&u(o,["logprobs"],h);let g=a(e,["presencePenalty"]);g!=null&&u(o,["presencePenalty"],g);let m=a(e,["frequencyPenalty"]);m!=null&&u(o,["frequencyPenalty"],m);let y=a(e,["seed"]);y!=null&&u(o,["seed"],y);let E=a(e,["responseMimeType"]);E!=null&&u(o,["responseMimeType"],E);let v=a(e,["responseSchema"]);v!=null&&u(o,["responseSchema"],Dc(v));let T=a(e,["responseJsonSchema"]);T!=null&&u(o,["responseJsonSchema"],T);let D=a(e,["routingConfig"]);D!=null&&u(o,["routingConfig"],D);let S=a(e,["modelSelectionConfig"]);S!=null&&u(o,["modelConfig"],S);let M=a(e,["safetySettings"]);if(n!==void 0&&M!=null){let ut=M;Array.isArray(ut)&&(ut=ut.map(Rs=>Rs)),u(n,["safetySettings"],ut)}let L=a(e,["tools"]);if(n!==void 0&&L!=null){let ut=Zn(L);Array.isArray(ut)&&(ut=ut.map(Rs=>bg(Kn(Rs)))),u(n,["tools"],ut)}let N=a(e,["toolConfig"]);n!==void 0&&N!=null&&u(n,["toolConfig"],N);let Z=a(e,["labels"]);n!==void 0&&Z!=null&&u(n,["labels"],Z);let P=a(e,["cachedContent"]);n!==void 0&&P!=null&&u(n,["cachedContent"],It(t,P));let $=a(e,["responseModalities"]);$!=null&&u(o,["responseModalities"],$);let ae=a(e,["mediaResolution"]);ae!=null&&u(o,["mediaResolution"],ae);let Ct=a(e,["speechConfig"]);Ct!=null&&u(o,["speechConfig"],_c(Ct));let Q=a(e,["audioTimestamp"]);Q!=null&&u(o,["audioTimestamp"],Q);let Qe=a(e,["thinkingConfig"]);Qe!=null&&u(o,["thinkingConfig"],Qe);let Mc=a(e,["imageConfig"]);if(Mc!=null&&u(o,["imageConfig"],hS(Mc)),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function Wh(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],q(t,o));let r=a(e,["contents"]);if(r!=null){let s=Oe(r);Array.isArray(s)&&(s=s.map(l=>Ms(l))),u(n,["contents"],s)}let i=a(e,["config"]);return i!=null&&u(n,["generationConfig"],B_(t,i,n)),n}function Jh(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],q(t,o));let r=a(e,["contents"]);if(r!=null){let s=Oe(r);Array.isArray(s)&&(s=s.map(l=>l)),u(n,["contents"],s)}let i=a(e,["config"]);return i!=null&&u(n,["generationConfig"],H_(t,i,n)),n}function Yh(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>u_(d))),u(e,["candidates"],c)}let r=a(t,["modelVersion"]);r!=null&&u(e,["modelVersion"],r);let i=a(t,["promptFeedback"]);i!=null&&u(e,["promptFeedback"],i);let s=a(t,["responseId"]);s!=null&&u(e,["responseId"],s);let l=a(t,["usageMetadata"]);return l!=null&&u(e,["usageMetadata"],l),e}function jh(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>f)),u(e,["candidates"],d)}let r=a(t,["createTime"]);r!=null&&u(e,["createTime"],r);let i=a(t,["modelVersion"]);i!=null&&u(e,["modelVersion"],i);let s=a(t,["promptFeedback"]);s!=null&&u(e,["promptFeedback"],s);let l=a(t,["responseId"]);l!=null&&u(e,["responseId"],l);let c=a(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function $_(t,e){let n={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);let r=a(t,["aspectRatio"]);e!==void 0&&r!=null&&u(e,["parameters","aspectRatio"],r);let i=a(t,["guidanceScale"]);if(e!==void 0&&i!=null&&u(e,["parameters","guidanceScale"],i),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=a(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&u(e,["parameters","safetySetting"],s);let l=a(t,["personGeneration"]);e!==void 0&&l!=null&&u(e,["parameters","personGeneration"],l);let c=a(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&u(e,["parameters","includeSafetyAttributes"],c);let d=a(t,["includeRaiReason"]);e!==void 0&&d!=null&&u(e,["parameters","includeRaiReason"],d);let f=a(t,["language"]);e!==void 0&&f!=null&&u(e,["parameters","language"],f);let p=a(t,["outputMimeType"]);e!==void 0&&p!=null&&u(e,["parameters","outputOptions","mimeType"],p);let h=a(t,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&u(e,["parameters","outputOptions","compressionQuality"],h),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let g=a(t,["imageSize"]);if(e!==void 0&&g!=null&&u(e,["parameters","sampleImageSize"],g),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function G_(t,e){let n={},o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);let r=a(t,["negativePrompt"]);e!==void 0&&r!=null&&u(e,["parameters","negativePrompt"],r);let i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);let s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);let l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&u(e,["parameters","guidanceScale"],l);let c=a(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);let d=a(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&u(e,["parameters","safetySetting"],d);let f=a(t,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);let p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&u(e,["parameters","includeSafetyAttributes"],p);let h=a(t,["includeRaiReason"]);e!==void 0&&h!=null&&u(e,["parameters","includeRaiReason"],h);let g=a(t,["language"]);e!==void 0&&g!=null&&u(e,["parameters","language"],g);let m=a(t,["outputMimeType"]);e!==void 0&&m!=null&&u(e,["parameters","outputOptions","mimeType"],m);let y=a(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&u(e,["parameters","outputOptions","compressionQuality"],y);let E=a(t,["addWatermark"]);e!==void 0&&E!=null&&u(e,["parameters","addWatermark"],E);let v=a(t,["labels"]);e!==void 0&&v!=null&&u(e,["labels"],v);let T=a(t,["imageSize"]);e!==void 0&&T!=null&&u(e,["parameters","sampleImageSize"],T);let D=a(t,["enhancePrompt"]);return e!==void 0&&D!=null&&u(e,["parameters","enhancePrompt"],D),n}function q_(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],q(t,o));let r=a(e,["prompt"]);r!=null&&u(n,["instances[0]","prompt"],r);let i=a(e,["config"]);return i!=null&&$_(i,n),n}function z_(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],q(t,o));let r=a(e,["prompt"]);r!=null&&u(n,["instances[0]","prompt"],r);let i=a(e,["config"]);return i!=null&&G_(i,n),n}function W_(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>rS(s))),u(e,["generatedImages"],i)}let r=a(t,["positivePromptSafetyAttributes"]);return r!=null&&u(e,["positivePromptSafetyAttributes"],Mg(r)),e}function J_(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>As(s))),u(e,["generatedImages"],i)}let r=a(t,["positivePromptSafetyAttributes"]);return r!=null&&u(e,["positivePromptSafetyAttributes"],Ag(r)),e}function Y_(t,e){let n={},o=a(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let r=a(t,["durationSeconds"]);if(e!==void 0&&r!=null&&u(e,["parameters","durationSeconds"],r),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let i=a(t,["aspectRatio"]);e!==void 0&&i!=null&&u(e,["parameters","aspectRatio"],i);let s=a(t,["resolution"]);e!==void 0&&s!=null&&u(e,["parameters","resolution"],s);let l=a(t,["personGeneration"]);if(e!==void 0&&l!=null&&u(e,["parameters","personGeneration"],l),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let c=a(t,["negativePrompt"]);e!==void 0&&c!=null&&u(e,["parameters","negativePrompt"],c);let d=a(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&u(e,["parameters","enhancePrompt"],d),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let f=a(t,["lastFrame"]);e!==void 0&&f!=null&&u(e,["instances[0]","lastFrame"],bs(f));let p=a(t,["referenceImages"]);if(e!==void 0&&p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>KS(g))),u(e,["instances[0]","referenceImages"],h)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function j_(t,e){let n={},o=a(t,["numberOfVideos"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);let r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);let i=a(t,["fps"]);e!==void 0&&i!=null&&u(e,["parameters","fps"],i);let s=a(t,["durationSeconds"]);e!==void 0&&s!=null&&u(e,["parameters","durationSeconds"],s);let l=a(t,["seed"]);e!==void 0&&l!=null&&u(e,["parameters","seed"],l);let c=a(t,["aspectRatio"]);e!==void 0&&c!=null&&u(e,["parameters","aspectRatio"],c);let d=a(t,["resolution"]);e!==void 0&&d!=null&&u(e,["parameters","resolution"],d);let f=a(t,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);let p=a(t,["pubsubTopic"]);e!==void 0&&p!=null&&u(e,["parameters","pubsubTopic"],p);let h=a(t,["negativePrompt"]);e!==void 0&&h!=null&&u(e,["parameters","negativePrompt"],h);let g=a(t,["enhancePrompt"]);e!==void 0&&g!=null&&u(e,["parameters","enhancePrompt"],g);let m=a(t,["generateAudio"]);e!==void 0&&m!=null&&u(e,["parameters","generateAudio"],m);let y=a(t,["lastFrame"]);e!==void 0&&y!=null&&u(e,["instances[0]","lastFrame"],Ze(y));let E=a(t,["referenceImages"]);if(e!==void 0&&E!=null){let D=E;Array.isArray(D)&&(D=D.map(S=>ZS(S))),u(e,["instances[0]","referenceImages"],D)}let v=a(t,["mask"]);e!==void 0&&v!=null&&u(e,["instances[0]","mask"],jS(v));let T=a(t,["compressionQuality"]);return e!==void 0&&T!=null&&u(e,["parameters","compressionQuality"],T),n}function K_(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["metadata"]);o!=null&&u(e,["metadata"],o);let r=a(t,["done"]);r!=null&&u(e,["done"],r);let i=a(t,["error"]);i!=null&&u(e,["error"],i);let s=a(t,["response","generateVideoResponse"]);return s!=null&&u(e,["response"],eS(s)),e}function Z_(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["metadata"]);o!=null&&u(e,["metadata"],o);let r=a(t,["done"]);r!=null&&u(e,["done"],r);let i=a(t,["error"]);i!=null&&u(e,["error"],i);let s=a(t,["response"]);return s!=null&&u(e,["response"],tS(s)),e}function Q_(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],q(t,o));let r=a(e,["prompt"]);r!=null&&u(n,["instances[0]","prompt"],r);let i=a(e,["image"]);i!=null&&u(n,["instances[0]","image"],bs(i));let s=a(e,["video"]);s!=null&&u(n,["instances[0]","video"],Ng(s));let l=a(e,["source"]);l!=null&&nS(l,n);let c=a(e,["config"]);return c!=null&&Y_(c,n),n}function X_(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],q(t,o));let r=a(e,["prompt"]);r!=null&&u(n,["instances[0]","prompt"],r);let i=a(e,["image"]);i!=null&&u(n,["instances[0]","image"],Ze(i));let s=a(e,["video"]);s!=null&&u(n,["instances[0]","video"],xg(s));let l=a(e,["source"]);l!=null&&oS(l,n);let c=a(e,["config"]);return c!=null&&j_(c,n),n}function eS(t){let e={},n=a(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>sS(s))),u(e,["generatedVideos"],i)}let o=a(t,["raiMediaFilteredCount"]);o!=null&&u(e,["raiMediaFilteredCount"],o);let r=a(t,["raiMediaFilteredReasons"]);return r!=null&&u(e,["raiMediaFilteredReasons"],r),e}function tS(t){let e={},n=a(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>aS(s))),u(e,["generatedVideos"],i)}let o=a(t,["raiMediaFilteredCount"]);o!=null&&u(e,["raiMediaFilteredCount"],o);let r=a(t,["raiMediaFilteredReasons"]);return r!=null&&u(e,["raiMediaFilteredReasons"],r),e}function nS(t,e){let n={},o=a(t,["prompt"]);e!==void 0&&o!=null&&u(e,["instances[0]","prompt"],o);let r=a(t,["image"]);e!==void 0&&r!=null&&u(e,["instances[0]","image"],bs(r));let i=a(t,["video"]);return e!==void 0&&i!=null&&u(e,["instances[0]","video"],Ng(i)),n}function oS(t,e){let n={},o=a(t,["prompt"]);e!==void 0&&o!=null&&u(e,["instances[0]","prompt"],o);let r=a(t,["image"]);e!==void 0&&r!=null&&u(e,["instances[0]","image"],Ze(r));let i=a(t,["video"]);return e!==void 0&&i!=null&&u(e,["instances[0]","video"],xg(i)),n}function rS(t){let e={},n=a(t,["_self"]);n!=null&&u(e,["image"],gS(n));let o=a(t,["raiFilteredReason"]);o!=null&&u(e,["raiFilteredReason"],o);let r=a(t,["_self"]);return r!=null&&u(e,["safetyAttributes"],Mg(r)),e}function As(t){let e={},n=a(t,["_self"]);n!=null&&u(e,["image"],wg(n));let o=a(t,["raiFilteredReason"]);o!=null&&u(e,["raiFilteredReason"],o);let r=a(t,["_self"]);r!=null&&u(e,["safetyAttributes"],Ag(r));let i=a(t,["prompt"]);return i!=null&&u(e,["enhancedPrompt"],i),e}function iS(t){let e={},n=a(t,["_self"]);n!=null&&u(e,["mask"],wg(n));let o=a(t,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),u(e,["labels"],r)}return e}function sS(t){let e={},n=a(t,["video"]);return n!=null&&u(e,["video"],JS(n)),e}function aS(t){let e={},n=a(t,["_self"]);return n!=null&&u(e,["video"],YS(n)),e}function lS(t){let e={},n=a(t,["modelSelectionConfig"]);n!=null&&u(e,["modelConfig"],n);let o=a(t,["responseJsonSchema"]);o!=null&&u(e,["responseJsonSchema"],o);let r=a(t,["audioTimestamp"]);r!=null&&u(e,["audioTimestamp"],r);let i=a(t,["candidateCount"]);i!=null&&u(e,["candidateCount"],i);let s=a(t,["enableAffectiveDialog"]);s!=null&&u(e,["enableAffectiveDialog"],s);let l=a(t,["frequencyPenalty"]);l!=null&&u(e,["frequencyPenalty"],l);let c=a(t,["logprobs"]);c!=null&&u(e,["logprobs"],c);let d=a(t,["maxOutputTokens"]);d!=null&&u(e,["maxOutputTokens"],d);let f=a(t,["mediaResolution"]);f!=null&&u(e,["mediaResolution"],f);let p=a(t,["presencePenalty"]);p!=null&&u(e,["presencePenalty"],p);let h=a(t,["responseLogprobs"]);h!=null&&u(e,["responseLogprobs"],h);let g=a(t,["responseMimeType"]);g!=null&&u(e,["responseMimeType"],g);let m=a(t,["responseModalities"]);m!=null&&u(e,["responseModalities"],m);let y=a(t,["responseSchema"]);y!=null&&u(e,["responseSchema"],y);let E=a(t,["routingConfig"]);E!=null&&u(e,["routingConfig"],E);let v=a(t,["seed"]);v!=null&&u(e,["seed"],v);let T=a(t,["speechConfig"]);T!=null&&u(e,["speechConfig"],T);let D=a(t,["stopSequences"]);D!=null&&u(e,["stopSequences"],D);let S=a(t,["temperature"]);S!=null&&u(e,["temperature"],S);let M=a(t,["thinkingConfig"]);M!=null&&u(e,["thinkingConfig"],M);let L=a(t,["topK"]);L!=null&&u(e,["topK"],L);let N=a(t,["topP"]);if(N!=null&&u(e,["topP"],N),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function uS(t,e){let n={},o=a(e,["model"]);return o!=null&&u(n,["_url","name"],q(t,o)),n}function cS(t,e){let n={},o=a(e,["model"]);return o!=null&&u(n,["_url","name"],q(t,o)),n}function dS(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function fS(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function pS(t){let e={},n=a(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);let o=a(t,["imageSize"]);if(o!=null&&u(e,["imageSize"],o),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function hS(t){let e={},n=a(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);let o=a(t,["imageSize"]);o!=null&&u(e,["imageSize"],o);let r=a(t,["outputMimeType"]);r!=null&&u(e,["imageOutputOptions","mimeType"],r);let i=a(t,["outputCompressionQuality"]);return i!=null&&u(e,["imageOutputOptions","compressionQuality"],i),e}function gS(t){let e={},n=a(t,["bytesBase64Encoded"]);n!=null&&u(e,["imageBytes"],Ft(n));let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function wg(t){let e={},n=a(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);let o=a(t,["bytesBase64Encoded"]);o!=null&&u(e,["imageBytes"],Ft(o));let r=a(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function bs(t){let e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let n=a(t,["imageBytes"]);n!=null&&u(e,["bytesBase64Encoded"],Ft(n));let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function Ze(t){let e={},n=a(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);let o=a(t,["imageBytes"]);o!=null&&u(e,["bytesBase64Encoded"],Ft(o));let r=a(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function mS(t,e,n){let o={},r=a(e,["pageSize"]);n!==void 0&&r!=null&&u(n,["_query","pageSize"],r);let i=a(e,["pageToken"]);n!==void 0&&i!=null&&u(n,["_query","pageToken"],i);let s=a(e,["filter"]);n!==void 0&&s!=null&&u(n,["_query","filter"],s);let l=a(e,["queryBase"]);return n!==void 0&&l!=null&&u(n,["_url","models_url"],Eg(t,l)),o}function yS(t,e,n){let o={},r=a(e,["pageSize"]);n!==void 0&&r!=null&&u(n,["_query","pageSize"],r);let i=a(e,["pageToken"]);n!==void 0&&i!=null&&u(n,["_query","pageToken"],i);let s=a(e,["filter"]);n!==void 0&&s!=null&&u(n,["_query","filter"],s);let l=a(e,["queryBase"]);return n!==void 0&&l!=null&&u(n,["_url","models_url"],Eg(t,l)),o}function vS(t,e){let n={},o=a(e,["config"]);return o!=null&&mS(t,o,n),n}function ES(t,e){let n={},o=a(e,["config"]);return o!=null&&yS(t,o,n),n}function IS(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);let r=a(t,["_self"]);if(r!=null){let i=Ig(r);Array.isArray(i)&&(i=i.map(s=>Ju(s))),u(e,["models"],i)}return e}function CS(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);let r=a(t,["_self"]);if(r!=null){let i=Ig(r);Array.isArray(i)&&(i=i.map(s=>Yu(s))),u(e,["models"],i)}return e}function TS(t){let e={},n=a(t,["maskMode"]);n!=null&&u(e,["maskMode"],n);let o=a(t,["segmentationClasses"]);o!=null&&u(e,["maskClasses"],o);let r=a(t,["maskDilation"]);return r!=null&&u(e,["dilation"],r),e}function Ju(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["displayName"]);o!=null&&u(e,["displayName"],o);let r=a(t,["description"]);r!=null&&u(e,["description"],r);let i=a(t,["version"]);i!=null&&u(e,["version"],i);let s=a(t,["_self"]);s!=null&&u(e,["tunedModelInfo"],VS(s));let l=a(t,["inputTokenLimit"]);l!=null&&u(e,["inputTokenLimit"],l);let c=a(t,["outputTokenLimit"]);c!=null&&u(e,["outputTokenLimit"],c);let d=a(t,["supportedGenerationMethods"]);d!=null&&u(e,["supportedActions"],d);let f=a(t,["temperature"]);f!=null&&u(e,["temperature"],f);let p=a(t,["maxTemperature"]);p!=null&&u(e,["maxTemperature"],p);let h=a(t,["topP"]);h!=null&&u(e,["topP"],h);let g=a(t,["topK"]);g!=null&&u(e,["topK"],g);let m=a(t,["thinking"]);return m!=null&&u(e,["thinking"],m),e}function Yu(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["displayName"]);o!=null&&u(e,["displayName"],o);let r=a(t,["description"]);r!=null&&u(e,["description"],r);let i=a(t,["versionId"]);i!=null&&u(e,["version"],i);let s=a(t,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>F_(h))),u(e,["endpoints"],p)}let l=a(t,["labels"]);l!=null&&u(e,["labels"],l);let c=a(t,["_self"]);c!=null&&u(e,["tunedModelInfo"],US(c));let d=a(t,["defaultCheckpointId"]);d!=null&&u(e,["defaultCheckpointId"],d);let f=a(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(h=>h)),u(e,["checkpoints"],p)}return e}function DS(t){let e={},n=a(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);let o=a(t,["codeExecutionResult"]);o!=null&&u(e,["codeExecutionResult"],o);let r=a(t,["executableCode"]);r!=null&&u(e,["executableCode"],r);let i=a(t,["fileData"]);i!=null&&u(e,["fileData"],L_(i));let s=a(t,["functionCall"]);s!=null&&u(e,["functionCall"],O_(s));let l=a(t,["functionResponse"]);l!=null&&u(e,["functionResponse"],l);let c=a(t,["inlineData"]);c!=null&&u(e,["inlineData"],l_(c));let d=a(t,["text"]);d!=null&&u(e,["text"],d);let f=a(t,["thought"]);f!=null&&u(e,["thought"],f);let p=a(t,["thoughtSignature"]);p!=null&&u(e,["thoughtSignature"],p);let h=a(t,["videoMetadata"]);return h!=null&&u(e,["videoMetadata"],h),e}function _S(t){let e={},n=a(t,["productImage"]);return n!=null&&u(e,["image"],Ze(n)),e}function SS(t,e){let n={},o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);let r=a(t,["baseSteps"]);e!==void 0&&r!=null&&u(e,["parameters","baseSteps"],r);let i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);let s=a(t,["seed"]);e!==void 0&&s!=null&&u(e,["parameters","seed"],s);let l=a(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&u(e,["parameters","safetySetting"],l);let c=a(t,["personGeneration"]);e!==void 0&&c!=null&&u(e,["parameters","personGeneration"],c);let d=a(t,["addWatermark"]);e!==void 0&&d!=null&&u(e,["parameters","addWatermark"],d);let f=a(t,["outputMimeType"]);e!==void 0&&f!=null&&u(e,["parameters","outputOptions","mimeType"],f);let p=a(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&u(e,["parameters","outputOptions","compressionQuality"],p);let h=a(t,["enhancePrompt"]);e!==void 0&&h!=null&&u(e,["parameters","enhancePrompt"],h);let g=a(t,["labels"]);return e!==void 0&&g!=null&&u(e,["labels"],g),n}function wS(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],q(t,o));let r=a(e,["source"]);r!=null&&AS(r,n);let i=a(e,["config"]);return i!=null&&SS(i,n),n}function MS(t){let e={},n=a(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>As(r))),u(e,["generatedImages"],o)}return e}function AS(t,e){let n={},o=a(t,["prompt"]);e!==void 0&&o!=null&&u(e,["instances[0]","prompt"],o);let r=a(t,["personImage"]);e!==void 0&&r!=null&&u(e,["instances[0]","personImage","image"],Ze(r));let i=a(t,["productImages"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>_S(l))),u(e,["instances[0]","productImages"],s)}return n}function bS(t){let e={},n=a(t,["referenceImage"]);n!=null&&u(e,["referenceImage"],Ze(n));let o=a(t,["referenceId"]);o!=null&&u(e,["referenceId"],o);let r=a(t,["referenceType"]);r!=null&&u(e,["referenceType"],r);let i=a(t,["maskImageConfig"]);i!=null&&u(e,["maskImageConfig"],TS(i));let s=a(t,["controlImageConfig"]);s!=null&&u(e,["controlImageConfig"],g_(s));let l=a(t,["styleImageConfig"]);l!=null&&u(e,["styleImageConfig"],l);let c=a(t,["subjectImageConfig"]);return c!=null&&u(e,["subjectImageConfig"],c),e}function Mg(t){let e={},n=a(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);let o=a(t,["safetyAttributes","scores"]);o!=null&&u(e,["scores"],o);let r=a(t,["contentType"]);return r!=null&&u(e,["contentType"],r),e}function Ag(t){let e={},n=a(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);let o=a(t,["safetyAttributes","scores"]);o!=null&&u(e,["scores"],o);let r=a(t,["contentType"]);return r!=null&&u(e,["contentType"],r),e}function NS(t){let e={},n=a(t,["category"]);if(n!=null&&u(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let o=a(t,["threshold"]);return o!=null&&u(e,["threshold"],o),e}function xS(t){let e={},n=a(t,["image"]);return n!=null&&u(e,["image"],Ze(n)),e}function RS(t,e){let n={},o=a(t,["mode"]);e!==void 0&&o!=null&&u(e,["parameters","mode"],o);let r=a(t,["maxPredictions"]);e!==void 0&&r!=null&&u(e,["parameters","maxPredictions"],r);let i=a(t,["confidenceThreshold"]);e!==void 0&&i!=null&&u(e,["parameters","confidenceThreshold"],i);let s=a(t,["maskDilation"]);e!==void 0&&s!=null&&u(e,["parameters","maskDilation"],s);let l=a(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&u(e,["parameters","binaryColorThreshold"],l);let c=a(t,["labels"]);return e!==void 0&&c!=null&&u(e,["labels"],c),n}function PS(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],q(t,o));let r=a(e,["source"]);r!=null&&FS(r,n);let i=a(e,["config"]);return i!=null&&RS(i,n),n}function kS(t){let e={},n=a(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>iS(r))),u(e,["generatedMasks"],o)}return e}function FS(t,e){let n={},o=a(t,["prompt"]);e!==void 0&&o!=null&&u(e,["instances[0]","prompt"],o);let r=a(t,["image"]);e!==void 0&&r!=null&&u(e,["instances[0]","image"],Ze(r));let i=a(t,["scribbleImage"]);return e!==void 0&&i!=null&&u(e,["instances[0]","scribble"],xS(i)),n}function LS(t){let e={},n=a(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],V_(n));let o=a(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],o),e}function OS(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let o=a(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);let r=a(t,["computerUse"]);r!=null&&u(e,["computerUse"],r);let i=a(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);let s=a(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let l=a(t,["googleMaps"]);l!=null&&u(e,["googleMaps"],dS(l));let c=a(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],fS(c));let d=a(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function bg(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>U_(h))),u(e,["functionDeclarations"],p)}let o=a(t,["retrieval"]);o!=null&&u(e,["retrieval"],o);let r=a(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);let i=a(t,["computerUse"]);if(i!=null&&u(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let s=a(t,["codeExecution"]);s!=null&&u(e,["codeExecution"],s);let l=a(t,["enterpriseWebSearch"]);l!=null&&u(e,["enterpriseWebSearch"],l);let c=a(t,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);let d=a(t,["googleSearch"]);d!=null&&u(e,["googleSearch"],d);let f=a(t,["urlContext"]);return f!=null&&u(e,["urlContext"],f),e}function VS(t){let e={},n=a(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);let o=a(t,["createTime"]);o!=null&&u(e,["createTime"],o);let r=a(t,["updateTime"]);return r!=null&&u(e,["updateTime"],r),e}function US(t){let e={},n=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&u(e,["baseModel"],n);let o=a(t,["createTime"]);o!=null&&u(e,["createTime"],o);let r=a(t,["updateTime"]);return r!=null&&u(e,["updateTime"],r),e}function BS(t,e){let n={},o=a(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);let r=a(t,["description"]);e!==void 0&&r!=null&&u(e,["description"],r);let i=a(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&u(e,["defaultCheckpointId"],i),n}function HS(t,e){let n={},o=a(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);let r=a(t,["description"]);e!==void 0&&r!=null&&u(e,["description"],r);let i=a(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&u(e,["defaultCheckpointId"],i),n}function $S(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","name"],q(t,o));let r=a(e,["config"]);return r!=null&&BS(r,n),n}function GS(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],q(t,o));let r=a(e,["config"]);return r!=null&&HS(r,n),n}function qS(t,e){let n={},o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);let r=a(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&u(e,["parameters","safetySetting"],r);let i=a(t,["personGeneration"]);e!==void 0&&i!=null&&u(e,["parameters","personGeneration"],i);let s=a(t,["includeRaiReason"]);e!==void 0&&s!=null&&u(e,["parameters","includeRaiReason"],s);let l=a(t,["outputMimeType"]);e!==void 0&&l!=null&&u(e,["parameters","outputOptions","mimeType"],l);let c=a(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&u(e,["parameters","outputOptions","compressionQuality"],c);let d=a(t,["enhanceInputImage"]);e!==void 0&&d!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],d);let f=a(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],f);let p=a(t,["labels"]);e!==void 0&&p!=null&&u(e,["labels"],p);let h=a(t,["numberOfImages"]);e!==void 0&&h!=null&&u(e,["parameters","sampleCount"],h);let g=a(t,["mode"]);return e!==void 0&&g!=null&&u(e,["parameters","mode"],g),n}function zS(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],q(t,o));let r=a(e,["image"]);r!=null&&u(n,["instances[0]","image"],Ze(r));let i=a(e,["upscaleFactor"]);i!=null&&u(n,["parameters","upscaleConfig","upscaleFactor"],i);let s=a(e,["config"]);return s!=null&&qS(s,n),n}function WS(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>As(i))),u(e,["generatedImages"],r)}return e}function JS(t){let e={},n=a(t,["uri"]);n!=null&&u(e,["uri"],n);let o=a(t,["encodedVideo"]);o!=null&&u(e,["videoBytes"],Ft(o));let r=a(t,["encoding"]);return r!=null&&u(e,["mimeType"],r),e}function YS(t){let e={},n=a(t,["gcsUri"]);n!=null&&u(e,["uri"],n);let o=a(t,["bytesBase64Encoded"]);o!=null&&u(e,["videoBytes"],Ft(o));let r=a(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function jS(t){let e={},n=a(t,["image"]);n!=null&&u(e,["_self"],Ze(n));let o=a(t,["maskMode"]);return o!=null&&u(e,["maskMode"],o),e}function KS(t){let e={},n=a(t,["image"]);n!=null&&u(e,["image"],bs(n));let o=a(t,["referenceType"]);return o!=null&&u(e,["referenceType"],o),e}function ZS(t){let e={},n=a(t,["image"]);n!=null&&u(e,["image"],Ze(n));let o=a(t,["referenceType"]);return o!=null&&u(e,["referenceType"],o),e}function Ng(t){let e={},n=a(t,["uri"]);n!=null&&u(e,["uri"],n);let o=a(t,["videoBytes"]);o!=null&&u(e,["encodedVideo"],Ft(o));let r=a(t,["mimeType"]);return r!=null&&u(e,["encoding"],r),e}function xg(t){let e={},n=a(t,["uri"]);n!=null&&u(e,["gcsUri"],n);let o=a(t,["videoBytes"]);o!=null&&u(e,["bytesBase64Encoded"],Ft(o));let r=a(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function QS(t,e){let n={},o=a(t,["displayName"]);return e!==void 0&&o!=null&&u(e,["displayName"],o),n}function XS(t){let e={},n=a(t,["config"]);return n!=null&&QS(n,e),e}function e0(t,e){let n={},o=a(t,["force"]);return e!==void 0&&o!=null&&u(e,["_query","force"],o),n}function t0(t){let e={},n=a(t,["name"]);n!=null&&u(e,["_url","name"],n);let o=a(t,["config"]);return o!=null&&e0(o,e),e}function n0(t){let e={},n=a(t,["name"]);return n!=null&&u(e,["_url","name"],n),e}function o0(t,e){let n={},o=a(t,["customMetadata"]);if(e!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["customMetadata"],i)}let r=a(t,["chunkingConfig"]);return e!==void 0&&r!=null&&u(e,["chunkingConfig"],r),n}function r0(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["metadata"]);o!=null&&u(e,["metadata"],o);let r=a(t,["done"]);r!=null&&u(e,["done"],r);let i=a(t,["error"]);i!=null&&u(e,["error"],i);let s=a(t,["response"]);return s!=null&&u(e,["response"],s0(s)),e}function i0(t){let e={},n=a(t,["fileSearchStoreName"]);n!=null&&u(e,["_url","file_search_store_name"],n);let o=a(t,["fileName"]);o!=null&&u(e,["fileName"],o);let r=a(t,["config"]);return r!=null&&o0(r,e),e}function s0(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["parent"]);o!=null&&u(e,["parent"],o);let r=a(t,["documentName"]);return r!=null&&u(e,["documentName"],r),e}function a0(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);let r=a(t,["pageToken"]);return e!==void 0&&r!=null&&u(e,["_query","pageToken"],r),n}function l0(t){let e={},n=a(t,["config"]);return n!=null&&a0(n,e),e}function u0(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);let r=a(t,["fileSearchStores"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["fileSearchStores"],i)}return e}function Rg(t,e){let n={},o=a(t,["mimeType"]);e!==void 0&&o!=null&&u(e,["mimeType"],o);let r=a(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);let i=a(t,["customMetadata"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),u(e,["customMetadata"],l)}let s=a(t,["chunkingConfig"]);return e!==void 0&&s!=null&&u(e,["chunkingConfig"],s),n}function c0(t){let e={},n=a(t,["fileSearchStoreName"]);n!=null&&u(e,["_url","file_search_store_name"],n);let o=a(t,["config"]);return o!=null&&Rg(o,e),e}function d0(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}var f0="Content-Type",p0="X-Server-Timeout",h0="User-Agent",ju="x-goog-api-client",g0="1.34.0",m0=`google-genai-sdk/${g0}`,y0="v1beta1",v0="v1beta",Ku=class{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});let r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:y0,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:v0,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){let e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){let r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);if(e.queryParams)for(let[s,l]of Object.entries(e.queryParams))r.searchParams.append(s,String(l));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),e.abortSignal),this.unaryApiCall(r,i,e.httpMethod)}patchHttpOptions(e,n){let o=JSON.parse(JSON.stringify(e));for(let[r,i]of Object.entries(n))typeof i=="object"?o[r]=Object.assign(Object.assign({},o[r]),i):i!==void 0&&(o[r]=i);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),e.abortSignal),this.streamApiCall(r,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,r){if(n&&n.timeout||r){let i=new AbortController,s=i.signal;if(n.timeout&&n?.timeout>0){let l=setTimeout(()=>i.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=s}return n&&n.extraBody!==null&&E0(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await Kh(r),new Yo(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await Kh(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Ye(this,arguments,function*(){var o;let r=(o=e?.body)===null||o===void 0?void 0:o.getReader(),i=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="",l="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){let{done:d,value:f}=yield R(r.read());if(d){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let p=i.decode(f,{stream:!0});try{let m=JSON.parse(p);if("error"in m){let y=JSON.parse(JSON.stringify(m.error)),E=y.status,v=y.code,T=`got status: ${E}. ${JSON.stringify(m)}`;if(v>=400&&v<600)throw new fs({message:T,status:v})}}catch(m){if(m.name==="ApiError")throw m}s+=p;let h=-1,g=0;for(;;){h=-1,g=0;for(let E of c){let v=s.indexOf(E);v!==-1&&(h===-1||v<h)&&(h=v,g=E.length)}if(h===-1)break;let m=s.substring(0,h);s=s.substring(h+g);let y=m.trim();if(y.startsWith(l)){let E=y.substring(l.length).trim();try{let v=new Response(E,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield R(new Yo(v))}catch(v){throw new Error(`exception parsing stream chunk ${E}. ${v}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){let e={},n=m0+" "+this.clientOptions.userAgentExtra;return e[h0]=n,e[ju]=n,e[f0]="application/json",e}async getHeadersInternal(e,n){let o=new Headers;if(e&&e.headers){for(let[r,i]of Object.entries(e.headers))o.append(r,i);e.timeout&&e.timeout>0&&o.append(p0,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;let r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);let i=this.clientOptions.uploader,s=await i.stat(e);r.sizeBytes=String(s.size);let l=(o=n?.mimeType)!==null&&o!==void 0?o:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=l;let c={file:r},d=this.getFileName(e),f=_("upload/v1beta/files",c._url),p=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,d,c,n?.httpOptions);return i.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,o){var r;let i=this.clientOptions.uploader,s=await i.stat(n),l=String(s.size),c=(r=o?.mimeType)!==null&&r!==void 0?r:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),p={};o!=null&&Rg(o,p);let h=await this.fetchUploadUrl(d,l,c,f,p,o?.httpOptions);return i.uploadToFileSearchStore(n,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,r,i,s){var l;let c={};s?c=s:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};let d=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:c});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let f=(l=d?.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}};async function Kh(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){let n=t.status,o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};let r=JSON.stringify(o);throw n>=400&&n<600?new fs({message:r,status:n}):new Error(r)}}function E0(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{let i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(i,s){let l=Object.assign({},i);for(let c in s)if(Object.prototype.hasOwnProperty.call(s,c)){let d=s[c],f=l[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?l[c]=o(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),l[c]=d)}return l}let r=o(n,e);t.body=JSON.stringify(r)}var I0="mcp_used/unknown",C0=!1;function Pg(t){for(let e of t)if(T0(e)||typeof e=="object"&&"inputSchema"in e)return!0;return C0}function kg(t){var e;let n=(e=t[ju])!==null&&e!==void 0?e:"";t[ju]=(n+` ${I0}`).trimStart()}function T0(t){return t!==null&&typeof t=="object"&&t instanceof Zu}function D0(t){return Ye(this,arguments,function*(n,o=100){let r,i=0;for(;i<o;){let s=yield R(n.listTools({cursor:r}));for(let l of s.tools)yield yield R(l),i++;if(!s.nextCursor)break;r=s.nextCursor}})}var Zu=class t{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new t(e,n)}async initialize(){var e,n,o,r;if(this.mcpTools.length>0)return;let i={},s=[];for(let f of this.mcpClients)try{for(var l=!0,c=(n=void 0,je(D0(f))),d;d=await c.next(),e=d.done,!e;l=!0){r=d.value,l=!1;let p=r;s.push(p);let h=p.name;if(i[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);i[h]=f}}catch(p){n={error:p}}finally{try{!l&&!e&&(o=c.return)&&await o.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),aT(this.mcpTools,this.config)}async callTool(e){await this.initialize();let n=[];for(let o of e)if(o.name in this.functionNameToMcpClient){let r=this.functionNameToMcpClient[o.name],i;this.config.timeout&&(i={timeout:this.config.timeout});let s=await r.callTool({name:o.name,arguments:o.args},void 0,i);n.push({functionResponse:{name:o.name,response:s.isError?{error:s}:s}})}return n}};async function _0(t,e,n){let o=new Vu,r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),e(o)}var Qu=class{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=w0(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${l}`,d=()=>{},f=new Promise(D=>{d=D}),p=e.callbacks,h=function(){d({})},g=this.apiClient,m={onopen:h,onmessage:D=>{_0(g,p.onmessage,D)},onerror:(n=p?.onerror)!==null&&n!==void 0?n:function(D){},onclose:(o=p?.onclose)!==null&&o!==void 0?o:function(D){}},y=this.webSocketFactory.create(c,S0(s),m);y.connect(),await f;let T={setup:{model:q(this.apiClient,e.model)}};return y.send(JSON.stringify(T)),new Xu(y,this.apiClient)}},Xu=class{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let n=XD(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let n=QD(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){let n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Wo.PLAY)}pause(){this.sendPlaybackControl(Wo.PAUSE)}stop(){this.sendPlaybackControl(Wo.STOP)}resetContext(){this.sendPlaybackControl(Wo.RESET_CONTEXT)}close(){this.conn.close()}};function S0(t){let e={};return t.forEach((n,o)=>{e[o]=n}),e}function w0(t){let e=new Headers;for(let[n,o]of Object.entries(t))e.append(n,o);return e}var M0="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function A0(t,e,n){let o=new Ou,r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;let i=JSON.parse(r);if(t.isVertexAI()){let s=n_(i);Object.assign(o,s)}else Object.assign(o,i);e(o)}var ec=class{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new Qu(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,r,i,s,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion(),f,p=this.apiClient.getHeaders();e.config&&e.config.tools&&Pg(e.config.tools)&&kg(p);let h=x0(p);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,f);else{let P=this.apiClient.getApiKey(),$="BidiGenerateContent",ae="key";P?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),$="BidiGenerateContentConstrained",ae="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${$}?${ae}=${P}`}let g=()=>{},m=new Promise(P=>{g=P}),y=e.callbacks,E=function(){var P;(P=y?.onopen)===null||P===void 0||P.call(y),g({})},v=this.apiClient,T={onopen:E,onmessage:P=>{A0(v,y.onmessage,P)},onerror:(n=y?.onerror)!==null&&n!==void 0?n:function(P){},onclose:(o=y?.onclose)!==null&&o!==void 0?o:function(P){}},D=this.webSocketFactory.create(f,N0(h),T);D.connect(),await m;let S=q(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&S.startsWith("publishers/")){let P=this.apiClient.getProject(),$=this.apiClient.getLocation();S=`projects/${P}/locations/${$}/`+S}let M={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[_u.AUDIO]}:e.config.responseModalities=[_u.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let L=(l=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],N=[];for(let P of L)if(this.isCallableTool(P)){let $=P;N.push(await $.tool())}else N.push(P);N.length>0&&(e.config.tools=N);let Z={model:S,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?M=ZD(this.apiClient,Z):M=KD(this.apiClient,Z),delete M.config,D.send(JSON.stringify(M)),new tc(D,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},b0={turnComplete:!0},tc=class{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=Oe(n.turns),e.isVertexAI()||(o=o.map(r=>Ms(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(let i of o){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(M0)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},b0),e);let n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:t_(e)}:n={realtimeInput:e_(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}};function N0(t){let e={};return t.forEach((n,o)=>{e[o]=n}),e}function x0(t){let e=new Headers;for(let[n,o]of Object.entries(t))e.append(n,o);return e}var Zh=10;function Qh(t){var e,n,o;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(let s of(n=t?.tools)!==null&&n!==void 0?n:[])if(Jn(s)){r=!0;break}if(!r)return!0;let i=(o=t?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Jn(t){return"callTool"in t&&typeof t.callTool=="function"}function R0(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>Jn(r)))!==null&&o!==void 0?o:!1}function Xh(t){var e;let n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(Jn(o))return;let i=o;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(r)}),n}function eg(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var nc=class extends Ke{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,r,i,s,l;let c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!R0(n)||Qh(n.config))return await this.generateContentInternal(c);let d=Xh(n);if(d.length>0){let y=d.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${y}.`)}let f,p,h=Oe(c.contents),g=(i=(r=(o=c.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Zh,m=0;for(;m<g&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){let y=f.candidates[0].content,E=[];for(let v of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(Jn(v)){let D=await v.callTool(f.functionCalls);E.push(...D)}m++,p={role:"user",parts:E},c.contents=Oe(c.contents),c.contents.push(y),c.contents.push(p),eg(c.config)&&(h.push(y),h.push(p))}return eg(c.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{var o,r,i,s,l;if(this.maybeMoveToResponseJsonSchem(n),Qh(n.config)){let p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}let c=Xh(n);if(c.length>0){let p=c.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let d=(i=(r=(o=n?.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(l=(s=n?.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let i,s=[];if(o?.generatedImages)for(let c of o.generatedImages)c&&c?.safetyAttributes&&((r=c?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?i=c?.safetyAttributes:s.push(c);let l;return i?l={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:o.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:o.sdkHttpResponse},l}),this.list=async n=>{var o;let s={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((o=s.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Et(Lt.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{let o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));let r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,i,s,l,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(i=n.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((c=(l=n.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,r;let i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;let s=await Promise.all(i.map(async c=>Jn(c)?await c.tool():c)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(l.config.tools=s,e.config&&e.config.tools&&Pg(e.config.tools)){let c=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{},d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),kg(d),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return l}async initAfcToolsMap(e){var n,o,r;let i=new Map;for(let s of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Jn(s)){let l=s,c=await l.tool();for(let d of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(i.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);i.set(d.name,l)}}return i}async processAfcStream(e){var n,o,r;let i=(r=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Zh,s=!1,l=0,c=await this.initAfcToolsMap(e);return(function(d,f,p){return Ye(this,arguments,function*(){for(var h,g,m,y,E,v;l<i;){s&&(l++,s=!1);let M=yield R(d.processParamsMaybeAddMcpUsage(p)),L=yield R(d.generateContentStreamInternal(M)),N=[],Z=[];try{for(var T=!0,D=(g=void 0,je(L)),S;S=yield R(D.next()),h=S.done,!h;T=!0){y=S.value,T=!1;let P=y;if(yield yield R(P),P.candidates&&(!((E=P.candidates[0])===null||E===void 0)&&E.content)){Z.push(P.candidates[0].content);for(let $ of(v=P.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(l<i&&$.functionCall){if(!$.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has($.functionCall.name)){let ae=yield R(f.get($.functionCall.name).callTool([$.functionCall]));N.push(...ae)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${$.functionCall.name}`)}}}}catch(P){g={error:P}}finally{try{!T&&!h&&(m=D.return)&&(yield R(m.call(D)))}finally{if(g)throw g.error}}if(N.length>0){s=!0;let P=new hn;P.candidates=[{content:{role:"user",parts:N}}],yield yield R(P);let $=[];$.push(...Z),$.push({role:"user",parts:N});let ae=Oe(p.contents).concat($);p.contents=ae}else break}})})(this,c,e)}async generateContentInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=Jh(this.apiClient,e);return l=_("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=jh(f),h=new hn;return Object.assign(h,p),h})}else{let d=Wh(this.apiClient,e);return l=_("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=Yh(f),h=new hn;return Object.assign(h,p),h})}}async generateContentStreamInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=Jh(this.apiClient,e);return l=_("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return Ye(this,arguments,function*(){var h,g,m,y;try{for(var E=!0,v=je(p),T;T=yield R(v.next()),h=T.done,!h;E=!0){y=T.value,E=!1;let D=y,S=jh(yield R(D.json()));S.sdkHttpResponse={headers:D.headers};let M=new hn;Object.assign(M,S),yield yield R(M)}}catch(D){g={error:D}}finally{try{!E&&!h&&(m=v.return)&&(yield R(m.call(v)))}finally{if(g)throw g.error}}})})}else{let d=Wh(this.apiClient,e);return l=_("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return Ye(this,arguments,function*(){var h,g,m,y;try{for(var E=!0,v=je(p),T;T=yield R(v.next()),h=T.done,!h;E=!0){y=T.value,E=!1;let D=y,S=Yh(yield R(D.json()));S.sdkHttpResponse={headers:D.headers};let M=new hn;Object.assign(M,S),yield yield R(M)}}catch(D){g={error:D}}finally{try{!E&&!h&&(m=v.return)&&(yield R(m.call(v)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=R_(this.apiClient,e);return l=_("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=k_(f),h=new Xi;return Object.assign(h,p),h})}else{let d=x_(this.apiClient,e);return l=_("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=P_(f),h=new Xi;return Object.assign(h,p),h})}}async generateImagesInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=z_(this.apiClient,e);return l=_("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=J_(f),h=new es;return Object.assign(h,p),h})}else{let d=q_(this.apiClient,e);return l=_("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=W_(f),h=new es;return Object.assign(h,p),h})}}async editImageInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){let l=M_(this.apiClient,e);return i=_("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{let d=A_(c),f=new Su;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){let l=zS(this.apiClient,e);return i=_("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{let d=WS(c),f=new wu;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){let l=wS(this.apiClient,e);return i=_("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{let d=MS(c),f=new Mu;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){let l=PS(this.apiClient,e);return i=_("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{let d=kS(c),f=new Au;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=cS(this.apiClient,e);return l=_("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Yu(f))}else{let d=uS(this.apiClient,e);return l=_("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Ju(f))}}async listInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=ES(this.apiClient,e);return l=_("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=CS(f),h=new ts;return Object.assign(h,p),h})}else{let d=vS(this.apiClient,e);return l=_("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=IS(f),h=new ts;return Object.assign(h,p),h})}}async update(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=GS(this.apiClient,e);return l=_("{model}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Yu(f))}else{let d=$S(this.apiClient,e);return l=_("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Ju(f))}}async delete(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=D_(this.apiClient,e);return l=_("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=S_(f),h=new ns;return Object.assign(h,p),h})}else{let d=T_(this.apiClient,e);return l=_("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=__(f),h=new ns;return Object.assign(h,p),h})}}async countTokens(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=E_(this.apiClient,e);return l=_("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=C_(f),h=new os;return Object.assign(h,p),h})}else{let d=v_(this.apiClient,e);return l=_("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=I_(f),h=new os;return Object.assign(h,p),h})}}async computeTokens(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){let l=d_(this.apiClient,e);return i=_("{model}:computeTokens",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{let d=f_(c),f=new bu;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=X_(this.apiClient,e);return l=_("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{let p=Z_(f),h=new rs;return Object.assign(h,p),h})}else{let d=Q_(this.apiClient,e);return l=_("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{let p=K_(f),h=new rs;return Object.assign(h,p),h})}}};var oc=class extends Ke{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let r=n.name.split("/operations/")[0],i;o&&"httpOptions"in o&&(i=o.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){let n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let r=n.name.split("/operations/")[0],i;o&&"httpOptions"in o&&(i=o.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=YC(e);return l=_("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}else{let d=JC(e);return l=_("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){let l=BC(e);return i=_("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}};function P0(t){let e={},n=a(t,["data"]);if(n!=null&&u(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function k0(t){let e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>G0(i))),u(e,["parts"],r)}let o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function F0(t,e,n){let o={},r=a(e,["expireTime"]);n!==void 0&&r!=null&&u(n,["expireTime"],r);let i=a(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&u(n,["newSessionExpireTime"],i);let s=a(e,["uses"]);n!==void 0&&s!=null&&u(n,["uses"],s);let l=a(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&u(n,["bidiGenerateContentSetup"],$0(t,l));let c=a(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&u(n,["fieldMask"],c),o}function L0(t,e){let n={},o=a(e,["config"]);return o!=null&&u(n,["config"],F0(t,o,n)),n}function O0(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function V0(t){let e={},n=a(t,["id"]);n!=null&&u(e,["id"],n);let o=a(t,["args"]);o!=null&&u(e,["args"],o);let r=a(t,["name"]);if(r!=null&&u(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function U0(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function B0(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function H0(t,e){let n={},o=a(t,["generationConfig"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig"],o);let r=a(t,["responseModalities"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig","responseModalities"],r);let i=a(t,["temperature"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","temperature"],i);let s=a(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);let l=a(t,["topK"]);e!==void 0&&l!=null&&u(e,["setup","generationConfig","topK"],l);let c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);let d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);let f=a(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);let p=a(t,["speechConfig"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","speechConfig"],Sc(p));let h=a(t,["thinkingConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","thinkingConfig"],h);let g=a(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],g);let m=a(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["setup","systemInstruction"],k0(fe(m)));let y=a(t,["tools"]);if(e!==void 0&&y!=null){let L=Zn(y);Array.isArray(L)&&(L=L.map(N=>z0(Kn(N)))),u(e,["setup","tools"],L)}let E=a(t,["sessionResumption"]);e!==void 0&&E!=null&&u(e,["setup","sessionResumption"],q0(E));let v=a(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&u(e,["setup","inputAudioTranscription"],v);let T=a(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&u(e,["setup","outputAudioTranscription"],T);let D=a(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&u(e,["setup","realtimeInputConfig"],D);let S=a(t,["contextWindowCompression"]);e!==void 0&&S!=null&&u(e,["setup","contextWindowCompression"],S);let M=a(t,["proactivity"]);if(e!==void 0&&M!=null&&u(e,["setup","proactivity"],M),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function $0(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["setup","model"],q(t,o));let r=a(e,["config"]);return r!=null&&u(n,["config"],H0(r,n)),n}function G0(t){let e={},n=a(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);let o=a(t,["codeExecutionResult"]);o!=null&&u(e,["codeExecutionResult"],o);let r=a(t,["executableCode"]);r!=null&&u(e,["executableCode"],r);let i=a(t,["fileData"]);i!=null&&u(e,["fileData"],O0(i));let s=a(t,["functionCall"]);s!=null&&u(e,["functionCall"],V0(s));let l=a(t,["functionResponse"]);l!=null&&u(e,["functionResponse"],l);let c=a(t,["inlineData"]);c!=null&&u(e,["inlineData"],P0(c));let d=a(t,["text"]);d!=null&&u(e,["text"],d);let f=a(t,["thought"]);f!=null&&u(e,["thought"],f);let p=a(t,["thoughtSignature"]);p!=null&&u(e,["thoughtSignature"],p);let h=a(t,["videoMetadata"]);return h!=null&&u(e,["videoMetadata"],h),e}function q0(t){let e={},n=a(t,["handle"]);if(n!=null&&u(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function z0(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let o=a(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);let r=a(t,["computerUse"]);r!=null&&u(e,["computerUse"],r);let i=a(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);let s=a(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let l=a(t,["googleMaps"]);l!=null&&u(e,["googleMaps"],U0(l));let c=a(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],B0(c));let d=a(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function W0(t){let e=[];for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){let r=Object.keys(o).map(i=>`${n}.${i}`);e.push(...r)}else e.push(n)}return e.join(",")}function J0(t,e){let n=null,o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){let i=o.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;let r=t.fieldMask;if(n){let i=W0(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)i?t.fieldMask=i:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){let s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],l=[];r.length>0&&(l=r.map(d=>s.includes(d)?`generationConfig.${d}`:d));let c=[];i&&c.push(i),l.length>0&&c.push(...l),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}var rc=class extends Ke{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let l=L0(this.apiClient,e);i=_("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;let c=J0(l,e.config);return r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}};function Y0(t,e){let n={},o=a(t,["force"]);return e!==void 0&&o!=null&&u(e,["_query","force"],o),n}function j0(t){let e={},n=a(t,["name"]);n!=null&&u(e,["_url","name"],n);let o=a(t,["config"]);return o!=null&&Y0(o,e),e}function K0(t){let e={},n=a(t,["name"]);return n!=null&&u(e,["_url","name"],n),e}function Z0(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);let r=a(t,["pageToken"]);return e!==void 0&&r!=null&&u(e,["_query","pageToken"],r),n}function Q0(t){let e={},n=a(t,["parent"]);n!=null&&u(e,["_url","parent"],n);let o=a(t,["config"]);return o!=null&&Z0(o,e),e}function X0(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);let r=a(t,["documents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["documents"],i)}return e}var ic=class extends Ke{constructor(e){super(),this.apiClient=e,this.list=async n=>new Et(Lt.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=K0(e);return i=_("{name}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=j0(e);r=_("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=Q0(e);return i=_("{parent}/documents",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{let d=X0(c),f=new Nu;return Object.assign(f,d),f})}}};var sc=class extends Ke{constructor(e,n=new ic(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new Et(Lt.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=XS(e);return i=_("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=n0(e);return i=_("{name}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=t0(e);r=_("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=l0(e);return i=_("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{let d=u0(c),f=new xu;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=c0(e);return i=_("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{let d=d0(c),f=new Ru;return Object.assign(f,d),f})}}async importFile(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=i0(e);return i=_("{file_search_store_name}:importFile",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{let d=r0(c),f=new Pu;return Object.assign(f,d),f})}}};var Fg=function(){let{crypto:t}=globalThis;if(t?.randomUUID)return Fg=t.randomUUID.bind(t),t.randomUUID();let e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))},ew=()=>Fg();function ac(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}var lc=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){let e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};var Ie=class extends Error{},Ce=class t extends Ie{constructor(e,n,o,r){super(`${t.makeMessage(e,n,o)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,o){let r=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,o,r){if(!e||!r)return new Yn({message:o,cause:lc(n)});let i=n;return e===400?new hs(e,i,o,r):e===401?new gs(e,i,o,r):e===403?new ms(e,i,o,r):e===404?new ys(e,i,o,r):e===409?new vs(e,i,o,r):e===422?new Es(e,i,o,r):e===429?new Is(e,i,o,r):e>=500?new Cs(e,i,o,r):new t(e,i,o,r)}},jo=class extends Ce{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},Yn=class extends Ce{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},ps=class extends Yn{constructor({message:e}={}){super({message:e??"Request timed out."})}},hs=class extends Ce{},gs=class extends Ce{},ms=class extends Ce{},ys=class extends Ce{},vs=class extends Ce{},Es=class extends Ce{},Is=class extends Ce{},Cs=class extends Ce{};var tw=/^[a-z][a-z0-9+.-]*:/i,nw=t=>tw.test(t),uc=t=>(uc=Array.isArray,uc(t)),ow=uc,rw=ow,tg=rw;function iw(t){if(!t)return!0;for(let e in t)return!1;return!0}function sw(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var aw=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ie(`${t} must be an integer`);if(e<0)throw new Ie(`${t} must be a positive integer`);return e},lw=t=>{try{return JSON.parse(t)}catch{return}};var uw=t=>new Promise(e=>setTimeout(e,t));var zn="0.0.1";function cw(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var dw=()=>{var t,e,n,o,r;let i=cw();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zn,"X-Stainless-OS":og(Deno.build.os),"X-Stainless-Arch":ng(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zn,"X-Stainless-OS":og((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":ng((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};let s=fw();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":zn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function fw(){if(typeof navigator>"u"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:n}of t){let o=n.exec(navigator.userAgent);if(o){let r=o[1]||0,i=o[2]||0,s=o[3]||0;return{browser:e,version:`${r}.${i}.${s}`}}}return null}var ng=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",og=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),Wi,pw=()=>Wi??(Wi=dw());function hw(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Lg(...t){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function gw(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Lg({start(){},async pull(n){let{done:o,value:r}=await e.next();o?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Og(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){let n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function mw(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}let o=t.getReader(),r=o.cancel();o.releaseLock(),await r}var yw=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var Vg=()=>{var t;if(typeof File>"u"){let{process:e}=globalThis,n=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Cu(t,e,n){return Vg(),new File(t,e??"unknown_file",n)}function vw(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}var Ew=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";var Ug=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Iw=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Ug(t),Cw=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Tw(t,e,n){if(Vg(),t=await t,Iw(t))return t instanceof File?t:Cu([await t.arrayBuffer()],t.name);if(Cw(t)){let r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Cu(await cc(r),e,n)}let o=await cc(t);if(e||(e=vw(t)),!n?.type){let r=o.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Cu(o,e,n)}async function cc(t){var e,n,o,r,i;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(Ug(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(Ew(t))try{for(var l=!0,c=je(t),d;d=await c.next(),e=d.done,!e;l=!0){r=d.value,l=!1;let f=r;s.push(...await cc(f))}}catch(f){n={error:f}}finally{try{!l&&!e&&(o=c.return)&&await o.call(c)}finally{if(n)throw n.error}}else{let f=(i=t?.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${Dw(t)}`)}return s}function Dw(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}var _w=(()=>{class t{constructor(n){this._client=n}}t._key=[];return t})();function Bg(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var rg=Object.freeze(Object.create(null)),Sw=(t=Bg)=>function(n,...o){if(n.length===1)return n[0];let r=!1,i=[],s=n.reduce((f,p,h)=>{var g,m,y;/[?#]/.test(p)&&(r=!0);let E=o[h],v=(r?encodeURIComponent:t)(""+E);return h!==o.length&&(E==null||typeof E=="object"&&E.toString===((y=Object.getPrototypeOf((m=Object.getPrototypeOf((g=E.hasOwnProperty)!==null&&g!==void 0?g:rg))!==null&&m!==void 0?m:rg))===null||y===void 0?void 0:y.toString))&&(v=E+"",i.push({start:f.length+p.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),f+p+(h===o.length?"":v)},""),l=s.split(/[?#]/,1)[0],c=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,d;for(;(d=c.exec(l))!==null;)i.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(i.sort((f,p)=>f.start-p.start),i.length>0){let f=0,p=i.reduce((h,g)=>{let m=" ".repeat(g.start-f),y="^".repeat(g.length);return f=g.start+g.length,h+m+y},"");throw new Ie(`Path parameters result in path with invalid segments:
${i.map(h=>h.error).join(`
`)}
${s}
${p}`)}return s},Ji=Sw(Bg);var Ts=class extends _w{create(e,n){var o;let{api_version:r=this._client.apiVersion}=e,i=ds(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new Ie("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new Ie("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ji`/${r}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){let{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Ji`/${r}/interactions/${e}`,o)}cancel(e,n={},o){let{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Ji`/${r}/interactions/${e}/cancel`,o)}get(e,n={},o){var r;let i=n??{},{api_version:s=this._client.apiVersion}=i,l=ds(i,["api_version"]);return this._client.get(Ji`/${s}/interactions/${e}`,Object.assign(Object.assign({query:l},o),{stream:(r=n?.stream)!==null&&r!==void 0?r:!1}))}};Ts._key=Object.freeze(["interactions"]);var Ds=class extends Ts{};function ww(t){let e=0;for(let r of t)e+=r.length;let n=new Uint8Array(e),o=0;for(let r of t)n.set(r,o),o+=r.length;return n}var Yi;function wc(t){let e;return(Yi??(e=new globalThis.TextEncoder,Yi=e.encode.bind(e)))(t)}var ji;function ig(t){let e;return(ji??(e=new globalThis.TextDecoder,ji=e.decode.bind(e)))(t)}var jn=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];let n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?wc(e):e;this.buffer=ww([this.buffer,n]);let o=[],r;for(;(r=Mw(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(ig(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let i=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,s=ig(this.buffer.subarray(0,i));o.push(s),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}};jn.NEWLINE_CHARS=new Set([`
`,"\r"]);jn.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Mw(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function Aw(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}var _s={off:0,error:200,warn:300,info:400,debug:500},sg=(t,e,n)=>{if(t){if(sw(_s,t))return t;ye(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(_s))}`)}};function Jo(){}function Ki(t,e,n){return!e||_s[t]>_s[n]?Jo:e[t].bind(e)}var bw={error:Jo,warn:Jo,info:Jo,debug:Jo},ag=new WeakMap;function ye(t){var e;let n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return bw;let r=ag.get(n);if(r&&r[0]===o)return r[1];let i={error:Ki("error",n,o),warn:Ki("warn",n,o),info:Ki("info",n,o),debug:Ki("debug",n,o)};return ag.set(n,[o,i]),i}var pn=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var dc=class t{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let r=!1,i=o?ye(o):console;function s(){return Ye(this,arguments,function*(){var c,d,f,p;if(r)throw new Ie("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let h=!1;try{try{for(var g=!0,m=je(Nw(e,n)),y;y=yield R(m.next()),c=y.done,!c;g=!0){p=y.value,g=!1;let E=p;if(!h)if(E.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield R(JSON.parse(E.data))}catch(v){throw i.error("Could not parse message into JSON:",E.data),i.error("From chunk:",E.raw),v}}}catch(E){d={error:E}}finally{try{!g&&!c&&(f=m.return)&&(yield R(f.call(m)))}finally{if(d)throw d.error}}h=!0}catch(E){if(ac(E))return yield R(void 0);throw E}finally{h||n.abort()}})}return new t(s,n,o)}static fromReadableStream(e,n,o){let r=!1;function i(){return Ye(this,arguments,function*(){var c,d,f,p;let h=new jn,g=Og(e);try{for(var m=!0,y=je(g),E;E=yield R(y.next()),c=E.done,!c;m=!0){p=E.value,m=!1;let v=p;for(let T of h.decode(v))yield yield R(T)}}catch(v){d={error:v}}finally{try{!m&&!c&&(f=y.return)&&(yield R(f.call(y)))}finally{if(d)throw d.error}}for(let v of h.flush())yield yield R(v)})}function s(){return Ye(this,arguments,function*(){var c,d,f,p;if(r)throw new Ie("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let h=!1;try{try{for(var g=!0,m=je(i()),y;y=yield R(m.next()),c=y.done,!c;g=!0){p=y.value,g=!1;let E=p;h||E&&(yield yield R(JSON.parse(E)))}}catch(E){d={error:E}}finally{try{!g&&!c&&(f=m.return)&&(yield R(f.call(m)))}finally{if(d)throw d.error}}h=!0}catch(E){if(ac(E))return yield R(void 0);throw E}finally{h||n.abort()}})}return new t(s,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],n=[],o=this.iterator(),r=i=>({next:()=>{if(i.length===0){let s=o.next();e.push(s),n.push(s)}return i.shift()}});return[new t(()=>r(e),this.controller,this.client),new t(()=>r(n),this.controller,this.client)]}toReadableStream(){let e=this,n;return Lg({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{let{value:r,done:i}=await n.next();if(i)return o.close();let s=wc(JSON.stringify(r)+`
`);o.enqueue(s)}catch(r){o.error(r)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}};function Nw(t,e){return Ye(this,arguments,function*(){var o,r,i,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ie("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ie("Attempted to iterate over a response with no body");let l=new fc,c=new jn,d=Og(t.body);try{for(var f=!0,p=je(xw(d)),h;h=yield R(p.next()),o=h.done,!o;f=!0){s=h.value,f=!1;let g=s;for(let m of c.decode(g)){let y=l.decode(m);y&&(yield yield R(y))}}}catch(g){r={error:g}}finally{try{!f&&!o&&(i=p.return)&&(yield R(i.call(p)))}finally{if(r)throw r.error}}for(let g of c.flush()){let m=l.decode(g);m&&(yield yield R(m))}})}function xw(t){return Ye(this,arguments,function*(){var n,o,r,i;let s=new Uint8Array;try{for(var l=!0,c=je(t),d;d=yield R(c.next()),n=d.done,!n;l=!0){i=d.value,l=!1;let f=i;if(f==null)continue;let p=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?wc(f):f,h=new Uint8Array(s.length+p.length);h.set(s),h.set(p,s.length),s=h;let g;for(;(g=Aw(s))!==-1;)yield yield R(s.slice(0,g)),s=s.slice(g)}}catch(f){o={error:f}}finally{try{!l&&!n&&(r=c.return)&&(yield R(r.call(c)))}finally{if(o)throw o.error}}s.length>0&&(yield yield R(s))})}var fc=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,r]=Rw(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}};function Rw(t,e){let n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function Pw(t,e){let{response:n,requestLogID:o,retryOfRequestLogID:r,startTime:i}=e,s=await(async()=>{var l;if(e.options.stream)return ye(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):dc.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;let c=n.headers.get("content-type"),d=(l=c?.split(";")[0])===null||l===void 0?void 0:l.trim();return d?.includes("application/json")||d?.endsWith("+json")?await n.json():await n.text()})();return ye(t).debug(`[${o}] response parsed`,pn({retryOfRequestLogID:r,url:n.url,status:n.status,body:s,durationMs:Date.now()-i})),s}var pc=class t extends Promise{constructor(e,n,o=Pw){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new t(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};var Hg=Symbol("brand.privateNullableHeaders");function*kw(t){if(!t)return;if(Hg in t){let{values:o,nulls:r}=t;yield*o.entries();for(let i of r)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():tg(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){let r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");let i=tg(o[1])?o[1]:[o[1]],s=!1;for(let l of i)l!==void 0&&(e&&!s&&(s=!0,yield[r,null]),yield[r,l])}}var zo=t=>{let e=new Headers,n=new Set;for(let o of t){let r=new Set;for(let[i,s]of kw(o)){let l=i.toLowerCase();r.has(l)||(e.delete(i),r.add(l)),s===null?(e.delete(i),n.add(l)):(e.append(i,s),n.delete(l))}}return{[Hg]:!0,values:e,nulls:n}};var Tu=t=>{var e,n,o,r,i,s;if(typeof globalThis.process<"u")return(o=(n=(e=globalThis.process.env)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(s=(i=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||i===void 0?void 0:i.call(r,t))===null||s===void 0?void 0:s.trim()};var $g,Fw=(()=>{class t{constructor(n){var o,r,i,s,l,c,d,{baseURL:f=Tu("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:p=(o=Tu("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:h="v1beta"}=n,g=ds(n,["baseURL","apiKey","apiVersion"]);let m=Object.assign(Object.assign({apiKey:p,apiVersion:h},g),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=m.baseURL,this.timeout=(r=m.timeout)!==null&&r!==void 0?r:t.DEFAULT_TIMEOUT,this.logger=(i=m.logger)!==null&&i!==void 0?i:console;let y="warn";this.logLevel=y,this.logLevel=(l=(s=sg(m.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:sg(Tu("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:y,this.fetchOptions=m.fetchOptions,this.maxRetries=(c=m.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(d=m.fetch)!==null&&d!==void 0?d:hw(),this.encoder=yw,this._options=m,this.apiKey=p,this.apiVersion=h,this.clientAdapter=m.clientAdapter}withOptions(n){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),n))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:n,nulls:o}){if(!(n.has("authorization")||n.has("x-goog-api-key"))&&!(this.apiKey&&n.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(n){let o=zo([n.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return zo([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return zo([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(n){return Object.entries(n).filter(([o,r])=>typeof r<"u").map(([o,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(o)}=`;throw new Ie(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${zn}`}defaultIdempotencyKey(){return`stainless-node-retry-${ew()}`}makeStatusError(n,o,r,i){return Ce.generate(n,o,r,i)}buildURL(n,o,r){let i=!this.baseURLOverridden()&&r||this.baseURL,s=nw(n)?new URL(n):new URL(i+(i.endsWith("/")&&n.startsWith("/")?n.slice(1):n)),l=this.defaultQuery();return iw(l)||(o=Object.assign(Object.assign({},l),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(s.search=this.stringifyQuery(o)),s.toString()}async prepareOptions(n){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!n.path.startsWith(`/${this.apiVersion}/projects/`)){let o=n.path.slice(this.apiVersion.length+1);n.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(n,{url:o,options:r}){}get(n,o){return this.methodRequest("get",n,o)}post(n,o){return this.methodRequest("post",n,o)}patch(n,o){return this.methodRequest("patch",n,o)}put(n,o){return this.methodRequest("put",n,o)}delete(n,o){return this.methodRequest("delete",n,o)}methodRequest(n,o,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:n,path:o},i)))}request(n,o=null){return new pc(this,this.makeRequest(n,o,void 0))}async makeRequest(n,o,r){var i,s,l;let c=await n,d=(i=c.maxRetries)!==null&&i!==void 0?i:this.maxRetries;o==null&&(o=d),await this.prepareOptions(c);let{req:f,url:p,timeout:h}=await this.buildRequest(c,{retryCount:d-o});await this.prepareRequest(f,{url:p,options:c});let g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,y=Date.now();if(ye(this).debug(`[${g}] sending request`,pn({retryOfRequestLogID:r,method:c.method,url:p,options:c,headers:f.headers})),!((s=c.signal)===null||s===void 0)&&s.aborted)throw new jo;let E=new AbortController,v=await this.fetchWithTimeout(p,f,h,E).catch(lc),T=Date.now();if(v instanceof globalThis.Error){let S=`retrying, ${o} attempts remaining`;if(!((l=c.signal)===null||l===void 0)&&l.aborted)throw new jo;let M=ac(v)||/timed? ?out/i.test(String(v)+("cause"in v?String(v.cause):""));if(o)return ye(this).info(`[${g}] connection ${M?"timed out":"failed"} - ${S}`),ye(this).debug(`[${g}] connection ${M?"timed out":"failed"} (${S})`,pn({retryOfRequestLogID:r,url:p,durationMs:T-y,message:v.message})),this.retryRequest(c,o,r??g);throw ye(this).info(`[${g}] connection ${M?"timed out":"failed"} - error; no more retries left`),ye(this).debug(`[${g}] connection ${M?"timed out":"failed"} (error; no more retries left)`,pn({retryOfRequestLogID:r,url:p,durationMs:T-y,message:v.message})),M?new ps:new Yn({cause:v})}let D=`[${g}${m}] ${f.method} ${p} ${v.ok?"succeeded":"failed"} with status ${v.status} in ${T-y}ms`;if(!v.ok){let S=await this.shouldRetry(v);if(o&&S){let $=`retrying, ${o} attempts remaining`;return await mw(v.body),ye(this).info(`${D} - ${$}`),ye(this).debug(`[${g}] response error (${$})`,pn({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,durationMs:T-y})),this.retryRequest(c,o,r??g,v.headers)}let M=S?"error; no more retries left":"error; not retryable";ye(this).info(`${D} - ${M}`);let L=await v.text().catch($=>lc($).message),N=lw(L),Z=N?void 0:L;throw ye(this).debug(`[${g}] response error (${M})`,pn({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,message:Z,durationMs:Date.now()-y})),this.makeStatusError(v.status,N,Z,v.headers)}return ye(this).info(D),ye(this).debug(`[${g}] response start`,pn({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,durationMs:T-y})),{response:v,options:c,controller:E,requestLogID:g,retryOfRequestLogID:r,startTime:y}}async fetchWithTimeout(n,o,r,i){let s=o||{},{signal:l,method:c}=s,d=ds(s,["signal","method"]);l&&l.addEventListener("abort",()=>i.abort());let f=setTimeout(()=>i.abort(),r),p=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,h=Object.assign(Object.assign(Object.assign({signal:i.signal},p?{duplex:"half"}:{}),{method:"GET"}),d);c&&(h.method=c.toUpperCase());try{return await this.fetch.call(void 0,n,h)}finally{clearTimeout(f)}}async shouldRetry(n){let o=n.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:n.status===408||n.status===409||n.status===429||n.status>=500}async retryRequest(n,o,r,i){var s;let l,c=i?.get("retry-after-ms");if(c){let f=parseFloat(c);Number.isNaN(f)||(l=f)}let d=i?.get("retry-after");if(d&&!l){let f=parseFloat(d);Number.isNaN(f)?l=Date.parse(d)-Date.now():l=f*1e3}if(!(l&&0<=l&&l<60*1e3)){let f=(s=n.maxRetries)!==null&&s!==void 0?s:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(o,f)}return await uw(l),this.makeRequest(n,o-1,r)}calculateDefaultRetryTimeoutMillis(n,o){let s=o-n,l=Math.min(.5*Math.pow(2,s),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(n,{retryCount:o=0}={}){var r,i,s;let l=Object.assign({},n),{method:c,path:d,query:f,defaultBaseURL:p}=l,h=this.buildURL(d,f,p);"timeout"in l&&aw("timeout",l.timeout),l.timeout=(r=l.timeout)!==null&&r!==void 0?r:this.timeout;let{bodyHeaders:g,body:m}=this.buildBody({options:l}),y=await this.buildHeaders({options:n,method:c,bodyHeaders:g,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:y},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"}),m&&{body:m}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(s=l.fetchOptions)!==null&&s!==void 0?s:{}),url:h,timeout:l.timeout}}async buildHeaders({options:n,method:o,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&o!=="get"&&(n.idempotencyKey||(n.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=n.idempotencyKey);let l=await this.authHeaders(n),c=zo([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},n.timeout?{"X-Stainless-Timeout":String(Math.trunc(n.timeout/1e3))}:{}),pw()),this._options.defaultHeaders,r,n.headers,l]);return this.validateHeaders(c),c.values}buildBody({options:{body:n,headers:o}}){if(!n)return{bodyHeaders:void 0,body:void 0};let r=zo([o]);return ArrayBuffer.isView(n)||n instanceof ArrayBuffer||n instanceof DataView||typeof n=="string"&&r.values.has("content-type")||globalThis.Blob&&n instanceof globalThis.Blob||n instanceof FormData||n instanceof URLSearchParams||globalThis.ReadableStream&&n instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:n}:typeof n=="object"&&(Symbol.asyncIterator in n||Symbol.iterator in n&&"next"in n&&typeof n.next=="function")?{bodyHeaders:void 0,body:gw(n)}:this.encoder({body:n,headers:r})}}return t.DEFAULT_TIMEOUT=6e4,t})(),re=class extends Fw{constructor(){super(...arguments),this.interactions=new Ds(this)}};$g=re;re.GeminiNextGenAPIClient=$g;re.GeminiNextGenAPIClientError=Ie;re.APIError=Ce;re.APIConnectionError=Yn;re.APIConnectionTimeoutError=ps;re.APIUserAbortError=jo;re.NotFoundError=ys;re.ConflictError=vs;re.RateLimitError=Is;re.BadRequestError=hs;re.AuthenticationError=gs;re.InternalServerError=Cs;re.PermissionDeniedError=ms;re.UnprocessableEntityError=Es;re.toFile=Tw;re.Interactions=Ds;function Lw(t,e){let n={},o=a(t,["name"]);return o!=null&&u(n,["_url","name"],o),n}function Ow(t,e){let n={},o=a(t,["name"]);return o!=null&&u(n,["_url","name"],o),n}function Vw(t,e){let n={},o=a(t,["sdkHttpResponse"]);return o!=null&&u(n,["sdkHttpResponse"],o),n}function Uw(t,e){let n={},o=a(t,["sdkHttpResponse"]);return o!=null&&u(n,["sdkHttpResponse"],o),n}function Bw(t,e,n){let o={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let r=a(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&u(e,["displayName"],r),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let i=a(t,["epochCount"]);e!==void 0&&i!=null&&u(e,["tuningTask","hyperparameters","epochCount"],i);let s=a(t,["learningRateMultiplier"]);if(s!=null&&u(o,["tuningTask","hyperparameters","learningRateMultiplier"],s),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let l=a(t,["batchSize"]);e!==void 0&&l!=null&&u(e,["tuningTask","hyperparameters","batchSize"],l);let c=a(t,["learningRate"]);if(e!==void 0&&c!=null&&u(e,["tuningTask","hyperparameters","learningRate"],c),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function Hw(t,e,n){let o={},r=a(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){let g=a(t,["validationDataset"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec"],lg(g))}else if(r==="PREFERENCE_TUNING"){let g=a(t,["validationDataset"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec"],lg(g))}let i=a(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&u(e,["tunedModelDisplayName"],i);let s=a(t,["description"]);e!==void 0&&s!=null&&u(e,["description"],s);let l=a(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){let g=a(t,["epochCount"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(l==="PREFERENCE_TUNING"){let g=a(t,["epochCount"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let c=a(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){let g=a(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(c==="PREFERENCE_TUNING"){let g=a(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let d=a(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){let g=a(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(d==="PREFERENCE_TUNING"){let g=a(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){let g=a(t,["adapterSize"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){let g=a(t,["adapterSize"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");let p=a(t,["labels"]);e!==void 0&&p!=null&&u(e,["labels"],p);let h=a(t,["beta"]);return e!==void 0&&h!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","beta"],h),o}function $w(t,e){let n={},o=a(t,["baseModel"]);o!=null&&u(n,["baseModel"],o);let r=a(t,["preTunedModel"]);r!=null&&u(n,["preTunedModel"],r);let i=a(t,["trainingDataset"]);i!=null&&Xw(i);let s=a(t,["config"]);return s!=null&&Bw(s,n),n}function Gw(t,e){let n={},o=a(t,["baseModel"]);o!=null&&u(n,["baseModel"],o);let r=a(t,["preTunedModel"]);r!=null&&u(n,["preTunedModel"],r);let i=a(t,["trainingDataset"]);i!=null&&eM(i,n,e);let s=a(t,["config"]);return s!=null&&Hw(s,n,e),n}function qw(t,e){let n={},o=a(t,["name"]);return o!=null&&u(n,["_url","name"],o),n}function zw(t,e){let n={},o=a(t,["name"]);return o!=null&&u(n,["_url","name"],o),n}function Ww(t,e,n){let o={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);let i=a(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);let s=a(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),o}function Jw(t,e,n){let o={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);let i=a(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);let s=a(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),o}function Yw(t,e){let n={},o=a(t,["config"]);return o!=null&&Ww(o,n),n}function jw(t,e){let n={},o=a(t,["config"]);return o!=null&&Jw(o,n),n}function Kw(t,e){let n={},o=a(t,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);let r=a(t,["nextPageToken"]);r!=null&&u(n,["nextPageToken"],r);let i=a(t,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>Gg(l))),u(n,["tuningJobs"],s)}return n}function Zw(t,e){let n={},o=a(t,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);let r=a(t,["nextPageToken"]);r!=null&&u(n,["nextPageToken"],r);let i=a(t,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>hc(l))),u(n,["tuningJobs"],s)}return n}function Qw(t,e){let n={},o=a(t,["name"]);o!=null&&u(n,["model"],o);let r=a(t,["name"]);return r!=null&&u(n,["endpoint"],r),n}function Xw(t,e){let n={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let o=a(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),u(n,["examples","examples"],r)}return n}function eM(t,e,n){let o={},r=a(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){let s=a(t,["gcsUri"]);e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){let s=a(t,["gcsUri"]);e!==void 0&&s!=null&&u(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){let s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){let s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&u(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Gg(t,e){let n={},o=a(t,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);let r=a(t,["name"]);r!=null&&u(n,["name"],r);let i=a(t,["state"]);i!=null&&u(n,["state"],yg(i));let s=a(t,["createTime"]);s!=null&&u(n,["createTime"],s);let l=a(t,["tuningTask","startTime"]);l!=null&&u(n,["startTime"],l);let c=a(t,["tuningTask","completeTime"]);c!=null&&u(n,["endTime"],c);let d=a(t,["updateTime"]);d!=null&&u(n,["updateTime"],d);let f=a(t,["description"]);f!=null&&u(n,["description"],f);let p=a(t,["baseModel"]);p!=null&&u(n,["baseModel"],p);let h=a(t,["_self"]);return h!=null&&u(n,["tunedModel"],Qw(h)),n}function hc(t,e){let n={},o=a(t,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);let r=a(t,["name"]);r!=null&&u(n,["name"],r);let i=a(t,["state"]);i!=null&&u(n,["state"],yg(i));let s=a(t,["createTime"]);s!=null&&u(n,["createTime"],s);let l=a(t,["startTime"]);l!=null&&u(n,["startTime"],l);let c=a(t,["endTime"]);c!=null&&u(n,["endTime"],c);let d=a(t,["updateTime"]);d!=null&&u(n,["updateTime"],d);let f=a(t,["error"]);f!=null&&u(n,["error"],f);let p=a(t,["description"]);p!=null&&u(n,["description"],p);let h=a(t,["baseModel"]);h!=null&&u(n,["baseModel"],h);let g=a(t,["tunedModel"]);g!=null&&u(n,["tunedModel"],g);let m=a(t,["preTunedModel"]);m!=null&&u(n,["preTunedModel"],m);let y=a(t,["supervisedTuningSpec"]);y!=null&&u(n,["supervisedTuningSpec"],y);let E=a(t,["preferenceOptimizationSpec"]);E!=null&&u(n,["preferenceOptimizationSpec"],E);let v=a(t,["tuningDataStats"]);v!=null&&u(n,["tuningDataStats"],v);let T=a(t,["encryptionSpec"]);T!=null&&u(n,["encryptionSpec"],T);let D=a(t,["partnerModelTuningSpec"]);D!=null&&u(n,["partnerModelTuningSpec"],D);let S=a(t,["customBaseModel"]);S!=null&&u(n,["customBaseModel"],S);let M=a(t,["experiment"]);M!=null&&u(n,["experiment"],M);let L=a(t,["labels"]);L!=null&&u(n,["labels"],L);let N=a(t,["outputUri"]);N!=null&&u(n,["outputUri"],N);let Z=a(t,["pipelineJob"]);Z!=null&&u(n,["pipelineJob"],Z);let P=a(t,["serviceAccount"]);P!=null&&u(n,["serviceAccount"],P);let $=a(t,["tunedModelDisplayName"]);$!=null&&u(n,["tunedModelDisplayName"],$);let ae=a(t,["veoTuningSpec"]);return ae!=null&&u(n,["veoTuningSpec"],ae),n}function tM(t,e){let n={},o=a(t,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);let r=a(t,["name"]);r!=null&&u(n,["name"],r);let i=a(t,["metadata"]);i!=null&&u(n,["metadata"],i);let s=a(t,["done"]);s!=null&&u(n,["done"],s);let l=a(t,["error"]);return l!=null&&u(n,["error"],l),n}function lg(t,e){let n={},o=a(t,["gcsUri"]);o!=null&&u(n,["validationDatasetUri"],o);let r=a(t,["vertexDatasetResource"]);return r!=null&&u(n,["validationDatasetUri"],r),n}var gc=class extends Ke{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Et(Lt.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){let r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);let i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{let r=Object.assign({},n);return await this.tuneInternal(r)}else{let r=Object.assign({},n),i=await this.tuneMldevInternal(r),s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:dg.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=zw(e);return l=_("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>hc(f))}else{let d=qw(e);return l=_("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Gg(f))}}async listInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=jw(e);return l=_("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=Zw(f),h=new is;return Object.assign(h,p),h})}else{let d=Yw(e);return l=_("tunedModels",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=Kw(f),h=new is;return Object.assign(h,p),h})}}async cancel(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=Ow(e);return l=_("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=Uw(f),h=new ss;return Object.assign(h,p),h})}else{let d=Lw(e);return l=_("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=Vw(f),h=new ss;return Object.assign(h,p),h})}}async tuneInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){let l=Gw(e,e);return i=_("tuningJobs",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>hc(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=$w(e);return i=_("tunedModels",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>tM(c))}}};var mc=class{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},nM=1024*1024*8,oM=3,rM=1e3,iM=2,Ss="x-goog-upload-status";async function sM(t,e,n){var o;let r=await qg(t,e,n),i=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Ss])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function aM(t,e,n){var o;let r=await qg(t,e,n),i=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Ss])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let s=cg(i),l=new Uu;return Object.assign(l,s),l}async function qg(t,e,n){var o,r;let i=0,s=0,l=new Yo(new Response),c="upload";for(i=t.size;s<i;){let d=Math.min(nM,i-s),f=t.slice(s,s+d);s+d>=i&&(c+=", finalize");let p=0,h=rM;for(;p<oM&&(l=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(s),"Content-Length":String(d)}}}),!(!((o=l?.headers)===null||o===void 0)&&o[Ss]));)p++,await uM(h),h=h*iM;if(s+=d,((r=l?.headers)===null||r===void 0?void 0:r[Ss])!=="active")break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function lM(t){return{size:t.size,type:t.type}}function uM(t){return new Promise(e=>setTimeout(e,t))}var yc=class{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await sM(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await aM(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await lM(e)}};var vc=class{create(e,n,o){return new Ec(e,n,o)}},Ec=class{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var ug="x-goog-api-key",Ic=class{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(ug)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ug,this.apiKey)}}};var cM="gl-node/",ws=class{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let n=new re({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;let o=VC(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;let r=new Ic(this.apiKey);this.apiClient=new Ku({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:cM+"web",uploader:new yc,downloader:new mc}),this.models=new nc(this.apiClient),this.live=new ec(this.apiClient,r,new vc),this.batches=new $u(this.apiClient),this.chats=new qu(this.models,this.apiClient),this.caches=new Gu(this.apiClient),this.files=new Wu(this.apiClient),this.operations=new oc(this.apiClient),this.authTokens=new rc(this.apiClient),this.tunings=new gc(this.apiClient),this.fileSearchStores=new sc(this.apiClient)}};var Ns=class t{constructor(){this.ai=null;this.apiKey=null}setApiKey(e){this.apiKey=e,this.ai=new ws({apiKey:e})}hasApiKey(){return!!this.apiKey}async generateExampleImages(e){let n=`A high-quality, professional, photorealistic photograph representing the scene: "${e}". Sharp focus, beautiful lighting, vivid colors, shot on a professional camera.`;try{if(!this.ai)throw new Error("API key not set.");return(await this.ai.models.generateImages({model:"imagen-4.0-generate-001",prompt:n,config:{numberOfImages:4,outputMimeType:"image/jpeg",aspectRatio:"4:3"}})).generatedImages.map(r=>`data:image/jpeg;base64,${r.image.imageBytes}`)}catch(o){return console.error("Error calling Gemini Image Generation API:",o),[]}}async generateCameraSettings(e,n,o){if(!this.ai)throw new Error("API key not set.");let r=n!=="Any"?`The user is using a ${n} camera.`:"",i=o?`Specifically, the camera model is ${o}.`:"",s,l="For each setting, also provide a concise explanation (in the corresponding 'Explanation' field) of why this specific value or range is recommended for the scene.";e.toLowerCase().includes("long exposure")?s=`
      As a professional photography assistant, provide the ideal camera settings for a "Long Exposure" shot. The goal is to capture motion blur, such as silky water, light trails, or blurred clouds.
      ${r}
      ${i}

      Give a specific value or a small, specific range for the core settings.
      - Shutter Speed: Recommend a very slow speed, likely multiple seconds (e.g., 5-30 seconds) or Bulb mode.
      - ISO: Recommend the lowest possible native setting (e.g., ISO 100, ISO 64).
      - Aperture: Suggest a mid-range aperture for sharpness (e.g., f/8 - f/16).
      - Focus Mode: Heavily recommend Manual Focus (MF) and explain the user should focus before starting the exposure.
      - General Tip: The general tip MUST explain the absolute necessity of a sturdy tripod and using a remote shutter release or the camera's self-timer to prevent camera shake.
      - Brand Specific Tip: If a brand is specified, provide a relevant tip (like Long Exposure Noise Reduction). If no brand is specified, use this tip to explain what a Neutral Density (ND) filter is and why it's essential for long exposures during the day.
      
      ${l}
      `:s=`
        As a professional photography assistant, provide the ideal camera settings for the following scene: "${e}".
        ${r}
        ${i}

        Give a specific value or a small, specific range for the core settings.
        For brand-specific settings like Focus Mode, Metering Mode, and Drive Mode, use terminology common to the specified brand if possible. If no brand is specified, use generic terms.
        Provide a recommendation for a type of lens that would be suitable for this shot.
        Also, provide a concise, actionable 'general tip' to improve the shot.
        If a camera brand is specified, add a 'brand specific tip' that leverages a feature or setting of that brand. If no brand is specified, this field can be omitted or left empty.
        
        ${l}
      `;let c={type:j.OBJECT,properties:{aperture:{type:j.STRING,description:"e.g., f/1.8, f/8-f/11"},apertureExplanation:{type:j.STRING,description:"Explain why this aperture is recommended for the scene."},iso:{type:j.STRING,description:"e.g., 100, 400-800"},isoExplanation:{type:j.STRING,description:"Explain why this ISO is recommended for the scene."},shutterSpeed:{type:j.STRING,description:"e.g., 1/125s, 30s"},shutterSpeedExplanation:{type:j.STRING,description:"Explain why this shutter speed is recommended for the scene."},whiteBalance:{type:j.STRING,description:"e.g., Auto, Daylight, 5500K"},whiteBalanceExplanation:{type:j.STRING,description:"Explain why this white balance is recommended for the scene."},focusMode:{type:j.STRING,description:"e.g., AF-C, Eye AF, Manual Focus"},focusModeExplanation:{type:j.STRING,description:"Explain why this focus mode is recommended for the scene."},driveMode:{type:j.STRING,description:"e.g., Single Shot, Continuous High"},driveModeExplanation:{type:j.STRING,description:"Explain why this drive mode is recommended for the scene."},meteringMode:{type:j.STRING,description:"e.g., Matrix, Center-Weighted"},meteringModeExplanation:{type:j.STRING,description:"Explain why this metering mode is recommended for the scene."},lensRecommendation:{type:j.STRING,description:"A recommendation for a suitable lens."},generalTip:{type:j.STRING,description:"A short, helpful tip for any camera."},brandSpecificTip:{type:j.STRING,description:"A tip specific to the user's camera brand or a key technique like using ND filters."}},required:["aperture","apertureExplanation","iso","isoExplanation","shutterSpeed","shutterSpeedExplanation","whiteBalance","whiteBalanceExplanation","focusMode","focusModeExplanation","driveMode","driveModeExplanation","meteringMode","meteringModeExplanation","lensRecommendation","generalTip"]};try{let f=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:s,config:{responseMimeType:"application/json",responseSchema:c,temperature:.5}})).text.trim(),p=JSON.parse(f);if(!p.aperture||!p.apertureExplanation||!p.iso||!p.isoExplanation||!p.shutterSpeed||!p.shutterSpeedExplanation||!p.whiteBalance||!p.whiteBalanceExplanation||!p.focusMode||!p.focusModeExplanation||!p.driveMode||!p.driveModeExplanation||!p.meteringMode||!p.meteringModeExplanation||!p.lensRecommendation||!p.generalTip)throw new Error("Invalid response structure from AI model.");return p}catch(d){throw console.error("Error calling Gemini API:",d),new Error("Failed to communicate with the AI model.")}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}};var zg=(t,e)=>e.id;function dM(t,e){if(t&1){let n=xt();C(0,"button",41),Le("click",function(){let r=gt(n).$implicit,i=oe();return mt(i.setTheme(r))}),I()}if(t&2){let n=e.$implicit,o=oe();$n(o.activeTheme().id===n.id?"ring-2 ring-white scale-110":"ring-1 ring-transparent hover:ring-white/50"),bi("background","linear-gradient(to right, "+n.iconColors.from+", "+n.iconColors.to+")"),lt("title",n.name)}}function fM(t,e){if(t&1&&(C(0,"p",42),w(1),I()),t&2){let n=oe();A(),K(n.apiKeyError())}}function pM(t,e){if(t&1){let n=xt();C(0,"button",54),Le("click",function(){let r=gt(n).$implicit,i=oe(2);return mt(i.getSettings(r))}),ke(),C(1,"svg",55),se(2,"path"),I(),$e(),C(3,"span",56),w(4),I()()}if(t&2){let n,o,r=e.$implicit,i=oe(2);$n("group p-4 bg-[rgb(var(--background-secondary-rgb))] rounded-lg shadow-lg hover:bg-[rgb(var(--accent-active-bg-rgb))]/50 transition-all duration-300 ease-in-out transform hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-[var(--accent-ring)] "+(((n=i.selectedScene())==null?null:n.id)===r.id&&i.isSettingsPanelOpen()?"ring-2 ring-[var(--accent-ring)] bg-[rgb(var(--accent-active-bg-rgb))]/60":"")),A(),$n(((o=i.selectedScene())==null?null:o.id)===r.id&&i.isSettingsPanelOpen()?"text-[var(--accent-primary)]":""),A(),Ai("d",r.icon),A(2),Rt(" ",r.name," ")}}function hM(t,e){if(t&1){let n=xt();C(0,"button",54),Le("click",function(){let r=gt(n).$implicit,i=oe(2);return mt(i.setBrand(r))}),w(1),I()}if(t&2){let n=e.$implicit,o=oe(2);$n("px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[rgb(var(--background-secondary-rgb))] focus:ring-[var(--accent-focus)] "+(o.cameraBrand()===n?"bg-[rgb(var(--accent-bg-hover-rgb))] text-[var(--accent-button-text)]":"bg-[rgb(var(--background-tertiary-rgb))] hover:bg-[rgb(var(--background-hover-rgb))]")),A(),Rt(" ",n," ")}}function gM(t,e){if(t&1&&(C(0,"p",42),w(1),I()),t&2){let n=oe(2);A(),K(n.cameraModelError())}}function mM(t,e){if(t&1){let n=xt();C(0,"main",43)(1,"section",44)(2,"h2",45),w(3,"1. Choose a Photography Scene"),I(),C(4,"div",46),Bn(5,pM,5,6,"button",47,zg),I()(),C(7,"section",48)(8,"h2",45),w(9,"2. Add Advanced Details (Optional)"),I(),C(10,"div",49)(11,"div")(12,"label",50),w(13,"Camera Brand"),I(),C(14,"div",51),Bn(15,hM,2,3,"button",47,tu),I()(),C(17,"div")(18,"label",52),w(19,"Camera Model"),I(),C(20,"input",53),Le("input",function(r){gt(n);let i=oe();return mt(i.onModelInput(r))}),I(),We(21,gM,2,1,"p",42),I()()()()}if(t&2){let n=oe();A(5),Hn(n.scenes),A(10),Hn(n.cameraBrands),A(5),un("border-[rgb(var(--border-primary-rgb))]",!n.cameraModelError())("focus:ring-[var(--accent-focus)]",!n.cameraModelError())("focus:border-[var(--accent-focus)]",!n.cameraModelError())("border-[var(--error)]",n.cameraModelError())("focus:ring-[var(--error)]",n.cameraModelError())("focus:border-[var(--error)]",n.cameraModelError()),lt("value",n.cameraModel()),A(),Je(n.cameraModelError()?21:-1)}}function yM(t,e){if(t&1){let n=xt();C(0,"div",57),Le("click",function(){gt(n);let r=oe();return mt(r.closeSettingsPanel())}),I()}}function vM(t,e){if(t&1&&(C(0,"span"),w(1),I()),t&2){let n,o=oe();A(),Rt("Settings for ",(n=o.selectedScene())==null?null:n.name)}}function EM(t,e){t&1&&(C(0,"span"),w(1,"Camera Settings"),I())}function IM(t,e){t&1&&(C(0,"div",38)(1,"div",58),ke(),C(2,"svg",59),se(3,"circle",60)(4,"path",61),I(),$e(),C(5,"span",62),w(6,"Generating Settings..."),I()()())}function CM(t,e){if(t&1&&(C(0,"div",39)(1,"div",63),ke(),C(2,"svg",64),se(3,"path",65),I(),$e(),C(4,"h3",66),w(5,"An Error Occurred"),I(),C(6,"p"),w(7),I()()()),t&2){let n=oe();A(7),K(n.error())}}function TM(t,e){if(t&1&&(C(0,"div",81)(1,"h4",75),ke(),C(2,"svg",96),se(3,"path",97),I(),w(4,"Brand Specific Tip"),I(),$e(),C(5,"p",78),w(6),I()()),t&2){let n=oe();A(6),K(n.brandSpecificTip)}}function DM(t,e){if(t&1&&(C(0,"div",89)(1,"div",98)(2,"h5",99),w(3,"Aperture"),I(),C(4,"p",100),w(5),I()(),C(6,"div",98)(7,"h5",99),w(8,"ISO"),I(),C(9,"p",101)(10,"strong"),w(11,"Definition:"),I(),w(12," ISO measures your camera's sensitivity to light. A low ISO is for bright light and gives a cleaner image, while a high ISO is for dark scenes but can add grain (noise)."),I(),C(13,"p",100),w(14),I()(),C(15,"div",98)(16,"h5",99),w(17,"Shutter Speed"),I(),C(18,"p",100),w(19),I()(),C(20,"div",98)(21,"h5",99),w(22,"White Balance"),I(),C(23,"p",100),w(24),I()(),C(25,"div",98)(26,"h5",99),w(27,"Focus Mode"),I(),C(28,"p",100),w(29),I()(),C(30,"div",98)(31,"h5",99),w(32,"Drive Mode"),I(),C(33,"p",100),w(34),I()(),C(35,"div",98)(36,"h5",99),w(37,"Metering Mode"),I(),C(38,"p",100),w(39),I()()()),t&2){let n=oe();A(5),K(n.apertureExplanation),A(9),K(n.isoExplanation),A(5),K(n.shutterSpeedExplanation),A(5),K(n.whiteBalanceExplanation),A(5),K(n.focusModeExplanation),A(5),K(n.driveModeExplanation),A(5),K(n.meteringModeExplanation)}}function _M(t,e){t&1&&(C(0,"div",93),se(1,"div",102)(2,"div",102)(3,"div",102)(4,"div",102),I())}function SM(t,e){if(t&1&&(C(0,"div",103),se(1,"img",104)(2,"div",105),I()),t&2){let n,o=e.$implicit,r=e.$index,i=oe(3);A(),lt("alt",nu("AI generated example photo for ",(n=i.selectedScene())==null?null:n.name," ",r+1))("src",o,Pl)}}function wM(t,e){if(t&1&&(C(0,"div",94),Bn(1,SM,3,4,"div",103,eu),I()),t&2){let n=oe(2);A(),Hn(n.exampleImages())}}function MM(t,e){t&1&&(C(0,"div",95)(1,"p"),w(2,"Could not load example images."),I()())}function AM(t,e){if(t&1){let n=xt();C(0,"div",40)(1,"div",67)(2,"div",68)(3,"h4",69),w(4,"Aperture"),I(),C(5,"p",70),w(6),I()(),C(7,"div",68)(8,"h4",69),w(9,"ISO"),I(),C(10,"p",70),w(11),I()(),C(12,"div",68)(13,"h4",69),w(14,"Shutter Speed"),I(),C(15,"p",70),w(16),I()(),C(17,"div",68)(18,"h4",69),w(19,"White Balance"),I(),C(20,"p",70),w(21),I()()(),C(22,"div",71)(23,"div",68)(24,"h4",69),w(25,"Focus Mode"),I(),C(26,"p",72),w(27),I()(),C(28,"div",68)(29,"h4",69),w(30,"Drive Mode"),I(),C(31,"p",72),w(32),I()(),C(33,"div",68)(34,"h4",69),w(35,"Metering Mode"),I(),C(36,"p",72),w(37),I()()(),C(38,"div",73)(39,"div",74)(40,"h4",75),ke(),C(41,"svg",76),se(42,"path",77),I(),w(43,"Lens Recommendation"),I(),$e(),C(44,"p",78),w(45),I()(),C(46,"div",74)(47,"h4",75),ke(),C(48,"svg",79),se(49,"path",80),I(),w(50,"General Tip"),I(),$e(),C(51,"p",78),w(52),I()(),We(53,TM,7,1,"div",81),I(),C(54,"div",82)(55,"button",83),Le("click",function(){gt(n);let r=oe();return mt(r.toggleExplanations())}),C(56,"h4",84),ke(),C(57,"svg",85),se(58,"path",86),I(),w(59," Settings Glossary "),I(),C(60,"svg",87),se(61,"path",88),I()(),We(62,DM,40,7,"div",89),I(),$e(),C(63,"div",90)(64,"h4",91),ke(),C(65,"svg",85),se(66,"path",92),I(),w(67," AI Generated Examples "),I(),We(68,_M,5,0,"div",93)(69,wM,3,0,"div",94)(70,MM,3,0,"div",95),I()()}if(t&2){let n=e,o=oe();A(6),K(n.aperture),A(5),K(n.iso),A(5),K(n.shutterSpeed),A(5),K(n.whiteBalance),A(6),K(n.focusMode),A(5),K(n.driveMode),A(5),K(n.meteringMode),A(8),K(n.lensRecommendation),A(7),K(n.generalTip),A(),Je(o.cameraBrand()!=="Any"&&n.brandSpecificTip?53:-1),A(7),un("rotate-180",o.isExplanationsOpen()),A(2),Je(o.isExplanationsOpen()?62:-1),A(6),Je(o.imageLoading()?68:o.exampleImages()&&o.exampleImages().length>0?69:70)}}var xs=class t{constructor(){this.geminiService=b(Ns);this.apiKey=ue("");this.apiKeyError=ue(null);this.apiKeySaved=ue(!1);this.currentYear=new Date().getFullYear();this.themes=[{id:"sky-dark",name:"Sky",iconColors:{from:"#38bdf8",to:"#3b82f6"},colors:{"--background-primary":"#111827","--text-primary":"#f9fafb","--text-secondary":"#9ca3af","--accent-primary":"#7dd3fc","--accent-ring":"#38bdf8","--accent-focus":"#0ea5e9","--accent-button-text":"#ffffff","--accent-gradient-from":"#38bdf8","--accent-gradient-to":"#3b82f6","--error":"#f87171","--background-secondary-rgb":"31 41 55","--background-tertiary-rgb":"55 65 81","--background-hover-rgb":"75 85 99","--accent-bg-hover-rgb":"2 132 199","--accent-active-bg-rgb":"12 74 110","--border-primary-rgb":"75 85 99","--background-primary-rgb":"17 24 39"}},{id:"sunset-dark",name:"Sunset",iconColors:{from:"#fb923c",to:"#f43f5e"},colors:{"--background-primary":"#1c1917","--text-primary":"#fef3c7","--text-secondary":"#a8a29e","--accent-primary":"#fb923c","--accent-ring":"#f97316","--accent-focus":"#ea580c","--accent-button-text":"#ffffff","--accent-gradient-from":"#fb923c","--accent-gradient-to":"#f43f5e","--error":"#fca5a5","--background-secondary-rgb":"41 37 36","--background-tertiary-rgb":"68 64 60","--background-hover-rgb":"87 83 78","--accent-bg-hover-rgb":"234 88 12","--accent-active-bg-rgb":"124 45 18","--border-primary-rgb":"87 83 78","--background-primary-rgb":"28 25 23"}},{id:"forest-dark",name:"Forest",iconColors:{from:"#4ade80",to:"#16a34a"},colors:{"--background-primary":"#1a2e05","--text-primary":"#ecfccb","--text-secondary":"#a3e635","--accent-primary":"#86efac","--accent-ring":"#4ade80","--accent-focus":"#22c55e","--accent-button-text":"#052e16","--accent-gradient-from":"#4ade80","--accent-gradient-to":"#16a34a","--error":"#f87171","--background-secondary-rgb":"20 83 45","--background-tertiary-rgb":"21 128 61","--background-hover-rgb":"22 163 74","--accent-bg-hover-rgb":"22 101 52","--accent-active-bg-rgb":"20 83 45","--border-primary-rgb":"22 101 52","--background-primary-rgb":"26 46 5"}},{id:"classic-light",name:"Classic",iconColors:{from:"#a5b4fc",to:"#6366f1"},colors:{"--background-primary":"#f1f5f9","--text-primary":"#0f172a","--text-secondary":"#475569","--accent-primary":"#4f46e5","--accent-ring":"#6366f1","--accent-focus":"#4338ca","--accent-button-text":"#ffffff","--accent-gradient-from":"#a5b4fc","--accent-gradient-to":"#6366f1","--error":"#ef4444","--background-secondary-rgb":"226 232 240","--background-tertiary-rgb":"203 213 225","--background-hover-rgb":"148 163 184","--accent-bg-hover-rgb":"79 70 229","--accent-active-bg-rgb":"224 231 255","--border-primary-rgb":"203 213 225","--background-primary-rgb":"241 245 249"}},{id:"sakura-light",name:"Sakura",iconColors:{from:"#f9a8d4",to:"#ec4899"},colors:{"--background-primary":"#fff1f2","--text-primary":"#831843","--text-secondary":"#be185d","--accent-primary":"#ec4899","--accent-ring":"#f472b6","--accent-focus":"#db2777","--accent-button-text":"#ffffff","--accent-gradient-from":"#f9a8d4","--accent-gradient-to":"#ec4899","--error":"#e11d48","--background-secondary-rgb":"253 232 248","--background-tertiary-rgb":"252 211 240","--background-hover-rgb":"251 182 225","--accent-bg-hover-rgb":"219 39 119","--accent-active-bg-rgb":"253 242 248","--border-primary-rgb":"251 182 225","--background-primary-rgb":"255 241 242"}}];this.scenes=[{id:"portrait_outdoor_daylight",name:"Outdoor Portrait",icon:"M12 5.5A3.5 3.5 0 0 1 15.5 9a3.5 3.5 0 0 1-3.5 3.5A3.5 3.5 0 0 1 8.5 9A3.5 3.5 0 0 1 12 5.5M5 19v-2c0-2.21 3.13-4 7-4s7 1.79 7 4v2H5zm17-7h-2v-2h2v2zm-2-4l1.41-1.41-1.41-1.41L18 6.59V8h2V6.59l1.41 1.41 1.41-1.41L21.41 5.2zM18 2h-2v2h2V2z"},{id:"portrait_indoor_lowlight",name:"Indoor Portrait",icon:"M20 18v2H4v-2c0-1.65 3.33-3 5-3 .39 0 .78.04 1.16.11A4.012 4.012 0 0 1 12 14c1.23 0 2.34.56 3.07 1.44.33-.06.66-.09 1-.09 1.67 0 5 1.35 5 3zm-8-6c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm8-10H4v16h16V2zm2-2H2v20h20V0z"},{id:"night_portrait",name:"Night Portrait",icon:"M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,19V17C5,14.79 8.13,13 12,13C15.87,13 19,14.79 19,17V19H5M19.5,9.5L21,8L19.5,6.5L18,8L19.5,9.5M17,6L16,4L15,6L16,8L17,6M22,12L21,14L22,16L24,15L22,12Z"},{id:"portrait_lighting",name:"Portrait Lighting",icon:"M12 5.5A3.5 3.5 0 0 1 15.5 9a3.5 3.5 0 0 1-3.5 3.5A3.5 3.5 0 0 1 8.5 9A3.5 3.5 0 0 1 12 5.5M5 19v-2c0-2.21 3.13-4 7-4s7 1.79 7 4v2H5zm14-7h-2v-2h2v2zm0 4h-2v-2h2v2zm0 4h-2v-2h2v2zM17 3v2h2V3h-2zm-2 2h-2V3h2v2z"},{id:"landscape_daylight",name:"Landscape",icon:"M6.5,15.5L9.5,11.5L12.5,15.5L15.5,10.5L19,15.5H5.5L6.5,15.5M21,19.5H3V4.5H21V19.5Z"},{id:"group_photo_outdoor",name:"Outdoor Group Photo",icon:"M16,13C17.66,13 19,11.66 19,10C19,8.34 17.66,7 16,7C14.34,7 13,8.34 13,10C13,11.66 14.34,13 16,13M16,14C13.33,14 8,15.33 8,18V21H24V18C24,15.33 18.67,14 16,14M8,13C9.66,13 11,11.66 11,10C11,8.34 9.66,7 8,7C6.34,7 5,8.34 5,10C5,11.66 6.34,13 8,13M8,14C7.3,14 6.62,14.07 5.97,14.21C6.91,15.27 7.5,16.5 7.5,18V21H13V18C13,15.33 12.67,14 8,14Z"},{id:"family_portrait_indoor",name:"Indoor Family Photo",icon:"M22 10.5V19c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2v-8.5c0-.82.52-1.56 1.26-1.88l8-4.5c.48-.27 1.04-.27 1.52 0l8 4.5c.74.32 1.22 1.06 1.22 1.88zM12 6c-1.93 0-3.5 1.57-3.5 3.5S10.07 13 12 13s3.5-1.57 3.5-3.5S13.93 6 12 6zm-5 13c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5v1H7v-1z"},{id:"sports_action_daylight",name:"Action/Sports",icon:"M9.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm2.5 1.5h-5c-1.1 0-2 .9-2 2v6h2v-5h1v6h2v-4h1v4h2v-6c0-1.1-.9-2-2-2z"},{id:"street_photography",name:"Street Photography",icon:"M14.5,9.5A2.5,2.5 0 0,0 12,7A2.5,2.5 0 0,0 9.5,9.5A2.5,2.5 0 0,0 12,12A2.5,2.5 0 0,0 14.5,9.5M8,21V12.5C8,11.12 9.12,10 10.5,10H13.5C14.88,10 16,11.12 16,12.5V21H14V16H10V21H8M6,21H2V9L6,5V21M18,21V5L22,9V21H18Z"},{id:"night_sky_astrophotography",name:"Night Sky",icon:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.67 0-4.85-2.18-4.85-4.85 0-1.82.89-3.42 2.26-4.4C12.92 3.04 12.46 3 12 3zm4.5 9.5l-1.06 1.06-1.44-1.44-1.44 1.44-1.06-1.06L12.94 13l-1.44-1.44 1.06-1.06L14 11.56l1.44-1.44 1.06 1.06L14.06 13l1.44 1.44z"},{id:"macro_photography",name:"Macro Photography",icon:"M17.5 15c-1.2 0-2.3.5-3.1 1.3L5.8 7.7c.3-1 .2-2.1-.3-3s-1.4-1.5-2.5-1.7c-1.1-.2-2.2.2-2.8 1s-.8 1.7-.5 2.8.9 1.9 2 2.3l8.6 8.6c-.7.8-1.2 1.9-1.2 3 0 2.2 1.8 4 4 4s4-1.8 4-4-1.8-4-4-4zm-14-8c0-.6.4-1 1-1s1 .4 1 1-.4 1-1 1-1-.4-1-1zm3 3c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1zm3 3c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1zm-3 3c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1z"},{id:"product_photography",name:"Product Photography",icon:"M16,5V4H8V5H16M16.4,7H7.6C7.05,7 6.6,7.45 6.6,8V18.4C6.6,18.95 7.05,19.4 7.6,19.4H16.4C16.95,19.4 17.4,18.95 17.4,18.4V8C17.4,7.45 16.95,7 16.4,7Z"},{id:"wildlife_photography",name:"Wildlife Photography",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1.5 15.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm3-3c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm-6 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm3-4.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"},{id:"fireworks_photography",name:"Fireworks",icon:"M12 2C12 2 11 4 9 4C7 4 7 2 7 2S8 0 10 0C12 0 12 2 12 2M5.5 4.5C5.5 4.5 4.5 5.5 4.5 7.5S5.5 10.5 5.5 10.5S6.5 9.5 6.5 7.5S5.5 4.5 5.5 4.5M18.5 4.5C18.5 4.5 17.5 5.5 17.5 7.5S18.5 10.5 18.5 10.5S19.5 9.5 19.5 7.5S18.5 4.5 18.5 4.5M12 12C12 12 11 14 9 14C7 14 7 12 7 12S8 10 10 10C12 10 12 12 12 12M14 22H10V15H14V22Z"},{id:"long_exposure",name:"Long Exposure",icon:"M13 3.05V1h-2v2.05A9 9 0 0 0 3.05 11H1v2h2.05A9 9 0 0 0 11 20.95V23h2v-2.05A9 9 0 0 0 20.95 13H23v-2h-2.05A9 9 0 0 0 13 3.05zM12 19a7 7 0 1 1 0-14 7 7 0 0 1 0 14zm1-8h2.55A5.52 5.52 0 0 0 12 6.45V9h1zm-4.45 4L9.5 13h1.05l-1.9 1.9A5.52 5.52 0 0 0 6.45 12H9v1z"},{id:"light_painting",name:"Light Painting",icon:"M7 14c.83 0 1.5.67 1.5 1.5S7.83 17 7 17s-1.5-.67-1.5-1.5S6.17 14 7 14zm3 2c0-1.66-1.34-3-3-3s-3 1.34-3 3h2c0-.55.45-1 1-1s1 .45 1 1h2zm10.25-3.5-.71-.71c-.38-.38-.89-.59-1.42-.59H17v-2h-2v3.42l1.44 1.44c.31.32.72.54 1.16.64l.1.02c.82 0 1.5-.67 1.5-1.5 0-.25-.06-.48-.18-.69zm-1.89 3.33L17 14.42V17h-2v-4h-1.17l-1-1H11v-2h2.17l2-2H13v-2h2v1.17l4.42 4.42c.39.39.39 1.02 0 1.41zM3 14c.55 0 1 .45 1 1v2h2c.55 0 1 .45 1 1s-.45 1-1 1H4v2c0 .55-.45 1-1 1s-1-.45-1-1v-2H0c-.55 0-1-.45-1-1s.45-1 1-1h2v-2c0-.55.45-1 1-1z"},{id:"panning_photography",name:"Panning",icon:"M8.5 14.5L4 19l1.5 1.5L10 16l-1.5-1.5zM19 4l-1.5-1.5L13 7l1.5 1.5L19 4zm-6.5 2.5l-1-1L1 15.5l1 1L12.5 6.5z"},{id:"50mm_walkaround",name:"50mm Walk-around",icon:"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z"},{id:"85mm_bokeh_portrait",name:"85mm Bokeh Portrait",icon:"M20 18v2H4v-2c0-1.65 3.33-3 5-3 .39 0 .78.04 1.16.11A4.012 4.012 0 0 1 12 14c1.23 0 2.34.56 3.07 1.44.33-.06.66-.09 1-.09 1.67 0 5 1.35 5 3zm-8-6c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm8-10H4v16h16V2zm2-2H2v20h20V0z"},{id:"70-200mm_sports_action",name:"70-200mm Sports",icon:"M9.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm2.5 1.5h-5c-1.1 0-2 .9-2 2v6h2v-5h1v6h2v-4h1v4h2v-6c0-1.1-.9-2-2-2z"},{id:"70-200mm_compressed_landscape",name:"70-200mm Landscape",icon:"M17,2H14L12,4H8L6,2H3A1,1 0 0,0 2,3V21A1,1 0 0,0 3,22H17A1,1 0 0,0 18,21V3A1,1 0 0,0 17,2M12.5,17A2.5,2.5 0 0,1 10,14.5A2.5,2.5 0 0,1 12.5,12A2.5,2.5 0 0,1 15,14.5A2.5,2.5 0 0,1 12.5,17M12.5,7.5A1,1 0 0,1 11.5,8.5V11.5A1,1 0 0,1 12.5,12.5A1,1 0 0,1 13.5,11.5V8.5A1,1 0 0,1 12.5,7.5M22,6V18H20V6H22Z"}];this.cameraBrands=["Any","Canon","Nikon","Sony","Fujifilm","Panasonic"];this.activeTheme=ue(this.themes[0]);this.selectedScene=ue(null);this.settings=ue(null);this.loading=ue(!1);this.error=ue(null);this.isSettingsPanelOpen=ue(!1);this.exampleImages=ue(null);this.imageLoading=ue(!1);this.isExplanationsOpen=ue(!1);this.cameraBrand=ue("Any");this.cameraModel=ue("");this.cameraModelError=ue(null);this.applyTheme(this.activeTheme()),Ka(()=>{this.applyTheme(this.activeTheme())})}onApiKeyInput(e){let n=e.target.value.trim();this.apiKey.set(n),n?/^AIza[0-9A-Za-z-_]{30,}$/.test(n)?this.apiKeyError.set(null):this.apiKeyError.set("Invalid API key format."):this.apiKeyError.set("API key is required."),this.apiKeySaved.set(!1)}saveApiKey(){!this.apiKeyError()&&this.apiKey()&&(this.geminiService.setApiKey(this.apiKey()),this.apiKeySaved.set(!0))}applyTheme(e){for(let[n,o]of Object.entries(e.colors))document.documentElement.style.setProperty(n,o)}setTheme(e){this.activeTheme.set(e)}async getSettings(e){if(this.loading()&&this.imageLoading())return;this.isExplanationsOpen.set(!1),this.isSettingsPanelOpen.set(!0),this.selectedScene.set(e),this.settings.set(null),this.exampleImages.set(null),this.error.set(null),this.loading.set(!0),this.imageLoading.set(!0);let n=this.geminiService.generateCameraSettings(e.name,this.cameraBrand(),this.cameraModel()),o=this.geminiService.generateExampleImages(e.name);n.then(r=>{this.settings.set(r)}).catch(r=>{this.error.set("Failed to generate camera settings. Please try again."),console.error("Settings Error:",r)}).finally(()=>{this.loading.set(!1)}),o.then(r=>{this.exampleImages.set(r)}).catch(r=>{console.error("Image Generation Error:",r),this.exampleImages.set([])}).finally(()=>{this.imageLoading.set(!1)})}closeSettingsPanel(){this.isSettingsPanelOpen.set(!1)}setBrand(e){this.cameraBrand.set(e)}onModelInput(e){let o=e.target.value;if(this.cameraModel.set(o),!o){this.cameraModelError.set(null);return}/^(?=.*[a-zA-Z])(?=.*[0-9])[a-zA-Z0-9\s-]{2,20}$/.test(o)?this.cameraModelError.set(null):this.cameraModelError.set("Invalid format. Use letters and numbers (e.g., A7 IV, R5).")}toggleExplanations(){this.isExplanationsOpen.update(e=>!e)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=Yl({type:t,selectors:[["app-root"]],decls:57,vars:22,consts:[[1,"min-h-screen","flex","flex-col","items-center","p-4","sm:p-6","md:p-8"],[1,"w-full","max-w-5xl","flex","justify-end","mb-4","-mt-2"],[1,"p-1.5","bg-[rgb(var(--background-secondary-rgb))]","rounded-lg","shadow-md"],[1,"flex","items-center","space-x-2"],[1,"w-6","h-6","rounded-full","focus:outline-none","focus:ring-2","focus:ring-offset-2","ring-offset-[rgb(var(--background-secondary-rgb))]","transition-all",3,"class","background","title"],[1,"w-full","max-w-5xl","text-center","mb-8","md:mb-12"],[1,"text-4xl","sm:text-5xl","md:text-6xl","font-extrabold","mb-2","bg-clip-text","text-transparent","bg-gradient-to-r","from-[var(--accent-gradient-from)]","to-[var(--accent-gradient-to)]"],[1,"text-lg","sm:text-xl","text-[var(--text-secondary)]"],[1,"w-full","max-w-5xl","mb-8","md:mb-12"],[1,"h-32","md:h-40","grid","grid-cols-4","sm:grid-cols-6","gap-2","rounded-xl","overflow-hidden","shadow-lg"],[1,"sm:col-span-2","col-span-2","relative","group"],["src","https://picsum.photos/seed/portrait/600/800","alt","A striking portrait of a person",1,"w-full","h-full","object-cover","transition-transform","duration-500","group-hover:scale-105"],[1,"absolute","inset-0","bg-black/20","hover:bg-black/10","transition-colors"],[1,"col-span-2","sm:col-span-2","relative","group"],["src","https://picsum.photos/seed/landscape/800/600","alt","A vast landscape with mountains",1,"w-full","h-full","object-cover","transition-transform","duration-500","group-hover:scale-105"],[1,"hidden","sm:block","sm:col-span-1","relative","group"],["src","https://picsum.photos/seed/wildlife/600/800","alt","A close-up of a wild animal",1,"w-full","h-full","object-cover","transition-transform","duration-500","group-hover:scale-105"],["src","https://picsum.photos/seed/street/600/800","alt","A candid moment in street photography",1,"w-full","h-full","object-cover","transition-transform","duration-500","group-hover:scale-105"],[1,"mb-8","w-full","max-w-2xl","mx-auto","p-4","bg-[rgb(var(--background-secondary-rgb))]/60","rounded-lg","shadow-md","flex","flex-col","items-center"],["for","apiKeyInput",1,"block","text-lg","font-semibold","mb-2","text-[var(--text-secondary)]"],["id","apiKeyInput","type","password","autocomplete","off","placeholder","Enter your Gemini API key",1,"w-full","px-4","py-2","bg-[rgb(var(--background-tertiary-rgb))]","border","rounded-md","focus:outline-none","focus:ring-2","text-[var(--text-primary)]","placeholder:text-[var(--text-secondary)]/70","transition-colors","mb-2",3,"input","value"],[1,"mt-2","px-6","py-2","bg-[var(--accent-primary)]","text-[var(--accent-button-text)]","rounded-md","font-semibold","shadow","hover:bg-[var(--accent-focus)]","transition-colors",3,"click","disabled"],["class","mt-2 text-sm text-[var(--error)] animate-fast-fade-in",4,"ngIf"],["class","w-full max-w-5xl flex-grow",4,"ngIf"],[1,"w-full","max-w-5xl","text-center","py-6","mt-12","border-t","border-t-[rgb(var(--border-primary-rgb))]","text-[var(--text-secondary)]","text-sm"],[1,"flex","flex-col","sm:flex-row","justify-center","items-center","gap-4","sm:gap-8","mb-4"],["href","mailto:contact@camerai.app",1,"hover:text-[var(--text-primary)]","transition-colors"],["href","https://opensource.org/licenses/MIT","target","_blank","rel","noopener noreferrer",1,"hover:text-[var(--text-primary)]","transition-colors"],["href","#",1,"hover:text-[var(--text-primary)]","transition-colors"],[1,"fixed","inset-0","bg-black/60","z-40","animate-backdrop-fade-in"],[1,"fixed","top-0","right-0","h-full","w-full","max-w-lg","bg-[rgb(var(--background-primary-rgb))]","shadow-2xl","z-50","transform","transition-transform","duration-300","ease-in-out"],[1,"h-full","flex","flex-col"],[1,"flex","items-center","justify-between","p-4","border-b","border-b-[rgb(var(--border-primary-rgb))]","flex-shrink-0"],[1,"text-xl","font-bold","text-[var(--accent-primary)]"],[1,"p-2","rounded-full","hover:bg-[rgb(var(--background-hover-rgb))]","text-[var(--text-secondary)]","hover:text-[var(--text-primary)]","transition-colors","focus:outline-none","focus:ring-2","focus:ring-[var(--accent-focus)]",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"overflow-y-auto","flex-grow","p-6","relative"],[1,"absolute","inset-0","flex","items-center","justify-center","rounded-lg","z-10"],[1,"flex","items-center","justify-center","h-full","text-center","text-[var(--error)]"],[1,"animate-fade-in"],[1,"w-6","h-6","rounded-full","focus:outline-none","focus:ring-2","focus:ring-offset-2","ring-offset-[rgb(var(--background-secondary-rgb))]","transition-all",3,"click","title"],[1,"mt-2","text-sm","text-[var(--error)]","animate-fast-fade-in"],[1,"w-full","max-w-5xl","flex-grow"],[1,"mb-10"],[1,"text-2xl","font-bold","text-[var(--accent-primary)]","mb-6","text-center"],[1,"grid","grid-cols-2","sm:grid-cols-3","lg:grid-cols-5","gap-4"],[3,"class"],[1,"mb-10","p-6","bg-[rgb(var(--background-secondary-rgb))]/50","rounded-lg"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","items-start"],[1,"block","text-lg","font-semibold","mb-3","text-[var(--text-secondary)]"],[1,"flex","flex-wrap","gap-2"],["for","cameraModel",1,"block","text-lg","font-semibold","mb-3","text-[var(--text-secondary)]"],["id","cameraModel","type","text","placeholder","e.g., Sony A7 IV, Canon R5",1,"w-full","px-4","py-2","bg-[rgb(var(--background-tertiary-rgb))]","border","rounded-md","focus:outline-none","focus:ring-2","text-[var(--text-primary)]","placeholder:text-[var(--text-secondary)]/70","transition-colors",3,"input","value"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"h-10","w-10","mx-auto","mb-3","text-[var(--text-secondary)]","group-hover:text-[var(--accent-primary)]","transition-all","duration-300","ease-in-out","group-hover:scale-110","group-hover:-rotate-3"],[1,"font-semibold","text-sm","text-center","block","text-[var(--text-primary)]"],[1,"fixed","inset-0","bg-black/60","z-40","animate-backdrop-fade-in",3,"click"],[1,"flex","flex-col","items-center","text-[var(--accent-primary)]"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-10","w-10","mb-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-lg","font-semibold"],[1,"flex","flex-col","items-center"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"h-12","w-12","mb-3",2,"animation","icon-shake 0.6s ease-in-out"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"],[1,"text-xl","font-bold"],[1,"grid","grid-cols-2","md:grid-cols-2","gap-4","mb-6"],[1,"bg-[rgb(var(--background-tertiary-rgb))]/50","p-4","rounded-lg","text-center"],[1,"text-sm","font-semibold","text-[var(--text-secondary)]"],[1,"text-2xl","font-bold","text-[var(--text-primary)]"],[1,"space-y-4","mb-6"],[1,"text-xl","font-bold","text-[var(--text-primary)]"],[1,"space-y-4"],[1,"bg-[rgb(var(--background-primary-rgb))]/40","p-5","rounded-lg"],[1,"flex","items-center","text-lg","font-bold","text-[var(--accent-primary)]","mb-2"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"h-6","w-6","mr-2",2,"animation","icon-pop-in 0.5s ease-out 0.3s backwards"],["d","m13.28 8.43-3.75-3.75a1.5 1.5 0 0 0-2.12 0L2.05 10.05a1.5 1.5 0 0 0 0 2.12l3.75 3.75a1.5 1.5 0 0 0 2.12 0L13.28 10a1.5 1.5 0 0 0 0-1.57zM18 6a4 4 0 1 0 0 8a4 4 0 0 0 0-8zm0 6a2 2 0 1 1 0-4a2 2 0 0 1 0 4z"],[1,"text-[var(--text-secondary)]","leading-relaxed"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"h-6","w-6","mr-2",2,"animation","icon-pop-in 0.5s ease-out 0.4s backwards"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1zm-1-8V6h2v2h-2z"],[1,"bg-gradient-to-r","from-[rgb(var(--accent-active-bg-rgb))]/50","to-[rgb(var(--background-primary-rgb))]/40","p-5","rounded-lg","border-l-4","border-[var(--accent-ring)]"],[1,"mt-8"],[1,"w-full","flex","justify-between","items-center","p-2","rounded-lg","hover:bg-[rgb(var(--background-hover-rgb))]","transition-colors","focus:outline-none","focus:ring-2","focus:ring-[var(--accent-focus)]",3,"click"],[1,"flex","items-center","text-lg","font-bold","text-[var(--accent-primary)]"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"h-6","w-6","mr-2"],["d","M11.5 13.5H10v-2h1.5v2zm2.5-1.5a2 2 0 1 0-4 0H8.5a3.5 3.5 0 1 1 5.4 2.7L15 15.5V17h-1.5v-1.1l-1.6-1.6c.1-.2.2-.4.2-.6zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-1 14H5c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h14c.55 0 1 .45 1 1v10c0 .55-.45 1-1 1z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-[var(--text-secondary)]","transition-transform","duration-300"],["fill-rule","evenodd","d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule","evenodd"],[1,"mt-4","pl-4","border-l-2","border-[var(--accent-ring)]","space-y-4","animate-slide-down"],[1,"mt-8","pt-6","border-t","border-t-[rgb(var(--border-primary-rgb))]"],[1,"flex","items-center","text-lg","font-bold","text-[var(--accent-primary)]","mb-4"],["d","M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"],[1,"grid","grid-cols-2","gap-3","animate-pulse"],[1,"grid","grid-cols-2","gap-3"],[1,"text-center","text-[var(--text-secondary)]","p-4","bg-[rgb(var(--background-tertiary-rgb))]","rounded-lg"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"h-6","w-6","mr-2",2,"animation","icon-pop-in 0.5s ease-out 0.5s backwards"],["d","M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm-1 14H9V8h2v8zm4 0h-2V8h2v8z"],[1,"p-3","bg-[rgb(var(--background-tertiary-rgb))]/40","rounded-r-lg"],[1,"font-semibold","text-[var(--text-primary)]"],[1,"text-sm","text-[var(--text-secondary)]","leading-relaxed"],[1,"text-sm","text-[var(--text-secondary)]","leading-relaxed","pb-2","mb-2","border-b","border-[rgb(var(--border-primary-rgb))]"],[1,"bg-[rgb(var(--background-tertiary-rgb))]","rounded-lg","aspect-[4/3]"],[1,"relative","group","overflow-hidden","rounded-lg"],[1,"w-full","h-full","object-cover","aspect-[4/3]","transition-transform","duration-300","group-hover:scale-105","animate-fade-in",3,"src","alt"],[1,"absolute","inset-0","bg-black/10","group-hover:bg-black/0","transition-colors"]],template:function(n,o){if(n&1&&(C(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Bn(4,dM,1,5,"button",4,zg),I()()(),C(6,"header",5)(7,"h1",6),w(8," AI Camera Settings "),I(),C(9,"p",7),w(10," Select a scene to instantly get professional camera settings. "),I()(),C(11,"section",8)(12,"div",9)(13,"div",10),se(14,"img",11)(15,"div",12),I(),C(16,"div",13),se(17,"img",14)(18,"div",12),I(),C(19,"div",15),se(20,"img",16)(21,"div",12),I(),C(22,"div",15),se(23,"img",17)(24,"div",12),I()()(),C(25,"section",18)(26,"label",19),w(27,"Google Gemini API Key"),I(),C(28,"input",20),Le("input",function(i){return o.onApiKeyInput(i)}),I(),C(29,"button",21),Le("click",function(){return o.saveApiKey()}),w(30," Save API Key "),I(),ko(31,fM,2,1,"p",22),I(),ko(32,mM,22,14,"main",23),C(33,"footer",24)(34,"div",25)(35,"a",26),w(36,"Contact Us"),I(),C(37,"a",27),w(38,"Terms (MIT License)"),I(),C(39,"a",28),w(40,"Privacy Policy"),I()(),C(41,"p"),w(42),I()(),We(43,yM,1,0,"div",29),C(44,"aside",30)(45,"div",31)(46,"div",32)(47,"h2",33),We(48,vM,2,1,"span")(49,EM,2,0,"span"),I(),C(50,"button",34),Le("click",function(){return o.closeSettingsPanel()}),ke(),C(51,"svg",35),se(52,"path",36),I()()(),$e(),C(53,"div",37),We(54,IM,7,0,"div",38),We(55,CM,8,1,"div",39),We(56,AM,71,14,"div",40),I()()()()),n&2){let r;A(4),Hn(o.themes),A(24),un("border-[var(--border-primary-rgb))]",!o.apiKeyError())("focus:ring-[var(--accent-focus)]",!o.apiKeyError())("border-[var(--error)]",o.apiKeyError())("focus:ring-[var(--error)]",o.apiKeyError()),lt("value",o.apiKey()),A(),lt("disabled",!o.apiKey()||!!o.apiKeyError()),A(2),lt("ngIf",o.apiKeyError()),A(),lt("ngIf",o.apiKeySaved()),A(10),Rt("\xA9 ",o.currentYear," AI Camera Settings Generator. All Rights Reserved."),A(),Je(o.isSettingsPanelOpen()?43:-1),A(),un("translate-x-0",o.isSettingsPanelOpen())("translate-x-full",!o.isSettingsPanelOpen()),A(4),Je(o.selectedScene()?48:49),A(6),Je(o.loading()?54:-1),A(),Je(o.error()?55:-1),A(),Je((r=o.settings())?56:-1,r)}},dependencies:[ki,au],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}.animate-backdrop-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_backdropFadeIn .3s ease-in-out}.animate-fast-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fastFadeIn .3s ease-out}.animate-slide-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .4s ease-out}@keyframes _ngcontent-%COMP%_backdropFadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fastFadeIn{0%{opacity:0;transform:translateY(-3px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_icon-pulse{0%,to{transform:scale(1);opacity:.7}50%{transform:scale(1.05);opacity:1}}@keyframes _ngcontent-%COMP%_icon-shake{0%,to{transform:translate(0)}10%,30%,50%,70%,90%{transform:translate(-4px)}20%,40%,60%,80%{transform:translate(4px)}}@keyframes _ngcontent-%COMP%_icon-pop-in{0%{transform:scale(.5);opacity:0}75%{transform:scale(1.1);opacity:1}to{transform:scale(1);opacity:1}}"],changeDetection:0})}};gu(xs,{providers:[ou(),Iu()]}).catch(t=>console.error(t));
